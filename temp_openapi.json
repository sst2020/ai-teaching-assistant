{"openapi":"3.1.0","info":{"title":"AI Teaching Assistant API","description":"Backend API for AI-powered teaching assistant with automated grading and Q&A support","version":"1.0.0"},"paths":{"/health":{"get":{"tags":["Health"],"summary":"Health Check","description":"健康检查端点，验证 API 和数据库是否正常运行。\n\nArgs:\n    db: 异步数据库会话（自动注入）\n\nReturns:\n    HealthResponse: 包含以下字段的健康状态响应：\n        - status: 服务状态（\"healthy\" 或 \"degraded\"）\n        - version: API 版本号\n        - timestamp: 检查时间戳\n        - database_status: 数据库连接状态","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}},"/":{"get":{"tags":["Health"],"summary":"Root","description":"根端点，返回 API 基本信息。\n\nReturns:\n    dict: 包含以下字段的 API 信息：\n        - name: 应用名称\n        - version: 版本号\n        - description: 应用描述\n        - docs_url: Swagger 文档地址\n        - health_check: 健康检查端点地址","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/auth/register":{"post":{"tags":["Authentication"],"summary":"Register","description":"注册新用户。\n\n- 创建 User 记录\n- 同时创建 Student 记录（使用相同的 student_id）\n- 返回 JWT tokens","operationId":"register_api_v1_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/login":{"post":{"tags":["Authentication"],"summary":"Login","description":"用户登录。\n\n- 验证学号和密码\n- 更新最后登录时间\n- 返回 JWT tokens","operationId":"login_api_v1_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/refresh":{"post":{"tags":["Authentication"],"summary":"Refresh Access Token","description":"刷新 Access Token。\n\n- 验证 Refresh Token\n- 撤销旧的 Refresh Token (Rotation)\n- 生成新的 Access Token 和 Refresh Token","operationId":"refresh_access_token_api_v1_auth_refresh_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/logout":{"post":{"tags":["Authentication"],"summary":"Logout","description":"用户登出。\n\n- 将当前 Access Token 加入黑名单\n- 撤销所有 Refresh Tokens","operationId":"logout_api_v1_auth_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LogoutResponse"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/auth/me":{"get":{"tags":["Authentication"],"summary":"Get Current User Info","description":"获取当前用户信息。\n\n需要有效的 Access Token。","operationId":"get_current_user_info_api_v1_auth_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/auth/change-password":{"post":{"tags":["Authentication"],"summary":"Change Password","description":"修改密码。\n\n- 验证旧密码\n- 更新为新密码\n- 撤销所有现有 tokens (强制重新登录)","operationId":"change_password_api_v1_auth_change_password_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/auth/revoke-all":{"post":{"tags":["Authentication"],"summary":"Revoke All Tokens","description":"撤销所有 Refresh Tokens。\n\n用于安全事件响应,强制所有设备重新登录。","operationId":"revoke_all_tokens_api_v1_auth_revoke_all_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RevokeAllTokensResponse"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/auth/profile":{"patch":{"tags":["Authentication"],"summary":"Update Profile","description":"更新用户资料。\n\n- 可更新姓名\n- 学号不可更改","operationId":"update_profile_api_v1_auth_profile_patch","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProfileRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProfileResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/auth/avatar":{"post":{"tags":["Authentication"],"summary":"Upload Avatar","description":"上传用户头像。\n\n- 接受 multipart/form-data 格式的图片文件\n- 支持 jpg, jpeg, png, gif, webp 格式\n- 最大文件大小 5MB","operationId":"upload_avatar_api_v1_auth_avatar_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_avatar_api_v1_auth_avatar_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvatarUploadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/auth/account":{"delete":{"tags":["Authentication"],"summary":"Delete Account","description":"注销账户。\n\n- 需要密码确认\n- 删除用户及所有关联数据\n- 此操作不可逆","operationId":"delete_account_api_v1_auth_account_delete","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteAccountRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteAccountResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/assignments":{"post":{"tags":["Assignment Management"],"summary":"Create Assignment","description":"Create a new assignment.\n\n- Creates an assignment with the provided information\n- Returns the created assignment data","operationId":"create_assignment_api_v1_assignments_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssignmentCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssignmentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Assignment Management"],"summary":"List Assignments","description":"List all assignments with pagination.\n\n- Supports filtering by course_id\n- Returns paginated results","operationId":"list_assignments_api_v1_assignments_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":20,"title":"Page Size"},"description":"Items per page"},{"name":"course_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by course ID","title":"Course Id"},"description":"Filter by course ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssignmentListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/assignments/course/{course_id}":{"get":{"tags":["Assignment Management"],"summary":"Get Course Assignments","description":"Get all assignments for a specific course.\n\n- Returns paginated list of assignments for the course","operationId":"get_course_assignments_api_v1_assignments_course__course_id__get","parameters":[{"name":"course_id","in":"path","required":true,"schema":{"type":"string","title":"Course Id"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":20,"title":"Page Size"},"description":"Items per page"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssignmentListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/assignments/stats":{"get":{"tags":["Assignment Management"],"summary":"Get Assignment Stats","description":"获取作业统计信息。\n\n返回:\n- total: 总作业数\n- pending_grading: 待批改数量\n- graded: 已批改数量\n- by_type: 按类型分类统计","operationId":"get_assignment_stats_api_v1_assignments_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/assignments/{assignment_id}":{"get":{"tags":["Assignment Management"],"summary":"Get Assignment","description":"Get assignment details by assignment_id.\n\n- Returns assignment details if found\n- Returns 404 if assignment not found","operationId":"get_assignment_api_v1_assignments__assignment_id__get","parameters":[{"name":"assignment_id","in":"path","required":true,"schema":{"type":"string","title":"Assignment Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssignmentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Assignment Management"],"summary":"Update Assignment","description":"Update assignment information.\n\n- Updates only the provided fields\n- Returns the updated assignment data","operationId":"update_assignment_api_v1_assignments__assignment_id__put","parameters":[{"name":"assignment_id","in":"path","required":true,"schema":{"type":"string","title":"Assignment Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssignmentUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssignmentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Assignment Management"],"summary":"Delete Assignment","description":"Delete an assignment.\n\n- Removes the assignment and all associated submissions\n- Returns success message on deletion","operationId":"delete_assignment_api_v1_assignments__assignment_id__delete","parameters":[{"name":"assignment_id","in":"path","required":true,"schema":{"type":"string","title":"Assignment Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/assignments/grade":{"post":{"tags":["Assignment Management"],"summary":"Grade Assignment","description":"Grade a single assignment submission.\n\n- Evaluates code correctness, style, and efficiency for code assignments\n- Assesses completeness, innovation, and clarity for reports\n- Generates personalized feedback and suggestions","operationId":"grade_assignment_api_v1_assignments_grade_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssignmentSubmission"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GradingResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/assignments/grade/batch":{"post":{"tags":["Assignment Management"],"summary":"Batch Grade Assignments","description":"Grade multiple assignments in batch.\n\nUseful for grading all submissions for a particular assignment at once.","operationId":"batch_grade_assignments_api_v1_assignments_grade_batch_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchGradingRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchGradingResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/assignments/plagiarism-check":{"post":{"tags":["Assignment Management"],"summary":"Check Plagiarism","description":"Check an assignment for plagiarism.\n\n- Detects similarity with other submissions\n- Identifies potential code copying\n- Provides detailed analysis","operationId":"check_plagiarism_api_v1_assignments_plagiarism_check_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssignmentSubmission"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlagiarismResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/assignments/upload":{"post":{"tags":["Assignment Management"],"summary":"Upload Assignment","description":"Upload an assignment file for grading.\n\nSupports code files (.py, .java, .cpp, etc.) and documents (.pdf, .docx).","operationId":"upload_assignment_api_v1_assignments_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_assignment_api_v1_assignments_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/assignments/analyze-code":{"post":{"tags":["Assignment Management"],"summary":"Analyze Code","description":"Perform static code analysis on submitted code.\n\n- PEP 8 style compliance checking\n- Cyclomatic complexity analysis\n- Code smell detection\n- Maintainability metrics","operationId":"analyze_code_api_v1_assignments_analyze_code_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CodeAnalysisRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CodeAnalysisResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/assignments/plagiarism/check":{"post":{"tags":["Assignment Management"],"summary":"Check Code Plagiarism","description":"Check code submission for plagiarism using AST-based analysis.\n\n- Compares against stored submissions\n- Uses structural similarity (not just text matching)\n- Detects copied code with renamed variables","operationId":"check_code_plagiarism_api_v1_assignments_plagiarism_check_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlagiarismCheckRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlagiarismReport"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/assignments/plagiarism/batch":{"post":{"tags":["Assignment Management"],"summary":"Batch Plagiarism Check","description":"Check multiple submissions against each other for plagiarism.\n\nUseful for checking all submissions for an assignment at once.","operationId":"batch_plagiarism_check_api_v1_assignments_plagiarism_batch_post","parameters":[{"name":"course_id","in":"query","required":true,"schema":{"type":"string","description":"Course ID for the submissions","title":"Course Id"},"description":"Course ID for the submissions"}],"requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Submissions"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchPlagiarismReport"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/assignments/plagiarism/batch-analyze":{"post":{"tags":["Assignment Management"],"summary":"Batch Analyze Plagiarism","description":"批量分析多个提交的相似度（增强版）\n\n功能：\n- 生成完整的相似度矩阵\n- 支持多种相似度算法（AST、编辑距离、余弦相似度）\n- 检测变量/函数重命名和代码重构\n- 生成每个学生的原创性报告\n\n请求体示例：\n```json\n{\n    \"assignment_id\": \"hw001\",\n    \"course_id\": \"CS101\",\n    \"submissions\": [\n        {\"student_id\": \"s001\", \"student_name\": \"张三\", \"code\": \"def hello(): ...\"},\n        {\"student_id\": \"s002\", \"student_name\": \"李四\", \"code\": \"def greet(): ...\"}\n    ],\n    \"similarity_threshold\": 0.7,\n    \"algorithms\": [\"combined\"],\n    \"generate_reports\": true\n}\n```","operationId":"batch_analyze_plagiarism_api_v1_assignments_plagiarism_batch_analyze_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/schemas__plagiarism__BatchAnalysisRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchAnalysisResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/assignments/plagiarism/originality-report/{submission_id}":{"get":{"tags":["Assignment Management"],"summary":"Get Originality Report","description":"获取单个提交的原创性分析报告\n\n返回：\n- 原创性评分（0-100）\n- 相似代码片段的精确位置\n- 与哪些其他作业存在相似性\n- 改进建议","operationId":"get_originality_report_api_v1_assignments_plagiarism_originality_report__submission_id__get","parameters":[{"name":"submission_id","in":"path","required":true,"schema":{"type":"string","title":"Submission Id"}},{"name":"assignment_id","in":"query","required":true,"schema":{"type":"string","description":"作业ID","title":"Assignment Id"},"description":"作业ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OriginalityReport"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/assignments/plagiarism/settings":{"get":{"tags":["Assignment Management"],"summary":"Get Plagiarism Settings","description":"获取当前查重设置","operationId":"get_plagiarism_settings_api_v1_assignments_plagiarism_settings_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlagiarismSettings"}}}}}},"put":{"tags":["Assignment Management"],"summary":"Update Plagiarism Settings","description":"更新查重设置\n\n可配置项：\n- similarity_threshold: 相似度阈值 (0-1)\n- algorithms: 启用的算法列表\n- ast_weight: AST算法权重\n- token_weight: Token算法权重\n- text_weight: 文本算法权重\n- detect_renaming: 是否检测重命名\n- detect_refactoring: 是否检测重构","operationId":"update_plagiarism_settings_api_v1_assignments_plagiarism_settings_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlagiarismSettings"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlagiarismSettings"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/assignments/teacher/submit":{"post":{"tags":["Assignment Management"],"summary":"Teacher Submit Assignment","description":"教师提交作业定义\n\n用于教师创建新的作业，可以包含附件。","operationId":"teacher_submit_assignment_api_v1_assignments_teacher_submit_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_teacher_submit_assignment_api_v1_assignments_teacher_submit_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/assignments/teacher/batch-upload":{"post":{"tags":["Assignment Management"],"summary":"Batch Upload Student Submissions","description":"批量上传学生作业文件\n\n用于教师批量上传学生的作业文件。","operationId":"batch_upload_student_submissions_api_v1_assignments_teacher_batch_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_batch_upload_student_submissions_api_v1_assignments_teacher_batch_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchUploadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/assignments/teacher/{assignment_id}/submissions":{"get":{"tags":["Assignment Management"],"summary":"Get Assignment Submissions","description":"获取作业提交列表\n\n返回指定作业的所有提交记录。","operationId":"get_assignment_submissions_api_v1_assignments_teacher__assignment_id__submissions_get","parameters":[{"name":"assignment_id","in":"path","required":true,"schema":{"type":"string","title":"Assignment Id"}},{"name":"course_id","in":"query","required":true,"schema":{"type":"string","description":"课程ID","title":"Course Id"},"description":"课程ID"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"页码","default":1,"title":"Page"},"description":"页码"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"每页大小","default":20,"title":"Page Size"},"description":"每页大小"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response Get Assignment Submissions Api V1 Assignments Teacher  Assignment Id  Submissions Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/assignments/file-manager/sync":{"post":{"tags":["Assignment Management"],"summary":"Sync With File Manager","description":"与文件管理系统同步\n\n用于将作业数据与外部文件管理系统同步。","operationId":"sync_with_file_manager_api_v1_assignments_file_manager_sync_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_sync_with_file_manager_api_v1_assignments_file_manager_sync_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileManagerSyncResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/assignments/file-manager/status":{"get":{"tags":["Assignment Management"],"summary":"Get Sync Status","description":"查询同步状态\n\n返回与文件管理系统的同步状态。","operationId":"get_sync_status_api_v1_assignments_file_manager_status_get","parameters":[{"name":"assignment_id","in":"query","required":true,"schema":{"type":"string","description":"作业ID","title":"Assignment Id"},"description":"作业ID"},{"name":"sync_id","in":"query","required":false,"schema":{"type":"string","description":"同步ID","title":"Sync Id"},"description":"同步ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Sync Status Api V1 Assignments File Manager Status Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/qa/ask":{"post":{"tags":["Q&A Triage"],"summary":"Ask Question","description":"Submit a question for AI-powered answering.\n\n- Automatically categorizes the question by complexity\n- Provides AI-generated answers for common questions\n- Escalates complex questions to teachers when needed","operationId":"ask_question_api_v1_qa_ask_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuestionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuestionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/qa/ask-stream":{"post":{"tags":["Q&A Triage"],"summary":"Ask Question Stream","description":"流式回答问题 - 使用 Server-Sent Events (SSE) 逐步返回答案\n\n前端可以实时显示 AI 正在生成的内容，提升用户体验","operationId":"ask_question_stream_api_v1_qa_ask_stream_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuestionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/qa/escalate":{"post":{"tags":["Q&A Triage"],"summary":"Escalate Question","description":"Escalate a question to a teacher.\n\nUse this when the AI answer is insufficient or the student\nneeds more detailed explanation.","operationId":"escalate_question_api_v1_qa_escalate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EscalationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuestionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/qa/analytics/{course_id}":{"get":{"tags":["Q&A Triage"],"summary":"Get Qa Analytics","description":"Get Q&A analytics report for a course.\n\n- Identifies knowledge gaps based on question patterns\n- Provides statistics on AI vs teacher resolution\n- Generates teaching recommendations","operationId":"get_qa_analytics_api_v1_qa_analytics__course_id__get","parameters":[{"name":"course_id","in":"path","required":true,"schema":{"type":"string","title":"Course Id"}},{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"description":"Number of days to analyze","default":30,"title":"Days"},"description":"Number of days to analyze"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QAAnalyticsReport"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/qa/smart-ask":{"post":{"tags":["Q&A Triage"],"summary":"Smart Ask Question","description":"智能问答接口 - 使用知识库匹配和分诊逻辑\n\n- 自动提取问题关键词\n- 匹配知识库条目\n- 根据匹配度和难度进行分诊\n- 持久化问答记录到数据库","operationId":"smart_ask_question_api_v1_qa_smart_ask_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QALogCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QALogResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/qa/stats":{"get":{"tags":["Q&A Triage"],"summary":"Get Qa Stats","description":"获取问答统计信息\n\n- 总问题数\n- 按分诊结果统计\n- 平均响应时间\n- 有帮助率","operationId":"get_qa_stats_api_v1_qa_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QALogStats"}}}}}}},"/api/v1/qa/history/{student_id}":{"get":{"tags":["Q&A Triage"],"summary":"Get Student History","description":"获取学生的问答历史\n\n- 按时间倒序排列\n- 支持限制返回数量","operationId":"get_student_history_api_v1_qa_history__student_id__get","parameters":[{"name":"student_id","in":"path","required":true,"schema":{"type":"string","title":"Student Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"description":"Maximum number of records","default":50,"title":"Limit"},"description":"Maximum number of records"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/QALogResponse"},"title":"Response Get Student History Api V1 Qa History  Student Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/qa/weakness/{student_id}":{"get":{"tags":["Q&A Triage"],"summary":"Get Student Weakness","description":"获取学生的知识薄弱点报告\n\n- 分析学生提问记录\n- 识别知识薄弱领域\n- 生成改进建议","operationId":"get_student_weakness_api_v1_qa_weakness__student_id__get","parameters":[{"name":"student_id","in":"path","required":true,"schema":{"type":"string","title":"Student Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/qa/questions/{question_id}":{"get":{"tags":["Q&A Triage"],"summary":"Get Question","description":"Get details of a specific question.","operationId":"get_question_api_v1_qa_questions__question_id__get","parameters":[{"name":"question_id","in":"path","required":true,"schema":{"type":"string","title":"Question Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuestionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/qa/health":{"get":{"tags":["Q&A Triage"],"summary":"Qa Health","description":"Health check for Q&A service.","operationId":"qa_health_api_v1_qa_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/students/register":{"post":{"tags":["Student Management"],"summary":"Register Student","description":"注册新学生账户。\n\n创建新的学生记录，包含学号、姓名、邮箱等基本信息。\n系统会自动检查学号和邮箱的唯一性。\n\nArgs:\n    student_in: 学生注册信息，包含：\n        - student_id: 学号（必填，唯一）\n        - name: 姓名（必填）\n        - email: 邮箱地址（必填，唯一）\n        - course_id: 课程ID（可选）\n    db: 异步数据库会话（自动注入）\n\nReturns:\n    StudentResponse: 创建成功的学生信息\n\nRaises:\n    HTTPException 400: 学号或邮箱已存在","operationId":"register_student_api_v1_students_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/students/login":{"post":{"tags":["Student Management"],"summary":"Login Student","description":"学生登录认证。\n\n通过学号验证学生身份，可选择性验证邮箱。\n登录成功返回学生完整信息。\n\nArgs:\n    login_data: 登录凭据，包含：\n        - student_id: 学号（必填）\n        - email: 邮箱地址（可选，用于二次验证）\n    db: 异步数据库会话（自动注入）\n\nReturns:\n    StudentLoginResponse: 登录结果，包含：\n        - success: 是否成功\n        - message: 结果消息\n        - student: 学生信息（成功时返回）","operationId":"login_student_api_v1_students_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentLogin"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentLoginResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/students":{"get":{"tags":["Student Management"],"summary":"List Students","description":"获取学生列表（分页）。\n\n支持按课程ID筛选，返回分页结果。\n\nArgs:\n    page: 页码（默认1，最小1）\n    page_size: 每页数量（默认20，范围1-100）\n    course_id: 课程ID筛选条件（可选）\n    db: 异步数据库会话（自动注入）\n\nReturns:\n    StudentListResponse: 分页学生列表，包含：\n        - items: 学生列表\n        - total: 总数量\n        - page: 当前页码\n        - page_size: 每页数量\n        - total_pages: 总页数","operationId":"list_students_api_v1_students_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":20,"title":"Page Size"},"description":"Items per page"},{"name":"course_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by course ID","title":"Course Id"},"description":"Filter by course ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/students/{student_id}":{"get":{"tags":["Student Management"],"summary":"Get Student","description":"根据学号获取学生信息。\n\nArgs:\n    student_id: 学号\n    db: 异步数据库会话（自动注入）\n\nReturns:\n    StudentResponse: 学生详细信息\n\nRaises:\n    HTTPException 404: 学生不存在","operationId":"get_student_api_v1_students__student_id__get","parameters":[{"name":"student_id","in":"path","required":true,"schema":{"type":"string","title":"Student Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Student Management"],"summary":"Update Student","description":"更新学生信息。\n\n仅更新请求中提供的字段，未提供的字段保持不变。\n更新邮箱时会检查唯一性。\n\nArgs:\n    student_id: 学号\n    student_in: 更新数据，可包含：\n        - name: 姓名\n        - email: 邮箱地址\n        - course_id: 课程ID\n    db: 异步数据库会话（自动注入）\n\nReturns:\n    StudentResponse: 更新后的学生信息\n\nRaises:\n    HTTPException 404: 学生不存在\n    HTTPException 400: 邮箱已被使用","operationId":"update_student_api_v1_students__student_id__put","parameters":[{"name":"student_id","in":"path","required":true,"schema":{"type":"string","title":"Student Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Student Management"],"summary":"Delete Student","description":"删除学生账户。\n\n删除指定学号的学生及其所有关联数据。\n\nArgs:\n    student_id: 学号\n    db: 异步数据库会话（自动注入）\n\nReturns:\n    APIResponse: 操作结果，包含：\n        - success: 是否成功\n        - message: 结果消息\n\nRaises:\n    HTTPException 404: 学生不存在","operationId":"delete_student_api_v1_students__student_id__delete","parameters":[{"name":"student_id","in":"path","required":true,"schema":{"type":"string","title":"Student Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/submissions":{"post":{"tags":["Submission Management"],"summary":"Create Submission","description":"提交作业。\n\n创建新的作业提交记录，验证学生和作业是否存在，\n如未提供 submission_id 则自动生成。\n\nArgs:\n    submission_in: 提交信息，包含学生ID、作业ID、提交内容等\n    db: 数据库会话依赖\n\nReturns:\n    SubmissionResponse: 创建的提交记录\n\nRaises:\n    HTTPException 404: 学生或作业不存在\n    HTTPException 400: 提交ID已存在","operationId":"create_submission_api_v1_submissions_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubmissionCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubmissionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/submissions/{submission_id}":{"get":{"tags":["Submission Management"],"summary":"Get Submission","description":"获取提交详情。\n\n根据提交ID获取提交详细信息，包含关联的学生和作业信息。\n\nArgs:\n    submission_id: 提交的唯一标识符\n    db: 数据库会话依赖\n\nReturns:\n    SubmissionDetailResponse: 包含学生和作业信息的提交详情\n\nRaises:\n    HTTPException 404: 提交记录不存在","operationId":"get_submission_api_v1_submissions__submission_id__get","parameters":[{"name":"submission_id","in":"path","required":true,"schema":{"type":"string","title":"Submission Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubmissionDetailResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/submissions/student/{student_id}":{"get":{"tags":["Submission Management"],"summary":"Get Student Submissions","description":"获取学生的所有提交记录。\n\n根据学生外部ID查询该学生的所有作业提交，支持分页。\n\nArgs:\n    student_id: 学生的外部唯一标识符\n    page: 页码，从1开始\n    page_size: 每页记录数，范围1-100\n    db: 数据库会话依赖\n\nReturns:\n    SubmissionListResponse: 分页的提交记录列表\n\nRaises:\n    HTTPException 404: 学生不存在","operationId":"get_student_submissions_api_v1_submissions_student__student_id__get","parameters":[{"name":"student_id","in":"path","required":true,"schema":{"type":"string","title":"Student Id"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":20,"title":"Page Size"},"description":"Items per page"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubmissionListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/submissions/assignment/{assignment_id}":{"get":{"tags":["Submission Management"],"summary":"Get Assignment Submissions","description":"获取作业的所有提交记录。\n\n根据作业外部ID查询该作业的所有学生提交，支持分页。\n\nArgs:\n    assignment_id: 作业的外部唯一标识符\n    page: 页码，从1开始\n    page_size: 每页记录数，范围1-100\n    db: 数据库会话依赖\n\nReturns:\n    SubmissionListResponse: 分页的提交记录列表\n\nRaises:\n    HTTPException 404: 作业不存在","operationId":"get_assignment_submissions_api_v1_submissions_assignment__assignment_id__get","parameters":[{"name":"assignment_id","in":"path","required":true,"schema":{"type":"string","title":"Assignment Id"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":20,"title":"Page Size"},"description":"Items per page"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubmissionListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/submissions/{submission_id}/status":{"put":{"tags":["Submission Management"],"summary":"Update Submission Status","description":"更新提交状态。\n\n更新指定提交记录的状态，可选状态包括：待批改、已批改、已标记。\n\nArgs:\n    submission_id: 提交的唯一标识符\n    status_update: 状态更新信息，包含新状态值\n    db: 数据库会话依赖\n\nReturns:\n    SubmissionResponse: 更新后的提交记录\n\nRaises:\n    HTTPException 400: 无效的状态值\n    HTTPException 404: 提交记录不存在","operationId":"update_submission_status_api_v1_submissions__submission_id__status_put","parameters":[{"name":"submission_id","in":"path","required":true,"schema":{"type":"string","title":"Submission Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubmissionStatusUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubmissionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/files/upload":{"post":{"tags":["File Management"],"summary":"Upload Code File","description":"Upload a code file for parsing and analysis.\n\n- Validates file type (only code files allowed)\n- Validates file size (max 10MB)\n- Sanitizes filename to prevent security issues\n- Stores file with unique name\n- Creates metadata record in database\n- Triggers file parsing","operationId":"upload_code_file_api_v1_files_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_code_file_api_v1_files_upload_post"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileUploadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/files":{"get":{"tags":["File Management"],"summary":"List Files","description":"List uploaded files with pagination and filtering.\n\n- Supports filtering by uploader, assignment, and language\n- Returns paginated results","operationId":"list_files_api_v1_files_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":20,"title":"Page Size"},"description":"Items per page"},{"name":"uploader_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by uploader ID","title":"Uploader Id"},"description":"Filter by uploader ID"},{"name":"assignment_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by assignment ID","title":"Assignment Id"},"description":"Filter by assignment ID"},{"name":"language","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by programming language","title":"Language"},"description":"Filter by programming language"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/files/{file_id}":{"get":{"tags":["File Management"],"summary":"Get File Metadata","description":"Get file metadata by file ID.\n\n- Returns file metadata if found\n- Returns 404 if file not found","operationId":"get_file_metadata_api_v1_files__file_id__get","parameters":[{"name":"file_id","in":"path","required":true,"schema":{"type":"string","title":"File Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileMetadataResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["File Management"],"summary":"Delete File","description":"Delete a file and its metadata.\n\n- Removes file from disk\n- Removes metadata from database","operationId":"delete_file_api_v1_files__file_id__delete","parameters":[{"name":"file_id","in":"path","required":true,"schema":{"type":"string","title":"File Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/files/{file_id}/content":{"get":{"tags":["File Management"],"summary":"Get File Content","description":"Get file content by file ID.\n\n- Returns file content as text\n- Returns 404 if file not found","operationId":"get_file_content_api_v1_files__file_id__content_get","parameters":[{"name":"file_id","in":"path","required":true,"schema":{"type":"string","title":"File Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileContentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/files/{file_id}/parse":{"get":{"tags":["File Management"],"summary":"Parse File","description":"Parse a file and extract code structure.\n\n- Extracts imports, functions, classes\n- Calculates basic metrics\n- Validates syntax","operationId":"parse_file_api_v1_files__file_id__parse_get","parameters":[{"name":"file_id","in":"path","required":true,"schema":{"type":"string","title":"File Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileParseResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/analyze":{"post":{"tags":["analysis"],"summary":"Analyze Code","description":"Analyze code for quality issues.\n\nPerforms comprehensive analysis including:\n- Complexity metrics (cyclomatic, cognitive)\n- Naming convention checks\n- Security vulnerability detection\n- Style issues\n- Code structure analysis","operationId":"analyze_code_api_v1_analysis_analyze_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisResultResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/analyze/file/{file_id}":{"post":{"tags":["analysis"],"summary":"Analyze File","description":"Analyze an uploaded file by its ID.","operationId":"analyze_file_api_v1_analysis_analyze_file__file_id__post","parameters":[{"name":"file_id","in":"path","required":true,"schema":{"type":"string","title":"File Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisResultResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/analyze/batch":{"post":{"tags":["analysis"],"summary":"Analyze Batch","description":"Analyze multiple files in batch.","operationId":"analyze_batch_api_v1_analysis_analyze_batch_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchAnalysisRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/schemas__analysis_rules__BatchAnalysisResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/rules":{"get":{"tags":["analysis"],"summary":"Get Analysis Rules","description":"Get all available analysis rules.","operationId":"get_analysis_rules_api_v1_analysis_rules_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/AnalysisRule"},"type":"array","title":"Response Get Analysis Rules Api V1 Analysis Rules Get"}}}}}}},"/api/v1/analysis/rules/{rule_id}":{"get":{"tags":["analysis"],"summary":"Get Rule","description":"Get a specific analysis rule by ID.","operationId":"get_rule_api_v1_analysis_rules__rule_id__get","parameters":[{"name":"rule_id","in":"path","required":true,"schema":{"type":"string","title":"Rule Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisRule"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/results/{file_id}":{"get":{"tags":["analysis"],"summary":"Get Analysis Result","description":"Get the stored analysis result for a file.","operationId":"get_analysis_result_api_v1_analysis_results__file_id__get","parameters":[{"name":"file_id","in":"path","required":true,"schema":{"type":"string","title":"File Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisResultResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/summary":{"get":{"tags":["analysis"],"summary":"Get Analysis Summary","description":"Get a summary of recent analysis results.","operationId":"get_analysis_summary_api_v1_analysis_summary_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/quality":{"post":{"tags":["analysis"],"summary":"Analyze Code Quality","description":"Perform advanced code quality analysis.\n\nAnalyzes code for:\n- Cyclomatic complexity (using radon)\n- Cognitive complexity\n- Code duplication detection\n- Maintainability index\n- Function-level metrics\n\nReturns detailed metrics and recommendations for improvement.","operationId":"analyze_code_quality_api_v1_analysis_quality_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisCodeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CodeQualityResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/lint":{"post":{"tags":["analysis"],"summary":"Lint Code","description":"Perform linting analysis using Pylint.\n\nChecks code for:\n- Convention violations (PEP 8)\n- Refactoring suggestions\n- Warnings and errors\n- Code style issues\n\nReturns issues with Chinese explanations and fix suggestions.","operationId":"lint_code_api_v1_analysis_lint_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LintRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LintResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/security":{"post":{"tags":["analysis"],"summary":"Analyze Security","description":"Perform security vulnerability analysis.\n\nUses Bandit to detect:\n- Hardcoded passwords and secrets\n- SQL injection vulnerabilities\n- Command injection risks\n- Insecure function usage\n- Cryptographic issues\n\nReturns issues with severity levels and remediation advice.","operationId":"analyze_security_api_v1_analysis_security_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SecurityRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SecurityResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/performance":{"post":{"tags":["analysis"],"summary":"Analyze Performance","description":"Perform performance and best practices analysis.\n\nDetects:\n- Inefficient algorithms (O(n²) patterns)\n- Memory issues (large file reads, memory leaks)\n- Blocking operations\n- Best practice violations\n\nReturns issues with performance impact and optimization suggestions.","operationId":"analyze_performance_api_v1_analysis_performance_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PerformanceRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PerformanceResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/comprehensive":{"post":{"tags":["analysis"],"summary":"Analyze Comprehensive","description":"Perform comprehensive code analysis.\n\nCombines all analysis types:\n- Code quality (complexity, maintainability)\n- Linting (style, conventions)\n- Security (vulnerabilities)\n- Performance (anti-patterns, best practices)\n\nReturns a unified report with overall score and recommendations.","operationId":"analyze_comprehensive_api_v1_analysis_comprehensive_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComprehensiveRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComprehensiveAnalysisResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/report/analyze":{"post":{"tags":["analysis"],"summary":"Analyze Project Report","description":"分析项目报告（基于纯文本内容）\n\n对项目报告进行全面分析，包括：\n- 结构解析：识别摘要、引言、方法、结果、结论等章节\n- 质量评估：字数统计、章节完整性、图表使用情况\n- 逻辑分析：论证结构、段落连贯性、逻辑问题检测\n- 创新性分析：识别创新点、与现有报告的差异\n- 语言质量：句子长度、学术风格、可读性\n- 格式检查：标题一致性、参考文献格式\n- 改进建议：基于分析结果生成具体建议\n\nArgs:\n    request: 包含报告文件名、类型和纯文本内容的请求\n\nReturns:\n    ReportAnalysisResponse: 完整的分析结果，包含各维度评分和建议","operationId":"analyze_project_report_api_v1_analysis_report_analyze_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportAnalysisRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportAnalysisResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/report/file-types":{"get":{"tags":["analysis"],"summary":"Get Supported File Types","description":"获取支持的报告文件类型\n\nReturns:\n    支持的文件类型列表","operationId":"get_supported_file_types_api_v1_analysis_report_file_types_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/analysis/report/batch-analyze":{"post":{"tags":["analysis"],"summary":"Batch Analyze Reports","description":"批量分析多个项目报告\n\n对多个报告进行并行分析，适用于教师批量评阅场景。\n\nArgs:\n    requests: 报告分析请求列表\n\nReturns:\n    批量分析结果列表","operationId":"batch_analyze_reports_api_v1_analysis_report_batch_analyze_post","requestBody":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ReportAnalysisRequest"},"type":"array","title":"Requests"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/report-analysis/analyze":{"post":{"tags":["Report Analysis"],"summary":"Analyze Project Report","description":"分析项目报告并返回综合分析结果。\n\n使用 DeepSeek AI 对项目报告进行多维度智能分析，包括逻辑结构、\n创新性、语言质量等方面的评估，并生成个性化改进建议。\n\n当前端已完成文档解析（或直接提供纯文本）时，调用此端点进行分析。\n支持的分析维度：逻辑分析、创新性评估、改进建议、语言质量评分。\n\nArgs:\n    request: 报告分析请求对象\n        - file_name: 文件名称（用于识别和记录）\n        - file_type: 文件类型（PDF/DOCX/MARKDOWN/TEXT）\n        - content: 报告文本内容\n        - reference_style_preference: 可选的参考文献格式偏好\n\nReturns:\n    ReportAnalysisResponse: 综合分析结果\n        - overall_score: 总体评分（0-100）\n        - logic_analysis: 逻辑结构分析结果\n        - innovation_analysis: 创新性评估结果\n        - improvement_suggestions: 个性化改进建议列表\n        - language_quality: 语言质量评估结果\n\nRaises:\n    HTTPException(500): 分析过程中发生内部错误","operationId":"analyze_project_report_api_v1_report_analysis_analyze_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportAnalysisRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportAnalysisResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/report-analysis/analyze-file":{"post":{"tags":["Report Analysis"],"summary":"Analyze Uploaded Report","description":"上传并分析项目报告文件。\n\n支持 PDF、DOCX 和 Markdown 格式的文件上传。系统会自动解析文件内容，\n提取文本后使用与文本端点相同的 AI 分析管道进行智能分析。\n\n文件处理流程：\n1. 验证文件类型（仅允许 .pdf/.docx/.md/.markdown）\n2. 临时保存上传文件\n3. 根据文件类型调用相应解析器提取文本\n4. 执行多维度 AI 智能分析\n5. 清理临时文件并返回结果\n\nArgs:\n    file: 上传的报告文件\n        - 支持格式：PDF、DOCX、Markdown (.md/.markdown)\n        - 大小限制：由服务器配置决定\n    reference_style_preference: 可选的参考文献格式偏好\n        - 用于检查报告中引用格式的一致性\n\nReturns:\n    ReportAnalysisResponse: 综合分析结果\n        - overall_score: 总体评分（0-100）\n        - logic_analysis: 逻辑结构分析结果\n        - innovation_analysis: 创新性评估结果\n        - improvement_suggestions: 个性化改进建议列表\n        - language_quality: 语言质量评估结果\n\nRaises:\n    HTTPException(400): 不支持的文件类型或文件内容为空\n    HTTPException(500): 文件解析失败或分析过程发生错误","operationId":"analyze_uploaded_report_api_v1_report_analysis_analyze_file_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_analyze_uploaded_report_api_v1_report_analysis_analyze_file_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportAnalysisResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/generate-feedback":{"post":{"tags":["AI"],"summary":"Generate Feedback","description":"Generate AI-powered feedback for code.\n\nThis endpoint analyzes the provided code and generates personalized,\nconstructive feedback based on:\n- Code analysis results (complexity, style, security)\n- Assignment requirements (if provided)\n- Student's historical performance (if student_id provided)\n- Selected feedback tone\n\nArgs:\n    request: GenerateFeedbackRequest with code and options\n\nReturns:\n    FeedbackResponse with comprehensive feedback","operationId":"generate_feedback_api_v1_ai_generate_feedback_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateFeedbackRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeedbackResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/explain-code":{"post":{"tags":["AI"],"summary":"Explain Code","description":"Explain code to a student.\n\nProvides a clear explanation of what the code does, key concepts used,\nand learning resources. The explanation is tailored to the student's level.\n\nArgs:\n    request: ExplainCodeRequest with code and options\n\nReturns:\n    ExplainCodeResponse with explanation and concepts","operationId":"explain_code_api_v1_ai_explain_code_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExplainCodeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExplainCodeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/suggest-improvements":{"post":{"tags":["AI"],"summary":"Suggest Improvements","description":"Suggest improvements for code.\n\nAnalyzes the code and provides actionable suggestions for improvement,\noptionally including refactored code examples.\n\nArgs:\n    request: SuggestImprovementsRequest with code and options\n\nReturns:\n    SuggestImprovementsResponse with suggestions","operationId":"suggest_improvements_api_v1_ai_suggest_improvements_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuggestImprovementsRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuggestImprovementsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/answer-question":{"post":{"tags":["AI"],"summary":"Answer Question","description":"Answer a student's question about code or programming.\n\nProvides educational answers with related concepts and follow-up questions\nto encourage further learning.\n\nArgs:\n    request: AnswerQuestionRequest with question and optional code context\n\nReturns:\n    AnswerQuestionResponse with answer and related information","operationId":"answer_question_api_v1_ai_answer_question_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnswerQuestionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnswerQuestionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/config":{"get":{"tags":["AI"],"summary":"Get Ai Config","description":"Get current AI configuration.\n\nReturns information about the configured AI provider, model, and settings.","operationId":"get_ai_config_api_v1_ai_config_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AIConfigResponse"}}}}}}},"/api/v1/ai/stats":{"get":{"tags":["AI"],"summary":"Get Ai Stats","description":"Get AI service statistics.\n\nReturns statistics about AI interactions including total count,\naverage latency, and breakdown by interaction type.","operationId":"get_ai_stats_api_v1_ai_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/ai/health":{"get":{"tags":["AI"],"summary":"Ai Health Check","description":"Check AI service health.\n\nVerifies that the AI service is properly configured and operational.","operationId":"ai_health_check_api_v1_ai_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/feedback-templates":{"post":{"tags":["Feedback Templates"],"summary":"Create Template","description":"Create a new feedback template.\n\nArgs:\n    template: FeedbackTemplateCreate with template data\n\nReturns:\n    Created FeedbackTemplateResponse","operationId":"create_template_api_v1_feedback_templates_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeedbackTemplateCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeedbackTemplateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Feedback Templates"],"summary":"List Templates","description":"List feedback templates with filtering and pagination.\n\nArgs:\n    category: Optional category filter\n    language: Optional language filter\n    tone: Optional tone filter\n    locale: Optional locale filter\n    search: Optional search term (searches name, title, message, tags)\n    is_active: Optional active status filter\n    page: Page number (1-based)\n    page_size: Number of items per page\n    sort_by: Field to sort by\n    sort_order: Sort order (asc/desc)\n\nReturns:\n    FeedbackTemplateListResponse with templates and pagination info","operationId":"list_templates_api_v1_feedback_templates_get","parameters":[{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by category","title":"Category"},"description":"Filter by category"},{"name":"language","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by language","title":"Language"},"description":"Filter by language"},{"name":"tone","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by tone","title":"Tone"},"description":"Filter by tone"},{"name":"locale","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by locale","title":"Locale"},"description":"Filter by locale"},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Search in name, title, message, and tags","title":"Search"},"description":"Search in name, title, message, and tags"},{"name":"is_active","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter by active status","title":"Is Active"},"description":"Filter by active status"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":20,"title":"Page Size"},"description":"Items per page"},{"name":"sort_by","in":"query","required":false,"schema":{"type":"string","description":"Sort field: name, usage_count, created_at","default":"name","title":"Sort By"},"description":"Sort field: name, usage_count, created_at"},{"name":"sort_order","in":"query","required":false,"schema":{"type":"string","description":"Sort order: asc, desc","default":"asc","title":"Sort Order"},"description":"Sort order: asc, desc"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeedbackTemplateListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/feedback-templates/search":{"post":{"tags":["Feedback Templates"],"summary":"Search Templates","description":"Advanced search for feedback templates.\n\nSupports multiple filters, tag matching, and flexible sorting.","operationId":"search_templates_api_v1_feedback_templates_search_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemplateSearchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeedbackTemplateListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/feedback-templates/{template_id}":{"get":{"tags":["Feedback Templates"],"summary":"Get Template","description":"Get a specific feedback template by ID.\n\nArgs:\n    template_id: Template ID\n\nReturns:\n    FeedbackTemplateResponse","operationId":"get_template_api_v1_feedback_templates__template_id__get","parameters":[{"name":"template_id","in":"path","required":true,"schema":{"type":"integer","title":"Template Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeedbackTemplateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Feedback Templates"],"summary":"Update Template","description":"Update a feedback template.\n\nArgs:\n    template_id: Template ID\n    update_data: FeedbackTemplateUpdate with fields to update\n\nReturns:\n    Updated FeedbackTemplateResponse","operationId":"update_template_api_v1_feedback_templates__template_id__put","parameters":[{"name":"template_id","in":"path","required":true,"schema":{"type":"integer","title":"Template Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeedbackTemplateUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeedbackTemplateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Feedback Templates"],"summary":"Delete Template","description":"Delete a feedback template.\n\nArgs:\n    template_id: Template ID","operationId":"delete_template_api_v1_feedback_templates__template_id__delete","parameters":[{"name":"template_id","in":"path","required":true,"schema":{"type":"integer","title":"Template Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/feedback-templates/categories/list":{"get":{"tags":["Feedback Templates"],"summary":"List Categories","description":"List all available template categories.\n\nReturns:\n    List of category names and descriptions","operationId":"list_categories_api_v1_feedback_templates_categories_list_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/feedback-templates/tones/list":{"get":{"tags":["Feedback Templates"],"summary":"List Tones","description":"List all available template tones.\n\nReturns:\n    List of tone names and descriptions","operationId":"list_tones_api_v1_feedback_templates_tones_list_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/feedback-templates/stats/summary":{"get":{"tags":["Feedback Templates"],"summary":"Get Template Stats","description":"Get summary statistics for feedback templates.\n\nReturns:\n    Template statistics including counts by category, language, tone","operationId":"get_template_stats_api_v1_feedback_templates_stats_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/feedback-templates/{template_id}/increment-usage":{"post":{"tags":["Feedback Templates"],"summary":"Increment Usage","description":"Increment the usage count for a template.\n\nArgs:\n    template_id: Template ID\n\nReturns:\n    Updated usage count","operationId":"increment_usage_api_v1_feedback_templates__template_id__increment_usage_post","parameters":[{"name":"template_id","in":"path","required":true,"schema":{"type":"integer","title":"Template Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/feedback/personalized":{"post":{"tags":["Personalized Feedback"],"summary":"Generate Personalized Feedback","description":"Generate personalized feedback based on student history.\n\nThis endpoint analyzes the student's historical submissions to provide:\n- Trend analysis (improving, declining, stable, fluctuating)\n- Level-appropriate feedback (beginner, intermediate, advanced)\n- Progressive improvement suggestions with difficulty levels\n- Personalized encouragement based on performance\n\nArgs:\n    request: PersonalizedFeedbackRequest with code and student_id\n\nReturns:\n    PersonalizedFeedbackResponse with comprehensive personalized feedback","operationId":"generate_personalized_feedback_api_v1_feedback_personalized_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PersonalizedFeedbackRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PersonalizedFeedbackResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/feedback/student-history/{student_id}":{"get":{"tags":["Personalized Feedback"],"summary":"Get Student History","description":"Get student's historical performance analysis.\n\nThis endpoint provides:\n- Total submissions count\n- Average score\n- Performance trend\n- Skill level estimation\n- Identified strengths and weaknesses\n- Recurring issues\n\nArgs:\n    student_id: Student ID\n\nReturns:\n    StudentHistoryAnalysis with comprehensive history data","operationId":"get_student_history_api_v1_feedback_student_history__student_id__get","parameters":[{"name":"student_id","in":"path","required":true,"schema":{"type":"string","title":"Student Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentHistoryAnalysis"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/feedback/detail-levels":{"get":{"tags":["Personalized Feedback"],"summary":"List Detail Levels","description":"List available feedback detail levels.\n\nReturns:\n    List of detail levels with descriptions","operationId":"list_detail_levels_api_v1_feedback_detail_levels_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/feedback/tones":{"get":{"tags":["Personalized Feedback"],"summary":"List Feedback Tones","description":"List available feedback tones.\n\nReturns:\n    List of tones with descriptions","operationId":"list_feedback_tones_api_v1_feedback_tones_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/evaluation/multi-dimensional":{"post":{"tags":["Multi-Dimensional Evaluation"],"summary":"Evaluate Multi Dimensional","description":"Perform multi-dimensional code evaluation.\n\nEvaluates code across six dimensions:\n- Technical Ability (技术能力)\n- Code Quality (代码质量)\n- Innovation (创新性)\n- Best Practices (最佳实践)\n- Efficiency (效率)\n- Documentation (文档)\n\nArgs:\n    request: MultiDimensionalEvaluationRequest with code and student_id\n\nReturns:\n    MultiDimensionalEvaluationResponse with comprehensive evaluation report","operationId":"evaluate_multi_dimensional_api_v1_evaluation_multi_dimensional_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MultiDimensionalEvaluationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MultiDimensionalEvaluationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/evaluation/dimensions":{"get":{"tags":["Multi-Dimensional Evaluation"],"summary":"List Evaluation Dimensions","description":"List all evaluation dimensions with metadata.\n\nReturns:\n    List of dimensions with names, descriptions, and weights","operationId":"list_evaluation_dimensions_api_v1_evaluation_dimensions_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/evaluation/radar-chart/{student_id}":{"get":{"tags":["Multi-Dimensional Evaluation"],"summary":"Get Radar Chart Data","description":"Get radar chart data for a student's evaluation.\n\nThis endpoint retrieves the most recent evaluation for a student\nand formats it for radar chart visualization.\n\nArgs:\n    student_id: Student ID\n    assignment_id: Optional assignment filter\n    include_class_average: Whether to include class average\n    class_id: Class ID for comparison\n\nReturns:\n    RadarChartData for visualization","operationId":"get_radar_chart_data_api_v1_evaluation_radar_chart__student_id__get","parameters":[{"name":"student_id","in":"path","required":true,"schema":{"type":"string","title":"Student Id"}},{"name":"assignment_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by assignment","title":"Assignment Id"},"description":"Filter by assignment"},{"name":"include_class_average","in":"query","required":false,"schema":{"type":"boolean","description":"Include class average","default":false,"title":"Include Class Average"},"description":"Include class average"},{"name":"class_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Class ID for comparison","title":"Class Id"},"description":"Class ID for comparison"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/evaluation/class-comparison/{student_id}":{"get":{"tags":["Multi-Dimensional Evaluation"],"summary":"Get Class Comparison","description":"Get class comparison statistics for a student.\n\nCompares the student's performance with class statistics including:\n- Class average, median, max, min\n- Student's percentile rank\n- Per-dimension comparison\n\nArgs:\n    student_id: Student ID\n    class_id: Class ID\n\nReturns:\n    ClassComparison with statistics","operationId":"get_class_comparison_api_v1_evaluation_class_comparison__student_id__get","parameters":[{"name":"student_id","in":"path","required":true,"schema":{"type":"string","title":"Student Id"}},{"name":"class_id","in":"query","required":true,"schema":{"type":"string","description":"Class ID","title":"Class Id"},"description":"Class ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge-base":{"post":{"tags":["Knowledge Base"],"summary":"Create Entry","description":"创建新的知识库条目。\n\n在知识库中创建一个新的问答条目，用于存储常见问题及其解答。\n\nArgs:\n    data: 知识库条目创建数据，包含问题、答案、分类等信息\n    db: 数据库会话依赖\n\nReturns:\n    KnowledgeBaseResponse: 创建成功的知识库条目信息\n\nRaises:\n    HTTPException: 500 - 创建条目时发生内部错误","operationId":"create_entry_api_v1_knowledge_base_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeBaseCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeBaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Knowledge Base"],"summary":"List Entries","description":"获取知识库条目列表。\n\n分页获取知识库中的条目列表，支持按分类和语言过滤。\n\nArgs:\n    page: 页码，从1开始\n    page_size: 每页显示的条目数量，范围1-100\n    category: 可选的分类过滤条件\n    language: 可选的语言过滤条件\n    db: 数据库会话依赖\n\nReturns:\n    KnowledgeBaseListResponse: 包含条目列表和分页信息","operationId":"list_entries_api_v1_knowledge_base_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"页码","default":1,"title":"Page"},"description":"页码"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"每页数量","default":20,"title":"Page Size"},"description":"每页数量"},{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"分类过滤","title":"Category"},"description":"分类过滤"},{"name":"language","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"语言过滤","title":"Language"},"description":"语言过滤"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeBaseListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge-base/{entry_id}":{"get":{"tags":["Knowledge Base"],"summary":"Get Entry","description":"获取指定的知识库条目。\n\n根据条目ID获取知识库中的特定条目详情，同时增加浏览计数。\n\nArgs:\n    entry_id: 知识库条目的唯一标识符\n    db: 数据库会话依赖\n\nReturns:\n    KnowledgeBaseResponse: 知识库条目的完整信息\n\nRaises:\n    HTTPException: 404 - 指定的条目不存在","operationId":"get_entry_api_v1_knowledge_base__entry_id__get","parameters":[{"name":"entry_id","in":"path","required":true,"schema":{"type":"string","title":"Entry Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeBaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Knowledge Base"],"summary":"Update Entry","description":"更新知识库条目。\n\n根据条目ID更新知识库条目的内容，支持部分更新。\n\nArgs:\n    entry_id: 要更新的知识库条目ID\n    data: 更新数据，包含需要修改的字段\n    db: 数据库会话依赖\n\nReturns:\n    KnowledgeBaseResponse: 更新后的知识库条目信息\n\nRaises:\n    HTTPException: 404 - 指定的条目不存在","operationId":"update_entry_api_v1_knowledge_base__entry_id__put","parameters":[{"name":"entry_id","in":"path","required":true,"schema":{"type":"string","title":"Entry Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeBaseUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeBaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Knowledge Base"],"summary":"Delete Entry","description":"删除知识库条目（软删除）。\n\n将指定的知识库条目标记为已删除状态，不会物理删除数据。\n\nArgs:\n    entry_id: 要删除的知识库条目ID\n    db: 数据库会话依赖\n\nReturns:\n    dict: 包含删除成功消息和条目ID\n\nRaises:\n    HTTPException: 404 - 指定的条目不存在","operationId":"delete_entry_api_v1_knowledge_base__entry_id__delete","parameters":[{"name":"entry_id","in":"path","required":true,"schema":{"type":"string","title":"Entry Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge-base/search":{"post":{"tags":["Knowledge Base"],"summary":"Search Entries","description":"搜索知识库条目。\n\n基于关键词、分类、难度等条件搜索知识库中的条目，\n支持全文搜索和多条件组合查询。\n\nArgs:\n    request: 搜索请求参数，包含查询关键词、过滤条件等\n    db: 数据库会话依赖\n\nReturns:\n    KnowledgeBaseSearchResponse: 搜索结果，包含匹配的条目列表和总数","operationId":"search_entries_api_v1_knowledge_base_search_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeBaseSearchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeBaseSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge-base/categories/list":{"get":{"tags":["Knowledge Base"],"summary":"Get Categories","description":"获取所有分类信息。\n\n返回知识库中所有可用的分类，包括每个分类的名称、\n描述和该分类下的条目数量统计。\n\nArgs:\n    db: 数据库会话依赖\n\nReturns:\n    CategoriesResponse: 分类列表，包含各分类的详细信息和统计","operationId":"get_categories_api_v1_knowledge_base_categories_list_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoriesResponse"}}}}}}},"/api/v1/knowledge-base/bulk":{"post":{"tags":["Knowledge Base"],"summary":"Bulk Create Entries","description":"批量创建知识库条目。\n\n一次性创建多个知识库条目，适用于初始化数据导入\n或批量添加相关知识点的场景。\n\nArgs:\n    data: 批量创建数据，包含多个条目的创建信息\n    db: 数据库会话依赖\n\nReturns:\n    List[KnowledgeBaseResponse]: 创建成功的条目列表\n\nRaises:\n    HTTPException: 500 - 批量创建过程中发生错误","operationId":"bulk_create_entries_api_v1_knowledge_base_bulk_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeBaseBulkCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/KnowledgeBaseResponse"},"type":"array","title":"Response Bulk Create Entries Api V1 Knowledge Base Bulk Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge-base/{entry_id}/helpful":{"post":{"tags":["Knowledge Base"],"summary":"Mark Helpful","description":"标记条目为有帮助。\n\n用户反馈机制，将指定条目标记为有帮助，\n用于统计条目的实用性和优化推荐算法。\n\nArgs:\n    entry_id: 知识库条目的唯一标识符\n    db: 数据库会话依赖\n\nReturns:\n    dict: 操作结果消息，包含 message 和 entry_id\n\nRaises:\n    HTTPException: 404 - 指定的条目不存在","operationId":"mark_helpful_api_v1_knowledge_base__entry_id__helpful_post","parameters":[{"name":"entry_id","in":"path","required":true,"schema":{"type":"string","title":"Entry Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge-base/stats/overview":{"get":{"tags":["Knowledge Base"],"summary":"Get Stats","description":"获取知识库统计信息。\n\n返回知识库的整体统计数据，包括总条目数、\n各分类条目数、活跃条目数等汇总信息。\n\nArgs:\n    db: 数据库会话依赖\n\nReturns:\n    KnowledgeBaseStats: 统计信息，包含各维度的数据汇总","operationId":"get_stats_api_v1_knowledge_base_stats_overview_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeBaseStats"}}}}}}},"/api/v1/triage/ask":{"post":{"tags":["分诊管理"],"summary":"Ask Question","description":"提交问题并获取分诊结果。\n\n系统会自动：\n1. 提取问题关键词\n2. 检测问题分类和难度\n3. 在知识库中查找匹配答案\n4. 根据匹配度和难度决定分诊路由","operationId":"ask_question_api_v1_triage_ask_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TriageRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TriageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/triage/queue":{"get":{"tags":["分诊管理"],"summary":"Get Pending Queue","description":"获取待处理问题队列。\n\n- role=assistant: 只显示转助教的问题\n- role=teacher: 显示转助教和转教师的问题\n- handler_id: 筛选分配给特定处理人的问题","operationId":"get_pending_queue_api_v1_triage_queue_get","parameters":[{"name":"role","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"处理人角色: assistant/teacher","title":"Role"},"description":"处理人角色: assistant/teacher"},{"name":"handler_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"处理人ID","title":"Handler Id"},"description":"处理人ID"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"页码","default":1,"title":"Page"},"description":"页码"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"每页数量","default":20,"title":"Page Size"},"description":"每页数量"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PendingQueueResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/triage/takeover":{"post":{"tags":["分诊管理"],"summary":"Teacher Takeover","description":"教师接管问题。\n\n教师可以主动接管任何待处理的问题。","operationId":"teacher_takeover_api_v1_triage_takeover_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TeacherTakeoverRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/triage/answer":{"post":{"tags":["分诊管理"],"summary":"Teacher Answer","description":"教师回答问题。\n\n教师可以：\n1. 直接回答问题\n2. 选择是否将问答对添加到知识库\n3. 指定新的关键词标签","operationId":"teacher_answer_api_v1_triage_answer_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TeacherAnswerRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TeacherAnswerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/triage/stats":{"get":{"tags":["分诊管理"],"summary":"Get Triage Stats","description":"获取分诊统计信息。","operationId":"get_triage_stats_api_v1_triage_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TriageStats"}}}}}}},"/api/v1/triage/difficulty-levels":{"get":{"tags":["分诊管理"],"summary":"Get Difficulty Levels","description":"获取难度级别定义。","operationId":"get_difficulty_levels_api_v1_triage_difficulty_levels_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DifficultyLevelsResponse"}}}}}}},"/api/v1/rubrics":{"post":{"tags":["Rubric Management"],"summary":"Create Rubric","description":"创建新的评分标准。\n\n- 创建一个新的评分标准记录\n- rubric_id 必须唯一\n- criteria 字段为可选的 JSON 对象，使用键值对结构\n\n**请求示例**：\n```json\n{\n    \"rubric_id\": \"RUB001\",\n    \"name\": \"Python 作业评分标准\",\n    \"description\": \"用于评估 Python 编程作业的标准\",\n    \"max_score\": 100.0,\n    \"criteria\": {\n        \"correctness\": {\n            \"weight\": 0.5,\n            \"description\": \"代码功能正确性\",\n            \"max_points\": 50\n        },\n        \"quality\": {\n            \"weight\": 0.3,\n            \"description\": \"代码质量和风格\",\n            \"max_points\": 30\n        },\n        \"documentation\": {\n            \"weight\": 0.2,\n            \"description\": \"文档和注释\",\n            \"max_points\": 20\n        }\n    }\n}\n```\n\n**响应示例**：\n```json\n{\n    \"id\": 1,\n    \"rubric_id\": \"RUB001\",\n    \"name\": \"Python 作业评分标准\",\n    \"description\": \"用于评估 Python 编程作业的标准\",\n    \"max_score\": 100.0,\n    \"criteria\": {...},\n    \"created_at\": \"2024-12-17T10:00:00Z\",\n    \"updated_at\": null\n}\n```","operationId":"create_rubric_api_v1_rubrics_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RubricCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RubricResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Rubric Management"],"summary":"List Rubrics","description":"获取评分标准列表（分页）。\n\n- 支持分页查询\n- 默认每页 20 条记录\n- 返回总数和分页信息\n\n**查询参数**：\n- `page`: 页码（默认 1）\n- `page_size`: 每页数量（默认 20，最大 100）\n\n**响应示例**：\n```json\n{\n    \"items\": [\n        {\n            \"id\": 1,\n            \"rubric_id\": \"RUB001\",\n            \"name\": \"Python 作业评分标准\",\n            \"max_score\": 100.0,\n            ...\n        }\n    ],\n    \"total\": 50,\n    \"page\": 1,\n    \"page_size\": 20,\n    \"total_pages\": 3\n}\n```","operationId":"list_rubrics_api_v1_rubrics_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"页码","default":1,"title":"Page"},"description":"页码"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"每页数量","default":20,"title":"Page Size"},"description":"每页数量"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RubricListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/rubrics/{rubric_id}":{"get":{"tags":["Rubric Management"],"summary":"Get Rubric","description":"获取单个评分标准。\n\n- 通过 rubric_id 获取评分标准详情\n- 如果不存在返回 404 错误\n\n**路径参数**：\n- `rubric_id`: 评分标准唯一标识符\n\n**响应示例**：\n```json\n{\n    \"id\": 1,\n    \"rubric_id\": \"RUB001\",\n    \"name\": \"Python 作业评分标准\",\n    \"description\": \"用于评估 Python 编程作业的标准\",\n    \"max_score\": 100.0,\n    \"criteria\": {...},\n    \"created_at\": \"2024-12-17T10:00:00Z\",\n    \"updated_at\": null\n}\n```","operationId":"get_rubric_api_v1_rubrics__rubric_id__get","parameters":[{"name":"rubric_id","in":"path","required":true,"schema":{"type":"string","title":"Rubric Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RubricResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Rubric Management"],"summary":"Update Rubric","description":"更新评分标准。\n\n- 支持部分字段更新\n- 只更新提供的字段\n- 如果不存在返回 404 错误\n\n**路径参数**：\n- `rubric_id`: 评分标准唯一标识符\n\n**请求示例**（部分更新）：\n```json\n{\n    \"name\": \"更新后的评分标准名称\",\n    \"max_score\": 120.0\n}\n```\n\n**响应示例**：\n```json\n{\n    \"id\": 1,\n    \"rubric_id\": \"RUB001\",\n    \"name\": \"更新后的评分标准名称\",\n    \"max_score\": 120.0,\n    ...\n}\n```","operationId":"update_rubric_api_v1_rubrics__rubric_id__put","parameters":[{"name":"rubric_id","in":"path","required":true,"schema":{"type":"string","title":"Rubric Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RubricUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RubricResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Rubric Management"],"summary":"Delete Rubric","description":"删除评分标准。\n\n- 删除指定的评分标准\n- 关联的 Assignment 的 rubric_id 会被设置为 NULL（数据库级联）\n- 如果不存在返回 404 错误\n\n**路径参数**：\n- `rubric_id`: 评分标准唯一标识符\n\n**响应**：\n- 成功：204 No Content\n- 失败：404 Not Found","operationId":"delete_rubric_api_v1_rubrics__rubric_id__delete","parameters":[{"name":"rubric_id","in":"path","required":true,"schema":{"type":"string","title":"Rubric Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/rubrics/{rubric_id}/assignments":{"get":{"tags":["Rubric Management"],"summary":"Get Rubric Assignments","description":"获取使用指定评分标准的所有作业。\n\n- 返回关联到此评分标准的所有作业列表\n- 支持分页\n- 如果评分标准不存在返回 404 错误\n\n**路径参数**：\n- `rubric_id`: 评分标准唯一标识符\n\n**查询参数**：\n- `skip`: 跳过的记录数（默认 0）\n- `limit`: 返回的最大记录数（默认 100）\n\n**响应示例**：\n```json\n[\n    {\n        \"id\": 1,\n        \"assignment_id\": \"HW001\",\n        \"title\": \"Python 基础作业\",\n        \"rubric_id\": 1,\n        ...\n    }\n]\n```","operationId":"get_rubric_assignments_api_v1_rubrics__rubric_id__assignments_get","parameters":[{"name":"rubric_id","in":"path","required":true,"schema":{"type":"string","title":"Rubric Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"跳过的记录数","default":0,"title":"Skip"},"description":"跳过的记录数"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"返回的最大记录数","default":100,"title":"Limit"},"description":"返回的最大记录数"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AssignmentResponse"},"title":"Response Get Rubric Assignments Api V1 Rubrics  Rubric Id  Assignments Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/grading":{"post":{"tags":["Grading Results"],"summary":"Create Grading Result","description":"创建评分结果。\n\n- 为指定的提交记录创建评分结果\n- 每个提交只能有一个评分结果\n- 自动设置评分时间（如未提供）","operationId":"create_grading_result_api_v1_grading_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GradingResultCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GradingResultResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/grading/{grading_id}":{"get":{"tags":["Grading Results"],"summary":"Get Grading Result","description":"获取单个评分结果（包含提交详情）。","operationId":"get_grading_result_api_v1_grading__grading_id__get","parameters":[{"name":"grading_id","in":"path","required":true,"schema":{"type":"integer","title":"Grading Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GradingResultWithSubmission"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Grading Results"],"summary":"Delete Grading Result","description":"删除评分结果。\n\n- 删除指定的评分结果\n- 如果不存在返回 404 错误","operationId":"delete_grading_result_api_v1_grading__grading_id__delete","parameters":[{"name":"grading_id","in":"path","required":true,"schema":{"type":"integer","title":"Grading Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/grading/submission/{submission_id}":{"get":{"tags":["Grading Results"],"summary":"Get Grading By Submission","description":"按提交记录 ID 获取评分结果。","operationId":"get_grading_by_submission_api_v1_grading_submission__submission_id__get","parameters":[{"name":"submission_id","in":"path","required":true,"schema":{"type":"integer","title":"Submission Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GradingResultResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/grading/student/{student_id}":{"get":{"tags":["Grading Results"],"summary":"Get Grading By Student","description":"按学生 ID 获取所有评分结果。\n\n- 支持分页\n- 按评分时间倒序排列","operationId":"get_grading_by_student_api_v1_grading_student__student_id__get","parameters":[{"name":"student_id","in":"path","required":true,"schema":{"type":"string","title":"Student Id"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"页码","default":1,"title":"Page"},"description":"页码"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"每页数量","default":20,"title":"Page Size"},"description":"每页数量"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GradingResultListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/grading/assignment/{assignment_id}":{"get":{"tags":["Grading Results"],"summary":"Get Grading By Assignment","description":"按作业 ID 获取所有评分结果。\n\n- 支持分页\n- 按评分时间倒序排列","operationId":"get_grading_by_assignment_api_v1_grading_assignment__assignment_id__get","parameters":[{"name":"assignment_id","in":"path","required":true,"schema":{"type":"string","title":"Assignment Id"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"页码","default":1,"title":"Page"},"description":"页码"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"每页数量","default":20,"title":"Page Size"},"description":"每页数量"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GradingResultListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/grading/assignment/{assignment_id}/statistics":{"get":{"tags":["Grading Results"],"summary":"Get Grading Statistics","description":"获取作业的评分统计信息。\n\n包括:\n- 已评分数量\n- 平均分、最高分、最低分\n- AI 评分 vs 教师评分数量\n- 分数分布","operationId":"get_grading_statistics_api_v1_grading_assignment__assignment_id__statistics_get","parameters":[{"name":"assignment_id","in":"path","required":true,"schema":{"type":"string","title":"Assignment Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GradingStatistics"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/grading/{grading_id}/override":{"put":{"tags":["Grading Results"],"summary":"Override Grading Result","description":"教师覆盖 AI 评分。\n\n- 更新评分分数\n- 将评分者改为教师\n- 记录覆盖原因（如提供）","operationId":"override_grading_result_api_v1_grading__grading_id__override_put","parameters":[{"name":"grading_id","in":"path","required":true,"schema":{"type":"integer","title":"Grading Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GradingResultOverride"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GradingResultResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AIAnswer":{"properties":{"answer":{"type":"string","title":"Answer","description":"The AI-generated answer"},"confidence":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Confidence","description":"Confidence score of the answer"},"sources":{"items":{"type":"string"},"type":"array","title":"Sources","description":"Reference sources used"},"needs_teacher_review":{"type":"boolean","title":"Needs Teacher Review","description":"Whether teacher review is recommended","default":false}},"type":"object","required":["answer","confidence"],"title":"AIAnswer","description":"AI-generated answer."},"AIConfigResponse":{"properties":{"provider":{"$ref":"#/components/schemas/AIProvider"},"model":{"type":"string","title":"Model"},"temperature":{"type":"number","title":"Temperature"},"max_tokens":{"type":"integer","title":"Max Tokens"},"available_models":{"items":{"type":"string"},"type":"array","title":"Available Models"}},"type":"object","required":["provider","model","temperature","max_tokens","available_models"],"title":"AIConfigResponse","description":"Response for AI configuration."},"AIProvider":{"type":"string","enum":["openai","anthropic","local","deepseek"],"title":"AIProvider","description":"Supported AI providers."},"APIResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"data":{"anyOf":[{},{"type":"null"}],"title":"Data"},"errors":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Errors"}},"type":"object","required":["success","message"],"title":"APIResponse","description":"Standard API response wrapper."},"AbilityAnalysisReport":{"properties":{"report_id":{"type":"string","title":"Report Id","description":"Unique report ID"},"student_id":{"type":"string","title":"Student Id","description":"Student ID"},"generated_at":{"type":"string","format":"date-time","title":"Generated At"},"overall_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Overall Score"},"overall_grade":{"type":"string","title":"Overall Grade","description":"Letter grade A-F"},"overall_summary":{"type":"string","title":"Overall Summary","description":"Overall summary"},"overall_summary_zh":{"type":"string","title":"Overall Summary Zh","description":"Summary in Chinese"},"dimension_scores":{"items":{"$ref":"#/components/schemas/DimensionScore"},"type":"array","title":"Dimension Scores"},"radar_chart":{"$ref":"#/components/schemas/RadarChartData"},"class_comparison":{"anyOf":[{"$ref":"#/components/schemas/ClassComparison"},{"type":"null"}]},"top_strengths":{"items":{"type":"string"},"type":"array","title":"Top Strengths"},"top_strengths_zh":{"items":{"type":"string"},"type":"array","title":"Top Strengths Zh"},"priority_improvements":{"items":{"type":"string"},"type":"array","title":"Priority Improvements"},"priority_improvements_zh":{"items":{"type":"string"},"type":"array","title":"Priority Improvements Zh"},"recommended_focus_areas":{"items":{"type":"string"},"type":"array","title":"Recommended Focus Areas"},"recommended_focus_areas_zh":{"items":{"type":"string"},"type":"array","title":"Recommended Focus Areas Zh"}},"type":"object","required":["report_id","student_id","overall_score","overall_grade","overall_summary","overall_summary_zh","radar_chart"],"title":"AbilityAnalysisReport","description":"Comprehensive ability analysis report."},"AnalysisCodeRequest":{"properties":{"code":{"type":"string","title":"Code","description":"Source code to analyze"},"language":{"type":"string","title":"Language","description":"Programming language","default":"python"},"filename":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Filename","description":"Optional filename for context"},"timeout":{"type":"integer","maximum":120.0,"minimum":5.0,"title":"Timeout","description":"Analysis timeout in seconds","default":30}},"type":"object","required":["code"],"title":"AnalysisCodeRequest","description":"Request for code analysis."},"AnalysisRequest":{"properties":{"code":{"type":"string","title":"Code","description":"Source code to analyze"},"language":{"type":"string","title":"Language","description":"Programming language","default":"python"},"file_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"File Id","description":"Associated file ID"},"rule_overrides":{"items":{"$ref":"#/components/schemas/RuleConfiguration"},"type":"array","title":"Rule Overrides","description":"Rule configuration overrides"},"include_suggestions":{"type":"boolean","title":"Include Suggestions","description":"Include fix suggestions","default":true}},"type":"object","required":["code"],"title":"AnalysisRequest","description":"Request to analyze code."},"AnalysisResultResponse":{"properties":{"success":{"type":"boolean","title":"Success","default":true},"result":{"$ref":"#/components/schemas/FullAnalysisResult"},"message":{"type":"string","title":"Message","default":"Analysis completed successfully"}},"type":"object","required":["result"],"title":"AnalysisResultResponse","description":"API response for analysis result."},"AnalysisResultSummary":{"properties":{"overall_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Overall Score","description":"Overall quality score"},"grade":{"type":"string","title":"Grade","description":"Letter grade (A-F)"},"category_scores":{"items":{"$ref":"#/components/schemas/CategoryScore"},"type":"array","title":"Category Scores"},"total_violations":{"type":"integer","title":"Total Violations","description":"Total violations found","default":0},"critical_violations":{"type":"integer","title":"Critical Violations","description":"Critical/error violations","default":0},"warnings":{"type":"integer","title":"Warnings","description":"Warning violations","default":0},"info_violations":{"type":"integer","title":"Info Violations","description":"Info violations","default":0}},"type":"object","required":["overall_score","grade"],"title":"AnalysisResultSummary","description":"Summary of analysis results."},"AnalysisRule":{"properties":{"rule_id":{"type":"string","title":"Rule Id","description":"Unique rule identifier"},"name":{"type":"string","title":"Name","description":"Human-readable rule name"},"description":{"type":"string","title":"Description","description":"Rule description"},"category":{"$ref":"#/components/schemas/RuleCategory","description":"Rule category"},"severity":{"$ref":"#/components/schemas/RuleSeverity","description":"Default severity","default":"warning"},"enabled":{"type":"boolean","title":"Enabled","description":"Whether rule is enabled","default":true},"languages":{"items":{"$ref":"#/components/schemas/SupportedLanguage"},"type":"array","title":"Languages","description":"Languages this rule applies to"},"thresholds":{"additionalProperties":true,"type":"object","title":"Thresholds","description":"Configurable thresholds"},"weight":{"type":"number","maximum":10.0,"minimum":0.0,"title":"Weight","description":"Weight for scoring","default":1.0}},"type":"object","required":["rule_id","name","description","category"],"title":"AnalysisRule","description":"Definition of a single analysis rule."},"AnswerQuestionRequest":{"properties":{"question":{"type":"string","title":"Question","description":"Student's question"},"code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Code","description":"Related code context"},"language":{"type":"string","title":"Language","description":"Programming language","default":"python"},"context":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Context","description":"Additional context"}},"type":"object","required":["question"],"title":"AnswerQuestionRequest","description":"Request to answer a student question about code."},"AnswerQuestionResponse":{"properties":{"success":{"type":"boolean","title":"Success","default":true},"answer":{"type":"string","title":"Answer","description":"Answer to the question"},"related_concepts":{"items":{"type":"string"},"type":"array","title":"Related Concepts"},"code_examples":{"items":{"type":"string"},"type":"array","title":"Code Examples"},"follow_up_questions":{"items":{"type":"string"},"type":"array","title":"Follow Up Questions"}},"type":"object","required":["answer"],"title":"AnswerQuestionResponse","description":"Response for answering student questions."},"AssignmentCreate":{"properties":{"title":{"type":"string","maxLength":255,"minLength":1,"title":"Title","description":"Assignment title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Assignment description"},"assignment_type":{"$ref":"#/components/schemas/AssignmentTypeEnum","description":"Type of assignment"},"course_id":{"type":"string","maxLength":50,"minLength":1,"title":"Course Id","description":"Course ID"},"due_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Due Date","description":"Assignment due date"},"max_score":{"type":"number","minimum":0.0,"title":"Max Score","description":"Maximum possible score","default":100.0},"assignment_id":{"type":"string","maxLength":50,"minLength":1,"title":"Assignment Id","description":"Unique assignment identifier"},"rubric_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Rubric Id","description":"Associated rubric ID"}},"type":"object","required":["title","assignment_type","course_id","assignment_id"],"title":"AssignmentCreate","description":"Schema for creating a new assignment."},"AssignmentListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/AssignmentResponse"},"type":"array","title":"Items","description":"List of assignments"},"total":{"type":"integer","title":"Total","description":"Total number of assignments"},"page":{"type":"integer","title":"Page","description":"Current page number"},"page_size":{"type":"integer","title":"Page Size","description":"Number of items per page"},"total_pages":{"type":"integer","title":"Total Pages","description":"Total number of pages"}},"type":"object","required":["total","page","page_size","total_pages"],"title":"AssignmentListResponse","description":"Schema for paginated assignment list response."},"AssignmentResponse":{"properties":{"title":{"type":"string","maxLength":255,"minLength":1,"title":"Title","description":"Assignment title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Assignment description"},"assignment_type":{"$ref":"#/components/schemas/AssignmentTypeEnum","description":"Type of assignment"},"course_id":{"type":"string","maxLength":50,"minLength":1,"title":"Course Id","description":"Course ID"},"due_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Due Date","description":"Assignment due date"},"max_score":{"type":"number","minimum":0.0,"title":"Max Score","description":"Maximum possible score","default":100.0},"id":{"type":"integer","title":"Id","description":"Database ID"},"assignment_id":{"type":"string","title":"Assignment Id","description":"Unique assignment identifier"},"rubric_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Rubric Id","description":"Associated rubric ID"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Record creation timestamp"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At","description":"Record update timestamp"}},"type":"object","required":["title","assignment_type","course_id","id","assignment_id","created_at"],"title":"AssignmentResponse","description":"Schema for assignment response."},"AssignmentSubmission":{"properties":{"student_id":{"type":"string","title":"Student Id","description":"Unique identifier for the student"},"assignment_id":{"type":"string","title":"Assignment Id","description":"Unique identifier for the assignment"},"assignment_type":{"$ref":"#/components/schemas/AssignmentType","description":"Type of assignment"},"content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content","description":"Text content of the assignment"},"file_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"File Name","description":"Name of uploaded file"},"language":{"$ref":"#/components/schemas/ProgrammingLanguage-Input","description":"Programming language","default":"python"},"expected_output":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Expected Output","description":"Expected output for correctness testing"},"test_cases":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Test Cases","description":"Test cases for validation"}},"type":"object","required":["student_id","assignment_id","assignment_type"],"title":"AssignmentSubmission","description":"Schema for submitting an assignment for review."},"AssignmentTransferStatus":{"type":"string","enum":["pending","in_progress","completed","failed","cancelled"],"title":"AssignmentTransferStatus","description":"作业传输状态枚举"},"AssignmentType":{"type":"string","enum":["code","essay","quiz","project"],"title":"AssignmentType","description":"Types of assignments."},"AssignmentTypeEnum":{"type":"string","enum":["code","essay","quiz","project"],"title":"AssignmentTypeEnum","description":"Types of assignments (matching database model)."},"AssignmentUpdate":{"properties":{"title":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Title","description":"Assignment title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Assignment description"},"assignment_type":{"anyOf":[{"$ref":"#/components/schemas/AssignmentTypeEnum"},{"type":"null"}],"description":"Type of assignment"},"course_id":{"anyOf":[{"type":"string","maxLength":50,"minLength":1},{"type":"null"}],"title":"Course Id","description":"Course ID"},"due_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Due Date","description":"Assignment due date"},"max_score":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Max Score","description":"Maximum possible score"},"rubric_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Rubric Id","description":"Associated rubric ID"}},"type":"object","title":"AssignmentUpdate","description":"Schema for updating assignment information."},"AvatarUploadResponse":{"properties":{"avatar_url":{"type":"string","title":"Avatar Url"},"message":{"type":"string","title":"Message","default":"头像上传成功"}},"type":"object","required":["avatar_url"],"title":"AvatarUploadResponse","description":"头像上传响应"},"BasicMetrics":{"properties":{"total_lines":{"type":"integer","title":"Total Lines","description":"Total number of lines"},"code_lines":{"type":"integer","title":"Code Lines","description":"Lines of actual code"},"comment_lines":{"type":"integer","title":"Comment Lines","description":"Lines of comments"},"blank_lines":{"type":"integer","title":"Blank Lines","description":"Blank lines"},"function_count":{"type":"integer","title":"Function Count","description":"Number of functions","default":0},"class_count":{"type":"integer","title":"Class Count","description":"Number of classes","default":0},"import_count":{"type":"integer","title":"Import Count","description":"Number of imports","default":0}},"type":"object","required":["total_lines","code_lines","comment_lines","blank_lines"],"title":"BasicMetrics","description":"Basic code metrics."},"BatchAnalysisRequest":{"properties":{"file_ids":{"items":{"type":"string"},"type":"array","title":"File Ids","description":"List of file IDs to analyze"},"rule_overrides":{"items":{"$ref":"#/components/schemas/RuleConfiguration"},"type":"array","title":"Rule Overrides"},"generate_comparison":{"type":"boolean","title":"Generate Comparison","description":"Generate comparison metrics","default":false}},"type":"object","required":["file_ids"],"title":"BatchAnalysisRequest","description":"Request to analyze multiple files."},"BatchAnalysisResponse":{"properties":{"report_id":{"type":"string","title":"Report Id","description":"报告ID"},"assignment_id":{"type":"string","title":"Assignment Id","description":"作业ID"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"创建时间"},"total_submissions":{"type":"integer","title":"Total Submissions","description":"总提交数"},"total_comparisons":{"type":"integer","title":"Total Comparisons","description":"总比较次数"},"flagged_count":{"type":"integer","title":"Flagged Count","description":"标记的可疑对数量"},"similarity_matrix":{"$ref":"#/components/schemas/SimilarityMatrix","description":"相似度矩阵"},"suspicious_pairs":{"items":{"$ref":"#/components/schemas/SubmissionComparison"},"type":"array","title":"Suspicious Pairs","description":"可疑的提交对"},"originality_reports":{"items":{"$ref":"#/components/schemas/OriginalityReport"},"type":"array","title":"Originality Reports","description":"原创性报告列表"},"summary":{"type":"string","title":"Summary","description":"分析总结","default":""}},"type":"object","required":["report_id","assignment_id","created_at","total_submissions","total_comparisons","flagged_count","similarity_matrix"],"title":"BatchAnalysisResponse","description":"批量分析响应"},"BatchGradingRequest":{"properties":{"assignment_id":{"type":"string","title":"Assignment Id","description":"Assignment identifier"},"submissions":{"items":{"$ref":"#/components/schemas/AssignmentSubmission"},"type":"array","title":"Submissions","description":"List of submissions to grade"}},"type":"object","required":["assignment_id","submissions"],"title":"BatchGradingRequest","description":"Request for batch grading multiple assignments."},"BatchGradingResponse":{"properties":{"batch_id":{"type":"string","title":"Batch Id"},"total_submissions":{"type":"integer","title":"Total Submissions"},"status":{"$ref":"#/components/schemas/GradingStatus"},"results":{"items":{"$ref":"#/components/schemas/GradingResult"},"type":"array","title":"Results"}},"type":"object","required":["batch_id","total_submissions","status"],"title":"BatchGradingResponse","description":"Response for batch grading request."},"BatchPlagiarismReport":{"properties":{"report_id":{"type":"string","title":"Report Id","description":"Unique report ID"},"course_id":{"type":"string","title":"Course Id","description":"Course ID"},"checked_at":{"type":"string","format":"date-time","title":"Checked At","description":"Timestamp of check"},"total_submissions":{"type":"integer","title":"Total Submissions","description":"Total submissions checked"},"flagged_pairs":{"type":"integer","title":"Flagged Pairs","description":"Number of flagged pairs"},"comparisons":{"items":{"$ref":"#/components/schemas/SubmissionComparison"},"type":"array","title":"Comparisons"},"summary":{"type":"string","title":"Summary","description":"Summary of batch check","default":""}},"type":"object","required":["report_id","course_id","checked_at","total_submissions","flagged_pairs"],"title":"BatchPlagiarismReport","description":"Batch plagiarism check report."},"BatchUploadResponse":{"properties":{"upload_id":{"type":"string","title":"Upload Id","description":"上传任务ID"},"assignment_id":{"type":"string","title":"Assignment Id","description":"作业ID"},"course_id":{"type":"string","title":"Course Id","description":"课程ID"},"total_files":{"type":"integer","title":"Total Files","description":"总文件数","default":0},"successfully_uploaded":{"type":"integer","title":"Successfully Uploaded","description":"成功上传数","default":0},"failed_uploads":{"type":"integer","title":"Failed Uploads","description":"失败上传数","default":0},"validation_results":{"items":{"$ref":"#/components/schemas/FileValidationResult"},"type":"array","title":"Validation Results","description":"验证结果列表"},"start_time":{"type":"string","format":"date-time","title":"Start Time","description":"开始时间"},"end_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Time","description":"结束时间"}},"type":"object","required":["upload_id","assignment_id","course_id","start_time"],"title":"BatchUploadResponse","description":"批量上传响应"},"BestPracticeViolation":{"properties":{"category":{"type":"string","title":"Category","description":"Violation category"},"rule":{"type":"string","title":"Rule","description":"Best practice rule"},"severity":{"$ref":"#/components/schemas/IssueSeverity","description":"Violation severity"},"line":{"type":"integer","title":"Line","description":"Line number"},"description":{"type":"string","title":"Description","description":"Violation description"},"description_zh":{"type":"string","title":"Description Zh","description":"Description in Chinese","default":""},"suggestion":{"type":"string","title":"Suggestion","description":"How to fix","default":""}},"type":"object","required":["category","rule","severity","line","description"],"title":"BestPracticeViolation","description":"A best practice violation."},"Body_analyze_uploaded_report_api_v1_report_analysis_analyze_file_post":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"待分析的项目报告文件（PDF、DOCX 或 Markdown）"},"reference_style_preference":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reference Style Preference","description":"参考文献格式偏好"}},"type":"object","required":["file"],"title":"Body_analyze_uploaded_report_api_v1_report_analysis_analyze_file_post"},"Body_batch_upload_student_submissions_api_v1_assignments_teacher_batch_upload_post":{"properties":{"assignment_id":{"type":"string","title":"Assignment Id","description":"作业ID"},"course_id":{"type":"string","title":"Course Id","description":"课程ID"},"files":{"items":{"type":"string","format":"binary"},"type":"array","title":"Files","description":"学生作业文件列表"},"student_ids":{"items":{"type":"string"},"type":"array","title":"Student Ids","description":"对应的学生ID列表"},"sync_to_file_manager":{"type":"boolean","title":"Sync To File Manager","description":"是否同步到文件管理系统","default":true}},"type":"object","required":["assignment_id","course_id","files","student_ids"],"title":"Body_batch_upload_student_submissions_api_v1_assignments_teacher_batch_upload_post"},"Body_sync_with_file_manager_api_v1_assignments_file_manager_sync_post":{"properties":{"assignment_id":{"type":"string","title":"Assignment Id","description":"作业ID"},"course_id":{"type":"string","title":"Course Id","description":"课程ID"},"sync_type":{"type":"string","title":"Sync Type","description":"同步类型: full, incremental","default":"full"},"target_path":{"type":"string","title":"Target Path","description":"目标路径"}},"type":"object","required":["assignment_id","course_id","target_path"],"title":"Body_sync_with_file_manager_api_v1_assignments_file_manager_sync_post"},"Body_teacher_submit_assignment_api_v1_assignments_teacher_submit_post":{"properties":{"assignment_id":{"type":"string","title":"Assignment Id","description":"作业ID"},"course_id":{"type":"string","title":"Course Id","description":"课程ID"},"title":{"type":"string","title":"Title","description":"作业标题"},"description":{"type":"string","title":"Description","description":"作业描述"},"due_date":{"type":"string","title":"Due Date","description":"截止日期 (YYYY-MM-DDTHH:MM:SS)"},"max_score":{"type":"number","title":"Max Score","description":"最高分","default":100.0},"assignment_type":{"$ref":"#/components/schemas/AssignmentType","description":"作业类型","default":"code"},"file":{"type":"string","format":"binary","title":"File","description":"作业附件"}},"type":"object","required":["assignment_id","course_id","title","description","due_date"],"title":"Body_teacher_submit_assignment_api_v1_assignments_teacher_submit_post"},"Body_upload_assignment_api_v1_assignments_upload_post":{"properties":{"student_id":{"type":"string","title":"Student Id"},"assignment_id":{"type":"string","title":"Assignment Id"},"assignment_type":{"$ref":"#/components/schemas/AssignmentType"},"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["student_id","assignment_id","assignment_type","file"],"title":"Body_upload_assignment_api_v1_assignments_upload_post"},"Body_upload_avatar_api_v1_auth_avatar_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_avatar_api_v1_auth_avatar_post"},"Body_upload_code_file_api_v1_files_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"Code file to upload"},"uploader_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Uploader Id","description":"ID of the uploader"},"assignment_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assignment Id","description":"Associated assignment ID"}},"type":"object","required":["file"],"title":"Body_upload_code_file_api_v1_files_upload_post"},"CategoriesResponse":{"properties":{"categories":{"items":{"$ref":"#/components/schemas/CategoryInfo"},"type":"array","title":"Categories"}},"type":"object","required":["categories"],"title":"CategoriesResponse","description":"Response for getting all categories."},"CategoryFeedback":{"properties":{"category":{"$ref":"#/components/schemas/FeedbackCategory"},"score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Score","description":"Category score 0-100"},"items":{"items":{"$ref":"#/components/schemas/FeedbackItem"},"type":"array","title":"Items"},"summary":{"type":"string","title":"Summary","description":"Category summary","default":""}},"type":"object","required":["category","score"],"title":"CategoryFeedback","description":"Feedback grouped by category."},"CategoryInfo":{"properties":{"value":{"type":"string","title":"Value"},"label":{"type":"string","title":"Label"},"description":{"type":"string","title":"Description"},"count":{"type":"integer","title":"Count","default":0}},"type":"object","required":["value","label","description"],"title":"CategoryInfo","description":"Information about a category."},"CategoryScore":{"properties":{"category":{"$ref":"#/components/schemas/RuleCategory","description":"Category name"},"score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Score","description":"Category score"},"violations":{"type":"integer","title":"Violations","description":"Number of violations","default":0},"weight":{"type":"number","title":"Weight","description":"Category weight in overall score","default":1.0}},"type":"object","required":["category","score"],"title":"CategoryScore","description":"Score for a specific category."},"ChangePasswordRequest":{"properties":{"old_password":{"type":"string","minLength":1,"title":"Old Password"},"new_password":{"type":"string","maxLength":100,"minLength":6,"title":"New Password"}},"type":"object","required":["old_password","new_password"],"title":"ChangePasswordRequest","description":"修改密码请求"},"ChangePasswordResponse":{"properties":{"message":{"type":"string","title":"Message","default":"密码修改成功,所有设备已登出"}},"type":"object","title":"ChangePasswordResponse","description":"修改密码响应"},"ChapterLengthStats":{"properties":{"section_id":{"type":"string","title":"Section Id","description":"Reference to ReportSection.id"},"title":{"type":"string","title":"Title","description":"Chapter title"},"word_count":{"type":"integer","minimum":0.0,"title":"Word Count","description":"Word count of this chapter"},"proportion":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Proportion","description":"Proportion of total words"},"evaluation":{"type":"string","title":"Evaluation","description":"Qualitative evaluation (too_short/normal/too_long)"}},"type":"object","required":["section_id","title","word_count","proportion","evaluation"],"title":"ChapterLengthStats","description":"Length statistics for a single top-level chapter."},"ClassComparison":{"properties":{"student_id":{"type":"string","title":"Student Id","description":"Student ID"},"student_overall":{"type":"number","title":"Student Overall","description":"Student's overall score"},"class_average":{"type":"number","title":"Class Average","description":"Class average score"},"class_median":{"type":"number","title":"Class Median","description":"Class median score"},"class_max":{"type":"number","title":"Class Max","description":"Class maximum score"},"class_min":{"type":"number","title":"Class Min","description":"Class minimum score"},"percentile":{"type":"number","title":"Percentile","description":"Student's percentile rank"},"rank":{"type":"integer","title":"Rank","description":"Student's rank in class"},"total_students":{"type":"integer","title":"Total Students","description":"Total students in class"},"dimension_comparisons":{"additionalProperties":{"additionalProperties":{"type":"number"},"type":"object"},"type":"object","title":"Dimension Comparisons","description":"Per-dimension comparison with class"}},"type":"object","required":["student_id","student_overall","class_average","class_median","class_max","class_min","percentile","rank","total_students"],"title":"ClassComparison","description":"Comparison with class statistics."},"ClassInfo":{"properties":{"name":{"type":"string","title":"Name","description":"Class name"},"line_start":{"type":"integer","title":"Line Start","description":"Starting line number"},"line_end":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Line End","description":"Ending line number"},"base_classes":{"items":{"type":"string"},"type":"array","title":"Base Classes","description":"Base class names"},"methods":{"items":{"$ref":"#/components/schemas/FunctionInfo"},"type":"array","title":"Methods","description":"Class methods"},"docstring":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Docstring","description":"Class docstring"},"decorators":{"items":{"type":"string"},"type":"array","title":"Decorators","description":"Decorator names"}},"type":"object","required":["name","line_start"],"title":"ClassInfo","description":"Information about a class definition."},"CodeAnalysisRequest":{"properties":{"code":{"type":"string","title":"Code","description":"Source code to analyze"},"language":{"type":"string","title":"Language","description":"Programming language","default":"python"},"include_complexity":{"type":"boolean","title":"Include Complexity","description":"Include complexity analysis","default":true},"include_style":{"type":"boolean","title":"Include Style","description":"Include style analysis","default":true},"include_smells":{"type":"boolean","title":"Include Smells","description":"Include code smell detection","default":true}},"type":"object","required":["code"],"title":"CodeAnalysisRequest","description":"Request for code analysis."},"CodeAnalysisResult":{"properties":{"analysis_id":{"type":"string","title":"Analysis Id","description":"Unique analysis identifier"},"language":{"type":"string","title":"Language","description":"Programming language analyzed"},"analyzed_at":{"type":"string","format":"date-time","title":"Analyzed At","description":"Timestamp of analysis"},"style_analysis":{"anyOf":[{"$ref":"#/components/schemas/StyleAnalysisResult"},{"type":"null"}]},"complexity_metrics":{"anyOf":[{"$ref":"#/components/schemas/ComplexityMetrics"},{"type":"null"}]},"functions":{"items":{"$ref":"#/components/schemas/FunctionAnalysis"},"type":"array","title":"Functions"},"code_smells":{"items":{"$ref":"#/components/schemas/CodeSmell"},"type":"array","title":"Code Smells"},"overall_quality_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Overall Quality Score","description":"Overall code quality score"},"summary":{"type":"string","title":"Summary","description":"Human-readable summary of analysis","default":""},"recommendations":{"items":{"type":"string"},"type":"array","title":"Recommendations","description":"Improvement recommendations"}},"type":"object","required":["analysis_id","language","analyzed_at","overall_quality_score"],"title":"CodeAnalysisResult","description":"Complete code analysis result."},"CodeFeedback":{"properties":{"correctness_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Correctness Score","description":"Score for code correctness"},"style_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Style Score","description":"Score for code style"},"efficiency_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Efficiency Score","description":"Score for code efficiency"},"readability_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Readability Score","description":"Score for code readability","default":0},"comments":{"items":{"type":"string"},"type":"array","title":"Comments","description":"Detailed feedback comments"},"suggestions":{"items":{"type":"string"},"type":"array","title":"Suggestions","description":"Improvement suggestions"},"quality_metrics":{"anyOf":[{"$ref":"#/components/schemas/schemas__assignment__CodeQualityMetrics"},{"type":"null"}],"description":"Detailed quality metrics"},"line_comments":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object","title":"Line Comments","description":"Comments for specific lines"},"ai_feedback":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ai Feedback","description":"AI-generated personalized feedback"}},"type":"object","required":["correctness_score","style_score","efficiency_score"],"title":"CodeFeedback","description":"Feedback for code assignments."},"CodeIssue":{"properties":{"line":{"type":"integer","title":"Line","description":"Line number where issue occurs"},"column":{"type":"integer","title":"Column","description":"Column number where issue occurs","default":0},"code":{"type":"string","title":"Code","description":"Issue code (e.g., E501, W291)"},"message":{"type":"string","title":"Message","description":"Description of the issue"},"severity":{"$ref":"#/components/schemas/schemas__code_analysis__IssueSeverity","description":"Severity level"},"suggestion":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Suggestion","description":"Suggested fix"}},"type":"object","required":["line","code","message","severity"],"title":"CodeIssue","description":"Individual code issue found during analysis."},"CodeMatch":{"properties":{"match_type":{"$ref":"#/components/schemas/MatchType","description":"Type of match detected"},"similarity":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Similarity","description":"Similarity score (0-1)"},"code_snippet_1":{"type":"string","title":"Code Snippet 1","description":"Code snippet from first submission","default":""},"code_snippet_2":{"type":"string","title":"Code Snippet 2","description":"Code snippet from second submission","default":""},"line_range_1":{"items":{},"type":"array","title":"Line Range 1","description":"Line range in first submission","default":[1,1]},"line_range_2":{"items":{},"type":"array","title":"Line Range 2","description":"Line range in second submission","default":[1,1]},"explanation":{"type":"string","title":"Explanation","description":"Explanation of the match","default":""}},"type":"object","required":["match_type","similarity"],"title":"CodeMatch","description":"A matched code segment between two submissions."},"CodeQualityMetrics":{"properties":{"avg_cyclomatic_complexity":{"type":"number","title":"Avg Cyclomatic Complexity","description":"Average cyclomatic complexity","default":0},"max_cyclomatic_complexity":{"type":"integer","title":"Max Cyclomatic Complexity","description":"Maximum cyclomatic complexity","default":0},"total_functions":{"type":"integer","title":"Total Functions","description":"Total number of functions","default":0},"complex_functions":{"type":"integer","title":"Complex Functions","description":"Functions with complexity > 10","default":0},"avg_cognitive_complexity":{"type":"number","title":"Avg Cognitive Complexity","description":"Average cognitive complexity","default":0},"max_cognitive_complexity":{"type":"integer","title":"Max Cognitive Complexity","description":"Maximum cognitive complexity","default":0},"deep_nesting_count":{"type":"integer","title":"Deep Nesting Count","description":"Functions with nesting > 4","default":0},"maintainability_index":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Maintainability Index","description":"Maintainability index (0-100)","default":0},"maintainability_rating":{"$ref":"#/components/schemas/MaintainabilityRating","description":"Maintainability rating","default":"moderate"},"duplicate_blocks":{"type":"integer","title":"Duplicate Blocks","description":"Number of duplicate code blocks","default":0},"duplication_percentage":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Duplication Percentage","description":"Percentage of duplicated code","default":0},"total_lines":{"type":"integer","title":"Total Lines","description":"Total lines of code","default":0},"code_lines":{"type":"integer","title":"Code Lines","description":"Lines of actual code","default":0},"comment_lines":{"type":"integer","title":"Comment Lines","description":"Lines of comments","default":0},"blank_lines":{"type":"integer","title":"Blank Lines","description":"Blank lines","default":0},"comment_ratio":{"type":"number","title":"Comment Ratio","description":"Comment to code ratio percentage","default":0}},"type":"object","title":"CodeQualityMetrics","description":"Overall code quality metrics."},"CodeQualityResult":{"properties":{"analysis_id":{"type":"string","title":"Analysis Id","description":"Unique analysis identifier"},"analyzed_at":{"type":"string","format":"date-time","title":"Analyzed At","description":"Analysis timestamp"},"language":{"type":"string","title":"Language","description":"Programming language","default":"python"},"score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Score","description":"Overall quality score"},"grade":{"type":"string","title":"Grade","description":"Letter grade (A-F)"},"metrics":{"$ref":"#/components/schemas/CodeQualityMetrics","description":"Quality metrics"},"functions":{"items":{"$ref":"#/components/schemas/FunctionComplexity"},"type":"array","title":"Functions","description":"Per-function analysis"},"duplicates":{"items":{"$ref":"#/components/schemas/DuplicateCodeBlock"},"type":"array","title":"Duplicates","description":"Duplicate code blocks"},"issues":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Issues","description":"Quality issues found"},"summary":{"type":"string","title":"Summary","description":"Analysis summary","default":""},"recommendations":{"items":{"type":"string"},"type":"array","title":"Recommendations","description":"Improvement recommendations"}},"type":"object","required":["analysis_id","analyzed_at","score","grade","metrics"],"title":"CodeQualityResult","description":"Complete code quality analysis result."},"CodeSmell":{"properties":{"type":{"type":"string","title":"Type","description":"Type of code smell"},"description":{"type":"string","title":"Description","description":"Description of the smell"},"location":{"type":"string","title":"Location","description":"Location in code"},"severity":{"$ref":"#/components/schemas/schemas__code_analysis__IssueSeverity","description":"Severity level"},"refactoring_suggestion":{"type":"string","title":"Refactoring Suggestion","description":"Suggested refactoring","default":""}},"type":"object","required":["type","description","location","severity"],"title":"CodeSmell","description":"Detected code smell."},"CodeStructure":{"properties":{"imports":{"items":{"$ref":"#/components/schemas/ImportInfo"},"type":"array","title":"Imports","description":"Import statements"},"functions":{"items":{"$ref":"#/components/schemas/FunctionInfo"},"type":"array","title":"Functions","description":"Top-level functions"},"classes":{"items":{"$ref":"#/components/schemas/ClassInfo"},"type":"array","title":"Classes","description":"Class definitions"},"global_variables":{"items":{"type":"string"},"type":"array","title":"Global Variables","description":"Global variable names"}},"type":"object","title":"CodeStructure","description":"Extracted code structure from a file."},"CodeTransformationType":{"type":"string","enum":["variable_rename","function_rename","extract_function","inline_variable","reorder_statements","comment_modification","whitespace_change"],"title":"CodeTransformationType","description":"代码变换类型"},"ComplexityGrade":{"type":"string","enum":["A","B","C","D","E","F"],"title":"ComplexityGrade","description":"Complexity grade based on cyclomatic complexity."},"ComplexityMetrics":{"properties":{"cyclomatic_complexity":{"type":"number","title":"Cyclomatic Complexity","description":"McCabe cyclomatic complexity"},"cognitive_complexity":{"type":"number","title":"Cognitive Complexity","description":"Cognitive complexity score","default":0},"maintainability_index":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Maintainability Index","description":"Maintainability index (0-100)"},"lines_of_code":{"type":"integer","title":"Lines Of Code","description":"Total lines of code"},"logical_lines":{"type":"integer","title":"Logical Lines","description":"Logical lines of code"},"comment_lines":{"type":"integer","title":"Comment Lines","description":"Number of comment lines"},"blank_lines":{"type":"integer","title":"Blank Lines","description":"Number of blank lines"},"comment_ratio":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Comment Ratio","description":"Percentage of comments"}},"type":"object","required":["cyclomatic_complexity","maintainability_index","lines_of_code","logical_lines","comment_lines","blank_lines","comment_ratio"],"title":"ComplexityMetrics","description":"Code complexity metrics."},"ComplexityResult":{"properties":{"cyclomatic_complexity":{"type":"number","title":"Cyclomatic Complexity","description":"Average cyclomatic complexity","default":0},"max_cyclomatic_complexity":{"type":"integer","title":"Max Cyclomatic Complexity","description":"Maximum cyclomatic complexity","default":0},"cognitive_complexity":{"type":"number","title":"Cognitive Complexity","description":"Average cognitive complexity","default":0},"max_nesting_depth":{"type":"integer","title":"Max Nesting Depth","description":"Maximum nesting depth","default":0},"avg_nesting_depth":{"type":"number","title":"Avg Nesting Depth","description":"Average nesting depth","default":0},"total_functions":{"type":"integer","title":"Total Functions","description":"Total number of functions","default":0},"complex_functions":{"type":"integer","title":"Complex Functions","description":"Functions exceeding complexity threshold","default":0},"avg_function_length":{"type":"number","title":"Avg Function Length","description":"Average function length in lines","default":0},"max_function_length":{"type":"integer","title":"Max Function Length","description":"Maximum function length","default":0},"avg_parameters":{"type":"number","title":"Avg Parameters","description":"Average parameters per function","default":0},"max_parameters":{"type":"integer","title":"Max Parameters","description":"Maximum parameters in a function","default":0}},"type":"object","title":"ComplexityResult","description":"Detailed complexity analysis results."},"ComprehensiveAnalysisResult":{"properties":{"analysis_id":{"type":"string","title":"Analysis Id","description":"Unique analysis identifier"},"analyzed_at":{"type":"string","format":"date-time","title":"Analyzed At","description":"Analysis timestamp"},"language":{"type":"string","title":"Language","description":"Programming language","default":"python"},"overall_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Overall Score","description":"Overall score"},"grade":{"type":"string","title":"Grade","description":"Letter grade (A-F)"},"quality":{"anyOf":[{"$ref":"#/components/schemas/CodeQualityResult"},{"type":"null"}],"description":"Code quality analysis"},"lint":{"anyOf":[{"$ref":"#/components/schemas/LintResult"},{"type":"null"}],"description":"Linting analysis"},"security":{"anyOf":[{"$ref":"#/components/schemas/SecurityResult"},{"type":"null"}],"description":"Security analysis"},"performance":{"anyOf":[{"$ref":"#/components/schemas/PerformanceResult"},{"type":"null"}],"description":"Performance analysis"},"summary":{"type":"string","title":"Summary","description":"Comprehensive analysis summary","default":""},"recommendations":{"items":{"type":"string"},"type":"array","title":"Recommendations","description":"All recommendations"},"metrics":{"additionalProperties":true,"type":"object","title":"Metrics","description":"Combined metrics"}},"type":"object","required":["analysis_id","analyzed_at","overall_score","grade"],"title":"ComprehensiveAnalysisResult","description":"Complete comprehensive analysis combining all analysis types."},"ComprehensiveRequest":{"properties":{"code":{"type":"string","title":"Code","description":"Source code to analyze"},"language":{"type":"string","title":"Language","description":"Programming language","default":"python"},"include_quality":{"type":"boolean","title":"Include Quality","description":"Include quality analysis","default":true},"include_lint":{"type":"boolean","title":"Include Lint","description":"Include linting","default":true},"include_security":{"type":"boolean","title":"Include Security","description":"Include security analysis","default":true},"include_performance":{"type":"boolean","title":"Include Performance","description":"Include performance analysis","default":true},"timeout":{"type":"integer","maximum":120.0,"minimum":5.0,"title":"Timeout","description":"Analysis timeout in seconds","default":30}},"type":"object","required":["code"],"title":"ComprehensiveRequest","description":"Request for comprehensive analysis."},"DeleteAccountRequest":{"properties":{"password":{"type":"string","minLength":1,"title":"Password","description":"当前密码确认"}},"type":"object","required":["password"],"title":"DeleteAccountRequest","description":"删除账户请求"},"DeleteAccountResponse":{"properties":{"message":{"type":"string","title":"Message","default":"账户已注销"}},"type":"object","title":"DeleteAccountResponse","description":"删除账户响应"},"DetailedCodeMatch":{"properties":{"source_student_id":{"type":"string","title":"Source Student Id","description":"源学生ID"},"target_student_id":{"type":"string","title":"Target Student Id","description":"目标学生ID"},"source_start_line":{"type":"integer","minimum":1.0,"title":"Source Start Line","description":"源代码起始行"},"source_end_line":{"type":"integer","minimum":1.0,"title":"Source End Line","description":"源代码结束行"},"source_start_col":{"type":"integer","minimum":0.0,"title":"Source Start Col","description":"源代码起始列","default":0},"source_end_col":{"type":"integer","minimum":0.0,"title":"Source End Col","description":"源代码结束列","default":0},"target_start_line":{"type":"integer","minimum":1.0,"title":"Target Start Line","description":"目标代码起始行"},"target_end_line":{"type":"integer","minimum":1.0,"title":"Target End Line","description":"目标代码结束行"},"target_start_col":{"type":"integer","minimum":0.0,"title":"Target Start Col","description":"目标代码起始列","default":0},"target_end_col":{"type":"integer","minimum":0.0,"title":"Target End Col","description":"目标代码结束列","default":0},"source_snippet":{"type":"string","title":"Source Snippet","description":"源代码片段"},"target_snippet":{"type":"string","title":"Target Snippet","description":"目标代码片段"},"similarity":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Similarity","description":"相似度分数"},"algorithm":{"$ref":"#/components/schemas/SimilarityAlgorithm","description":"检测算法"},"transformation_type":{"anyOf":[{"$ref":"#/components/schemas/CodeTransformationType"},{"type":"null"}],"description":"检测到的代码变换类型"},"explanation":{"type":"string","title":"Explanation","description":"匹配说明","default":""}},"type":"object","required":["source_student_id","target_student_id","source_start_line","source_end_line","target_start_line","target_end_line","source_snippet","target_snippet","similarity","algorithm"],"title":"DetailedCodeMatch","description":"详细的代码匹配信息，包含精确位置"},"DifficultyInfo":{"properties":{"level":{"type":"string","title":"Level"},"name":{"type":"string","title":"Name"},"description":{"type":"string","title":"Description"},"examples":{"items":{"type":"string"},"type":"array","title":"Examples"}},"type":"object","required":["level","name","description","examples"],"title":"DifficultyInfo","description":"难度级别信息"},"DifficultyLevelsResponse":{"properties":{"levels":{"items":{"$ref":"#/components/schemas/DifficultyInfo"},"type":"array","title":"Levels"}},"type":"object","required":["levels"],"title":"DifficultyLevelsResponse","description":"难度级别列表响应"},"DimensionScore":{"properties":{"dimension":{"$ref":"#/components/schemas/EvaluationDimension","description":"Evaluation dimension"},"score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Score","description":"Score 0-100"},"weight":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Weight","description":"Weight in overall score"},"name":{"type":"string","title":"Name","description":"Dimension name"},"name_zh":{"type":"string","title":"Name Zh","description":"Dimension name in Chinese"},"description":{"type":"string","title":"Description","description":"Score explanation","default":""},"description_zh":{"type":"string","title":"Description Zh","description":"Explanation in Chinese","default":""},"strengths":{"items":{"type":"string"},"type":"array","title":"Strengths","description":"Strengths in this dimension"},"strengths_zh":{"items":{"type":"string"},"type":"array","title":"Strengths Zh","description":"Strengths in Chinese"},"improvements":{"items":{"type":"string"},"type":"array","title":"Improvements","description":"Areas for improvement"},"improvements_zh":{"items":{"type":"string"},"type":"array","title":"Improvements Zh","description":"Improvements in Chinese"}},"type":"object","required":["dimension","score","weight","name","name_zh"],"title":"DimensionScore","description":"Score for a single evaluation dimension."},"DuplicateCodeBlock":{"properties":{"block_id":{"type":"integer","title":"Block Id","description":"Unique identifier for this duplicate group"},"lines":{"items":{"type":"integer"},"type":"array","title":"Lines","description":"Line numbers where duplicates occur"},"code_snippet":{"type":"string","title":"Code Snippet","description":"The duplicated code snippet"},"similarity":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Similarity","description":"Similarity percentage"},"suggestion":{"type":"string","title":"Suggestion","description":"Refactoring suggestion","default":""}},"type":"object","required":["block_id","lines","code_snippet","similarity"],"title":"DuplicateCodeBlock","description":"Information about a duplicate code block."},"EscalationRequest":{"properties":{"question_id":{"type":"string","title":"Question Id","description":"Question to escalate"},"reason":{"type":"string","title":"Reason","description":"Reason for escalation"},"priority":{"type":"string","title":"Priority","description":"Priority level: low, normal, high","default":"normal"}},"type":"object","required":["question_id","reason"],"title":"EscalationRequest","description":"Request to escalate a question to a teacher."},"EvaluationDimension":{"type":"string","enum":["technical_ability","code_quality","innovation","best_practices","efficiency","documentation"],"title":"EvaluationDimension","description":"Dimensions for code evaluation."},"ExplainCodeRequest":{"properties":{"code":{"type":"string","title":"Code","description":"Code to explain"},"language":{"type":"string","title":"Language","description":"Programming language","default":"python"},"detail_level":{"type":"string","title":"Detail Level","description":"Detail level: basic, medium, detailed","default":"medium"},"focus_areas":{"items":{"type":"string"},"type":"array","title":"Focus Areas","description":"Specific areas to focus on"},"student_level":{"type":"string","title":"Student Level","description":"Student level: beginner, intermediate, advanced","default":"intermediate"}},"type":"object","required":["code"],"title":"ExplainCodeRequest","description":"Request to explain code to a student."},"ExplainCodeResponse":{"properties":{"success":{"type":"boolean","title":"Success","default":true},"explanation":{"type":"string","title":"Explanation","description":"Code explanation"},"key_concepts":{"items":{"type":"string"},"type":"array","title":"Key Concepts"},"complexity_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Complexity Notes"},"learning_resources":{"items":{"type":"string"},"type":"array","title":"Learning Resources"}},"type":"object","required":["explanation"],"title":"ExplainCodeResponse","description":"Response for code explanation."},"FeedbackCategory":{"type":"string","enum":["code_quality","logic_efficiency","style_readability","security","best_practices","suggestions","encouragement"],"title":"FeedbackCategory","description":"Categories of feedback."},"FeedbackDetailLevel":{"type":"string","enum":["brief","standard","detailed","comprehensive"],"title":"FeedbackDetailLevel","description":"Detail level for feedback generation."},"FeedbackItem":{"properties":{"category":{"$ref":"#/components/schemas/FeedbackCategory","description":"Feedback category"},"title":{"type":"string","title":"Title","description":"Short title for the feedback"},"message":{"type":"string","title":"Message","description":"Detailed feedback message"},"severity":{"type":"string","title":"Severity","description":"Severity: info, warning, error","default":"info"},"line_number":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Line Number","description":"Related line number"},"code_snippet":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Code Snippet","description":"Related code snippet"},"suggestion":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Suggestion","description":"Suggested fix or improvement"}},"type":"object","required":["category","title","message"],"title":"FeedbackItem","description":"Individual feedback item."},"FeedbackResponse":{"properties":{"success":{"type":"boolean","title":"Success","default":true},"feedback":{"$ref":"#/components/schemas/GeneratedFeedback"},"message":{"type":"string","title":"Message","default":"Feedback generated successfully"},"processing_time_ms":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Processing Time Ms"}},"type":"object","required":["feedback"],"title":"FeedbackResponse","description":"Response for feedback generation."},"FeedbackTemplateCreate":{"properties":{"name":{"type":"string","maxLength":200,"minLength":1,"title":"Name","description":"Template name"},"category":{"$ref":"#/components/schemas/TemplateCategory","description":"Template category"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language","description":"Specific language or None for all"},"title":{"type":"string","title":"Title","description":"Feedback title template"},"message":{"type":"string","title":"Message","description":"Feedback message template with placeholders"},"severity":{"type":"string","title":"Severity","description":"Default severity","default":"info"},"tags":{"items":{"type":"string"},"type":"array","title":"Tags","description":"Searchable tags"},"variables":{"items":{"type":"string"},"type":"array","title":"Variables","description":"Available placeholder variables"},"is_active":{"type":"boolean","title":"Is Active","description":"Whether template is active","default":true},"tone":{"anyOf":[{"$ref":"#/components/schemas/TemplateTone"},{"type":"null"}],"description":"Template tone variant","default":"neutral"},"locale":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Locale","description":"Template locale (e.g., 'en', 'zh-CN')","default":"en"}},"type":"object","required":["name","category","title","message"],"title":"FeedbackTemplateCreate","description":"Schema for creating a feedback template."},"FeedbackTemplateListResponse":{"properties":{"templates":{"items":{"$ref":"#/components/schemas/FeedbackTemplateResponse"},"type":"array","title":"Templates"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"}},"type":"object","required":["templates","total","page","page_size"],"title":"FeedbackTemplateListResponse","description":"Response for listing feedback templates."},"FeedbackTemplateResponse":{"properties":{"name":{"type":"string","maxLength":200,"minLength":1,"title":"Name","description":"Template name"},"category":{"$ref":"#/components/schemas/TemplateCategory","description":"Template category"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language","description":"Specific language or None for all"},"title":{"type":"string","title":"Title","description":"Feedback title template"},"message":{"type":"string","title":"Message","description":"Feedback message template with placeholders"},"severity":{"type":"string","title":"Severity","description":"Default severity","default":"info"},"tags":{"items":{"type":"string"},"type":"array","title":"Tags","description":"Searchable tags"},"variables":{"items":{"type":"string"},"type":"array","title":"Variables","description":"Available placeholder variables"},"is_active":{"type":"boolean","title":"Is Active","description":"Whether template is active","default":true},"tone":{"anyOf":[{"$ref":"#/components/schemas/TemplateTone"},{"type":"null"}],"description":"Template tone variant","default":"neutral"},"locale":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Locale","description":"Template locale (e.g., 'en', 'zh-CN')","default":"en"},"id":{"type":"integer","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"usage_count":{"type":"integer","title":"Usage Count","description":"Number of times template was used","default":0}},"type":"object","required":["name","category","title","message","id","created_at"],"title":"FeedbackTemplateResponse","description":"Schema for feedback template response."},"FeedbackTemplateUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":200,"minLength":1},{"type":"null"}],"title":"Name"},"category":{"anyOf":[{"$ref":"#/components/schemas/TemplateCategory"},{"type":"null"}]},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"},"severity":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Severity"},"tags":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tags"},"variables":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Variables"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"tone":{"anyOf":[{"$ref":"#/components/schemas/TemplateTone"},{"type":"null"}]},"locale":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Locale"}},"type":"object","title":"FeedbackTemplateUpdate","description":"Schema for updating a feedback template."},"FeedbackTone":{"type":"string","enum":["encouraging","professional","detailed","concise","friendly","strict"],"title":"FeedbackTone","description":"Tone options for generated feedback."},"FigureTableStats":{"properties":{"figure_count":{"type":"integer","minimum":0.0,"title":"Figure Count","description":"Number of figures","default":0},"table_count":{"type":"integer","minimum":0.0,"title":"Table Count","description":"Number of tables","default":0},"evaluation":{"type":"string","title":"Evaluation","description":"Qualitative evaluation of figure/table usage","default":""}},"type":"object","title":"FigureTableStats","description":"Statistics for figures and tables in the report."},"FileContentResponse":{"properties":{"file_id":{"type":"string","title":"File Id","description":"Unique file identifier"},"filename":{"type":"string","title":"Filename","description":"Original filename"},"content":{"type":"string","title":"Content","description":"File content"},"language":{"$ref":"#/components/schemas/ProgrammingLanguage-Output","description":"Programming language"},"line_count":{"type":"integer","title":"Line Count","description":"Number of lines"}},"type":"object","required":["file_id","filename","content","language","line_count"],"title":"FileContentResponse","description":"Response with file content."},"FileListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/FileMetadataResponse"},"type":"array","title":"Items","description":"List of files"},"total":{"type":"integer","title":"Total","description":"Total number of files"},"page":{"type":"integer","title":"Page","description":"Current page"},"page_size":{"type":"integer","title":"Page Size","description":"Items per page"},"total_pages":{"type":"integer","title":"Total Pages","description":"Total number of pages"}},"type":"object","required":["items","total","page","page_size","total_pages"],"title":"FileListResponse","description":"Paginated list of files."},"FileManagerSyncResponse":{"properties":{"sync_id":{"type":"string","title":"Sync Id","description":"同步任务ID"},"assignment_id":{"type":"string","title":"Assignment Id","description":"作业ID"},"course_id":{"type":"string","title":"Course Id","description":"课程ID"},"status":{"$ref":"#/components/schemas/AssignmentTransferStatus","description":"同步状态"},"progress":{"type":"number","title":"Progress","description":"进度百分比","default":0.0},"total_files":{"type":"integer","title":"Total Files","description":"总文件数","default":0},"processed_files":{"type":"integer","title":"Processed Files","description":"已处理文件数","default":0},"failed_files":{"type":"integer","title":"Failed Files","description":"失败文件数","default":0},"start_time":{"type":"string","format":"date-time","title":"Start Time","description":"开始时间"},"end_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Time","description":"结束时间"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message","description":"错误信息"}},"type":"object","required":["sync_id","assignment_id","course_id","status","start_time"],"title":"FileManagerSyncResponse","description":"文件管理同步响应"},"FileMetadataResponse":{"properties":{"file_id":{"type":"string","title":"File Id","description":"Unique file identifier"},"original_filename":{"type":"string","title":"Original Filename","description":"Original filename"},"stored_filename":{"type":"string","title":"Stored Filename","description":"Stored filename"},"file_size":{"type":"integer","title":"File Size","description":"File size in bytes"},"file_extension":{"type":"string","title":"File Extension","description":"File extension"},"language":{"$ref":"#/components/schemas/ProgrammingLanguage-Output","description":"Programming language"},"status":{"$ref":"#/components/schemas/FileStatus","description":"Processing status"},"uploader_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Uploader Id","description":"Uploader ID"},"assignment_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assignment Id","description":"Associated assignment ID"},"line_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Line Count","description":"Number of lines"},"content_hash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content Hash","description":"Content hash"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Creation timestamp"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At","description":"Last update timestamp"}},"type":"object","required":["file_id","original_filename","stored_filename","file_size","file_extension","language","status","created_at"],"title":"FileMetadataResponse","description":"File metadata response."},"FileParseResult":{"properties":{"file_id":{"type":"string","title":"File Id","description":"Unique file identifier"},"language":{"$ref":"#/components/schemas/ProgrammingLanguage-Output","description":"Detected programming language"},"structure":{"$ref":"#/components/schemas/CodeStructure","description":"Extracted code structure"},"metrics":{"$ref":"#/components/schemas/BasicMetrics","description":"Basic code metrics"},"syntax_validation":{"$ref":"#/components/schemas/SyntaxValidation","description":"Syntax validation result"},"parsed_at":{"type":"string","format":"date-time","title":"Parsed At","description":"Timestamp of parsing"}},"type":"object","required":["file_id","language","structure","metrics","syntax_validation","parsed_at"],"title":"FileParseResult","description":"Complete file parsing result."},"FileStatus":{"type":"string","enum":["pending","processing","processed","failed"],"title":"FileStatus","description":"Status of the uploaded file."},"FileUploadResponse":{"properties":{"file_id":{"type":"string","title":"File Id","description":"Unique file identifier"},"original_filename":{"type":"string","title":"Original Filename","description":"Original filename"},"file_size":{"type":"integer","title":"File Size","description":"File size in bytes"},"file_extension":{"type":"string","title":"File Extension","description":"File extension"},"language":{"$ref":"#/components/schemas/ProgrammingLanguage-Output","description":"Detected programming language"},"status":{"$ref":"#/components/schemas/FileStatus","description":"Processing status"},"uploaded_at":{"type":"string","format":"date-time","title":"Uploaded At","description":"Upload timestamp"},"message":{"type":"string","title":"Message","description":"Status message","default":"File uploaded successfully"}},"type":"object","required":["file_id","original_filename","file_size","file_extension","language","status","uploaded_at"],"title":"FileUploadResponse","description":"Response after successful file upload."},"FileValidationResult":{"properties":{"filename":{"type":"string","title":"Filename","description":"文件名"},"is_valid":{"type":"boolean","title":"Is Valid","description":"是否有效"},"validation_errors":{"items":{"type":"string"},"type":"array","title":"Validation Errors","description":"验证错误列表"},"file_size":{"type":"integer","title":"File Size","description":"文件大小","default":0},"detected_language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Detected Language","description":"检测到的编程语言"}},"type":"object","required":["filename","is_valid"],"title":"FileValidationResult","description":"文件验证结果"},"FormattingCheckResult":{"properties":{"reference_style":{"$ref":"#/components/schemas/ReferenceFormat","description":"Detected or expected reference style","default":"unknown"},"title_consistency_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Title Consistency Score","description":"Consistency score for headings (0-100)","default":0.0},"figure_table_consistency_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Figure Table Consistency Score","description":"Consistency score for figure/table numbering and references (0-100)","default":0.0},"issues":{"items":{"$ref":"#/components/schemas/FormattingIssue"},"type":"array","title":"Issues","description":"List of detected formatting issues"}},"type":"object","title":"FormattingCheckResult","description":"Result of formatting and style checks."},"FormattingIssue":{"properties":{"issue_type":{"$ref":"#/components/schemas/FormattingIssueType","description":"Formatting issue type"},"location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location","description":"Human-readable location description (e.g. section/line)"},"description":{"type":"string","title":"Description","description":"Description of the formatting problem"},"suggested_fix":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Suggested Fix","description":"Suggested fix for this issue"}},"type":"object","required":["issue_type","description"],"title":"FormattingIssue","description":"Single formatting issue detected in the report."},"FormattingIssueType":{"type":"string","enum":["title_inconsistent","figure_table_numbering","reference_format","pagination","font_style"],"title":"FormattingIssueType"},"FullAnalysisResult":{"properties":{"analysis_id":{"type":"string","title":"Analysis Id","description":"Unique analysis identifier"},"file_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"File Id","description":"Associated file ID"},"language":{"type":"string","title":"Language","description":"Programming language"},"analyzed_at":{"type":"string","format":"date-time","title":"Analyzed At","description":"Analysis timestamp"},"summary":{"$ref":"#/components/schemas/AnalysisResultSummary","description":"Analysis summary"},"line_metrics":{"$ref":"#/components/schemas/LineMetrics"},"complexity":{"$ref":"#/components/schemas/ComplexityResult"},"structure":{"$ref":"#/components/schemas/StructureResult"},"naming":{"$ref":"#/components/schemas/NamingConventionResult"},"violations":{"items":{"$ref":"#/components/schemas/RuleViolation"},"type":"array","title":"Violations"},"naming_issues":{"items":{},"type":"array","title":"Naming Issues","description":"Naming convention issues"},"security_issues":{"items":{},"type":"array","title":"Security Issues","description":"Security issues"},"recommendations":{"items":{"type":"string"},"type":"array","title":"Recommendations"},"comparison_metrics":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Comparison Metrics"}},"type":"object","required":["analysis_id","language","analyzed_at","summary"],"title":"FullAnalysisResult","description":"Complete analysis result with all details."},"FunctionAnalysis":{"properties":{"name":{"type":"string","title":"Name","description":"Function name"},"line_start":{"type":"integer","title":"Line Start","description":"Starting line number"},"line_end":{"type":"integer","title":"Line End","description":"Ending line number"},"complexity":{"type":"integer","title":"Complexity","description":"Cyclomatic complexity"},"parameters":{"type":"integer","title":"Parameters","description":"Number of parameters"},"is_too_complex":{"type":"boolean","title":"Is Too Complex","description":"Whether function exceeds complexity threshold","default":false},"issues":{"items":{"type":"string"},"type":"array","title":"Issues","description":"Issues specific to this function"}},"type":"object","required":["name","line_start","line_end","complexity","parameters"],"title":"FunctionAnalysis","description":"Analysis of individual function."},"FunctionComplexity":{"properties":{"name":{"type":"string","title":"Name","description":"Function name"},"line_start":{"type":"integer","title":"Line Start","description":"Starting line number"},"line_end":{"type":"integer","title":"Line End","description":"Ending line number"},"cyclomatic_complexity":{"type":"integer","title":"Cyclomatic Complexity","description":"Cyclomatic complexity score"},"cognitive_complexity":{"type":"integer","title":"Cognitive Complexity","description":"Cognitive complexity score","default":0},"grade":{"$ref":"#/components/schemas/ComplexityGrade","description":"Complexity grade (A-F)"},"is_complex":{"type":"boolean","title":"Is Complex","description":"Whether function exceeds complexity threshold","default":false},"nesting_depth":{"type":"integer","title":"Nesting Depth","description":"Maximum nesting depth","default":0},"parameters":{"type":"integer","title":"Parameters","description":"Number of parameters","default":0},"lines_of_code":{"type":"integer","title":"Lines Of Code","description":"Lines of code in function","default":0},"suggestions":{"items":{"type":"string"},"type":"array","title":"Suggestions","description":"Improvement suggestions"}},"type":"object","required":["name","line_start","line_end","cyclomatic_complexity","grade"],"title":"FunctionComplexity","description":"Complexity metrics for a single function."},"FunctionInfo":{"properties":{"name":{"type":"string","title":"Name","description":"Function name"},"line_start":{"type":"integer","title":"Line Start","description":"Starting line number"},"line_end":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Line End","description":"Ending line number"},"parameters":{"items":{"type":"string"},"type":"array","title":"Parameters","description":"Parameter names"},"return_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Return Type","description":"Return type annotation"},"docstring":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Docstring","description":"Function docstring"},"is_async":{"type":"boolean","title":"Is Async","description":"Whether function is async","default":false},"decorators":{"items":{"type":"string"},"type":"array","title":"Decorators","description":"Decorator names"}},"type":"object","required":["name","line_start"],"title":"FunctionInfo","description":"Information about a function definition."},"GenerateFeedbackRequest":{"properties":{"code":{"type":"string","title":"Code","description":"Source code to analyze"},"language":{"type":"string","title":"Language","description":"Programming language","default":"python"},"submission_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Submission Id","description":"Associated submission ID"},"file_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"File Id","description":"Associated file ID"},"assignment_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assignment Id","description":"Assignment for context"},"student_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Student Id","description":"Student for historical context"},"rubric":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Rubric","description":"Grading rubric"},"tone":{"$ref":"#/components/schemas/FeedbackTone","description":"Feedback tone","default":"professional"},"include_suggestions":{"type":"boolean","title":"Include Suggestions","description":"Include improvement suggestions","default":true},"max_items_per_category":{"type":"integer","maximum":20.0,"minimum":1.0,"title":"Max Items Per Category","default":5},"use_ai":{"type":"boolean","title":"Use Ai","description":"Use AI for enhanced feedback","default":true}},"type":"object","required":["code"],"title":"GenerateFeedbackRequest","description":"Request to generate feedback for code."},"GeneratedFeedback":{"properties":{"submission_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Submission Id"},"file_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"File Id"},"overall_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Overall Score"},"overall_grade":{"type":"string","title":"Overall Grade","description":"Letter grade A-F"},"summary":{"type":"string","title":"Summary","description":"Overall feedback summary"},"categories":{"items":{"$ref":"#/components/schemas/CategoryFeedback"},"type":"array","title":"Categories"},"strengths":{"items":{"type":"string"},"type":"array","title":"Strengths","description":"Code strengths"},"improvements":{"items":{"type":"string"},"type":"array","title":"Improvements","description":"Areas for improvement"},"next_steps":{"items":{"type":"string"},"type":"array","title":"Next Steps","description":"Recommended next steps"},"generated_at":{"type":"string","format":"date-time","title":"Generated At"},"tone":{"$ref":"#/components/schemas/FeedbackTone","default":"professional"},"language":{"type":"string","title":"Language","default":"python"}},"type":"object","required":["overall_score","overall_grade","summary"],"title":"GeneratedFeedback","description":"Complete generated feedback for a submission."},"GradedByEnum":{"type":"string","enum":["AI","teacher"],"title":"GradedByEnum","description":"评分者类型（与数据库模型一致）"},"GradingResult":{"properties":{"submission_id":{"type":"string","title":"Submission Id"},"student_id":{"type":"string","title":"Student Id"},"assignment_id":{"type":"string","title":"Assignment Id"},"assignment_type":{"$ref":"#/components/schemas/AssignmentType"},"overall_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Overall Score"},"status":{"$ref":"#/components/schemas/GradingStatus"},"code_feedback":{"anyOf":[{"$ref":"#/components/schemas/CodeFeedback"},{"type":"null"}]},"report_feedback":{"anyOf":[{"$ref":"#/components/schemas/ReportFeedback"},{"type":"null"}]},"plagiarism_result":{"anyOf":[{"$ref":"#/components/schemas/PlagiarismResult"},{"type":"null"}]},"graded_at":{"type":"string","format":"date-time","title":"Graded At"},"feedback_summary":{"type":"string","title":"Feedback Summary","description":"AI-generated summary of feedback","default":""}},"type":"object","required":["submission_id","student_id","assignment_id","assignment_type","overall_score","status","graded_at"],"title":"GradingResult","description":"Complete grading result for an assignment."},"GradingResultCreate":{"properties":{"overall_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Overall Score","description":"总分（0-100）"},"max_score":{"type":"number","minimum":0.0,"title":"Max Score","description":"满分","default":100.0},"feedback":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Feedback","description":"详细反馈（JSON 格式）","examples":[{"details":[],"improvements":["可以添加更多注释","建议使用类型提示"],"strengths":["逻辑清晰","命名规范"],"summary":"代码质量良好，但存在一些小问题"}]},"submission_id":{"type":"integer","title":"Submission Id","description":"提交记录的数据库 ID"},"graded_by":{"$ref":"#/components/schemas/GradedByEnum","description":"评分者类型","default":"AI"},"graded_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Graded At","description":"评分时间（默认为当前时间）"}},"type":"object","required":["overall_score","submission_id"],"title":"GradingResultCreate","description":"创建评分结果的 schema"},"GradingResultListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/GradingResultResponse"},"type":"array","title":"Items","description":"评分结果列表"},"total":{"type":"integer","title":"Total","description":"总数"},"page":{"type":"integer","title":"Page","description":"当前页码"},"page_size":{"type":"integer","title":"Page Size","description":"每页数量"},"total_pages":{"type":"integer","title":"Total Pages","description":"总页数"}},"type":"object","required":["total","page","page_size","total_pages"],"title":"GradingResultListResponse","description":"评分结果列表响应 schema"},"GradingResultOverride":{"properties":{"overall_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Overall Score","description":"新的总分"},"feedback":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Feedback","description":"教师反馈"},"override_reason":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Override Reason","description":"覆盖原因"}},"type":"object","required":["overall_score"],"title":"GradingResultOverride","description":"教师覆盖评分的 schema"},"GradingResultResponse":{"properties":{"overall_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Overall Score","description":"总分（0-100）"},"max_score":{"type":"number","minimum":0.0,"title":"Max Score","description":"满分","default":100.0},"feedback":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Feedback","description":"详细反馈（JSON 格式）","examples":[{"details":[],"improvements":["可以添加更多注释","建议使用类型提示"],"strengths":["逻辑清晰","命名规范"],"summary":"代码质量良好，但存在一些小问题"}]},"id":{"type":"integer","title":"Id","description":"评分结果 ID"},"submission_id":{"type":"integer","title":"Submission Id","description":"提交记录 ID"},"graded_at":{"type":"string","format":"date-time","title":"Graded At","description":"评分时间"},"graded_by":{"$ref":"#/components/schemas/GradedByEnum","description":"评分者类型"},"percentage_score":{"type":"number","title":"Percentage Score","description":"百分比得分"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"创建时间"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At","description":"更新时间"}},"type":"object","required":["overall_score","id","submission_id","graded_at","graded_by","percentage_score","created_at"],"title":"GradingResultResponse","description":"评分结果响应 schema"},"GradingResultWithSubmission":{"properties":{"overall_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Overall Score","description":"总分（0-100）"},"max_score":{"type":"number","minimum":0.0,"title":"Max Score","description":"满分","default":100.0},"feedback":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Feedback","description":"详细反馈（JSON 格式）","examples":[{"details":[],"improvements":["可以添加更多注释","建议使用类型提示"],"strengths":["逻辑清晰","命名规范"],"summary":"代码质量良好，但存在一些小问题"}]},"id":{"type":"integer","title":"Id","description":"评分结果 ID"},"submission_id":{"type":"integer","title":"Submission Id","description":"提交记录 ID"},"graded_at":{"type":"string","format":"date-time","title":"Graded At","description":"评分时间"},"graded_by":{"$ref":"#/components/schemas/GradedByEnum","description":"评分者类型"},"percentage_score":{"type":"number","title":"Percentage Score","description":"百分比得分"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"创建时间"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At","description":"更新时间"},"submission_external_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Submission External Id","description":"提交记录外部 ID"},"student_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Student Id","description":"学生数据库 ID"},"student_external_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Student External Id","description":"学生外部 ID"},"student_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Student Name","description":"学生姓名"},"assignment_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Assignment Id","description":"作业数据库 ID"},"assignment_external_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assignment External Id","description":"作业外部 ID"},"assignment_title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assignment Title","description":"作业标题"},"submitted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Submitted At","description":"提交时间"}},"type":"object","required":["overall_score","id","submission_id","graded_at","graded_by","percentage_score","created_at"],"title":"GradingResultWithSubmission","description":"包含提交详情的评分结果响应"},"GradingStatistics":{"properties":{"total_graded":{"type":"integer","title":"Total Graded","description":"已评分数量"},"average_score":{"type":"number","title":"Average Score","description":"平均分"},"highest_score":{"type":"number","title":"Highest Score","description":"最高分"},"lowest_score":{"type":"number","title":"Lowest Score","description":"最低分"},"ai_graded_count":{"type":"integer","title":"Ai Graded Count","description":"AI 评分数量"},"teacher_graded_count":{"type":"integer","title":"Teacher Graded Count","description":"教师评分数量"},"score_distribution":{"additionalProperties":{"type":"integer"},"type":"object","title":"Score Distribution","description":"分数分布（A: 90-100, B: 80-89, C: 70-79, D: 60-69, F: <60）"}},"type":"object","required":["total_graded","average_score","highest_score","lowest_score","ai_graded_count","teacher_graded_count"],"title":"GradingStatistics","description":"评分统计信息"},"GradingStatus":{"type":"string","enum":["pending","in_progress","completed","failed"],"title":"GradingStatus","description":"Status of grading process."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthResponse":{"properties":{"status":{"type":"string","title":"Status"},"version":{"type":"string","title":"Version"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"database_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Database Status"}},"type":"object","required":["status","version","timestamp"],"title":"HealthResponse","description":"Health check response schema."},"ImportInfo":{"properties":{"module":{"type":"string","title":"Module","description":"Module being imported"},"names":{"items":{"type":"string"},"type":"array","title":"Names","description":"Names imported from module"},"line":{"type":"integer","title":"Line","description":"Line number of import"},"is_from_import":{"type":"boolean","title":"Is From Import","description":"Whether it's a 'from x import y' style","default":false}},"type":"object","required":["module","line"],"title":"ImportInfo","description":"Information about an import statement."},"ImprovementSuggestion":{"properties":{"category":{"type":"string","title":"Category","description":"Category: content/logic/language/formatting"},"section_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Section Id","description":"Related section ID, if any"},"summary":{"type":"string","title":"Summary","description":"Short title/summary of the suggestion"},"details":{"type":"string","title":"Details","description":"Detailed explanation of the suggestion"}},"type":"object","required":["category","summary","details"],"title":"ImprovementSuggestion","description":"High-level improvement suggestion for the report."},"InnovationAnalysisResult":{"properties":{"novelty_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Novelty Score","description":"Overall novelty score (0-100)","default":0.0},"difference_summary":{"type":"string","title":"Difference Summary","description":"Summary of differences compared to existing reports","default":""},"innovation_points":{"items":{"$ref":"#/components/schemas/InnovationPoint"},"type":"array","title":"Innovation Points","description":"List of detected innovation points"}},"type":"object","title":"InnovationAnalysisResult","description":"Analysis result about novelty and innovation."},"InnovationPoint":{"properties":{"section_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Section Id","description":"Related section ID"},"highlight_text":{"type":"string","title":"Highlight Text","description":"Highlighted text that shows innovation"},"reason":{"type":"string","title":"Reason","description":"Why this is considered innovative"}},"type":"object","required":["highlight_text","reason"],"title":"InnovationPoint","description":"Single potential innovation point in the report."},"IssueSeverity":{"type":"string","enum":["error","warning","info","convention","refactor"],"title":"IssueSeverity","description":"Severity level for issues."},"IssueSeverity-Input":{"type":"string","enum":["error","warning","info","convention","refactor"],"title":"IssueSeverity","description":"Severity level for issues."},"KnowledgeBaseBulkCreate":{"properties":{"entries":{"items":{"$ref":"#/components/schemas/KnowledgeBaseCreate"},"type":"array","title":"Entries","description":"批量创建的条目列表"}},"type":"object","required":["entries"],"title":"KnowledgeBaseBulkCreate","description":"Schema for bulk creating knowledge base entries."},"KnowledgeBaseCategory":{"type":"string","enum":["syntax_error","logic_error","environment","algorithm","concept","debugging","best_practice","data_structure","other"],"title":"KnowledgeBaseCategory","description":"Categories for knowledge base entries."},"KnowledgeBaseCreate":{"properties":{"category":{"$ref":"#/components/schemas/KnowledgeBaseCategory","description":"问题分类"},"question":{"type":"string","minLength":5,"title":"Question","description":"问题描述"},"answer":{"type":"string","minLength":10,"title":"Answer","description":"标准答案"},"keywords":{"items":{"type":"string"},"type":"array","title":"Keywords","description":"关键词标签"},"difficulty_level":{"type":"integer","maximum":5.0,"minimum":1.0,"title":"Difficulty Level","description":"难度级别(1-5)","default":2},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language","description":"编程语言"}},"type":"object","required":["category","question","answer"],"title":"KnowledgeBaseCreate","description":"Schema for creating a knowledge base entry."},"KnowledgeBaseListResponse":{"properties":{"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"},"entries":{"items":{"$ref":"#/components/schemas/KnowledgeBaseResponse"},"type":"array","title":"Entries"}},"type":"object","required":["total","page","page_size","entries"],"title":"KnowledgeBaseListResponse","description":"Response for listing knowledge base entries."},"KnowledgeBaseResponse":{"properties":{"entry_id":{"type":"string","title":"Entry Id"},"category":{"$ref":"#/components/schemas/KnowledgeBaseCategory"},"question":{"type":"string","title":"Question"},"answer":{"type":"string","title":"Answer"},"keywords":{"items":{"type":"string"},"type":"array","title":"Keywords"},"difficulty_level":{"type":"integer","title":"Difficulty Level"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language"},"view_count":{"type":"integer","title":"View Count"},"helpful_count":{"type":"integer","title":"Helpful Count"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["entry_id","category","question","answer","keywords","difficulty_level","language","view_count","helpful_count","is_active","created_at","updated_at"],"title":"KnowledgeBaseResponse","description":"Response schema for a knowledge base entry."},"KnowledgeBaseSearchRequest":{"properties":{"query":{"type":"string","minLength":2,"title":"Query","description":"搜索关键词"},"category":{"anyOf":[{"$ref":"#/components/schemas/KnowledgeBaseCategory"},{"type":"null"}],"description":"分类过滤"},"difficulty_min":{"anyOf":[{"type":"integer","maximum":5.0,"minimum":1.0},{"type":"null"}],"title":"Difficulty Min","description":"最低难度"},"difficulty_max":{"anyOf":[{"type":"integer","maximum":5.0,"minimum":1.0},{"type":"null"}],"title":"Difficulty Max","description":"最高难度"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language","description":"编程语言过滤"},"limit":{"type":"integer","maximum":50.0,"minimum":1.0,"title":"Limit","description":"返回数量限制","default":10}},"type":"object","required":["query"],"title":"KnowledgeBaseSearchRequest","description":"Schema for searching knowledge base."},"KnowledgeBaseSearchResponse":{"properties":{"query":{"type":"string","title":"Query"},"total_results":{"type":"integer","title":"Total Results"},"results":{"items":{"$ref":"#/components/schemas/KnowledgeBaseSearchResult"},"type":"array","title":"Results"}},"type":"object","required":["query","total_results","results"],"title":"KnowledgeBaseSearchResponse","description":"Response for knowledge base search."},"KnowledgeBaseSearchResult":{"properties":{"entry":{"$ref":"#/components/schemas/KnowledgeBaseResponse"},"relevance_score":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Relevance Score","description":"相关度分数"},"matched_keywords":{"items":{"type":"string"},"type":"array","title":"Matched Keywords","description":"匹配的关键词"}},"type":"object","required":["entry","relevance_score"],"title":"KnowledgeBaseSearchResult","description":"Search result with relevance score."},"KnowledgeBaseStats":{"properties":{"total_entries":{"type":"integer","title":"Total Entries"},"active_entries":{"type":"integer","title":"Active Entries"},"entries_by_category":{"additionalProperties":true,"type":"object","title":"Entries By Category"},"entries_by_difficulty":{"additionalProperties":true,"type":"object","title":"Entries By Difficulty"},"entries_by_language":{"additionalProperties":true,"type":"object","title":"Entries By Language"},"total_views":{"type":"integer","title":"Total Views"},"total_helpful":{"type":"integer","title":"Total Helpful"},"average_helpfulness":{"type":"number","title":"Average Helpfulness"}},"type":"object","required":["total_entries","active_entries","entries_by_category","entries_by_difficulty","entries_by_language","total_views","total_helpful","average_helpfulness"],"title":"KnowledgeBaseStats","description":"Statistics for knowledge base."},"KnowledgeBaseUpdate":{"properties":{"category":{"anyOf":[{"$ref":"#/components/schemas/KnowledgeBaseCategory"},{"type":"null"}]},"question":{"anyOf":[{"type":"string","minLength":5},{"type":"null"}],"title":"Question"},"answer":{"anyOf":[{"type":"string","minLength":10},{"type":"null"}],"title":"Answer"},"keywords":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Keywords"},"difficulty_level":{"anyOf":[{"type":"integer","maximum":5.0,"minimum":1.0},{"type":"null"}],"title":"Difficulty Level"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"KnowledgeBaseUpdate","description":"Schema for updating a knowledge base entry."},"KnowledgeGap":{"properties":{"topic":{"type":"string","title":"Topic","description":"Topic with knowledge gap"},"frequency":{"type":"integer","title":"Frequency","description":"Number of related questions"},"difficulty_level":{"type":"string","title":"Difficulty Level","description":"Difficulty level of the topic"},"sample_questions":{"items":{"type":"string"},"type":"array","title":"Sample Questions","description":"Sample questions on this topic"}},"type":"object","required":["topic","frequency","difficulty_level"],"title":"KnowledgeGap","description":"Identified knowledge gap from Q&A analysis."},"LanguageQualityMetrics":{"properties":{"average_sentence_length":{"type":"number","minimum":0.0,"title":"Average Sentence Length","description":"Average sentence length (words)","default":0.0},"long_sentence_ratio":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Long Sentence Ratio","description":"Ratio of long sentences","default":0.0},"vocabulary_richness":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Vocabulary Richness","description":"Type-token ratio or similar metric","default":0.0},"grammar_issue_count":{"type":"integer","minimum":0.0,"title":"Grammar Issue Count","description":"Number of detected grammar issues","default":0},"academic_tone_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Academic Tone Score","description":"How academic/formal the writing style is (0-100)","default":0.0},"readability_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Readability Score","description":"Readability score (e.g., Flesch or custom 0-100)","default":0.0}},"type":"object","title":"LanguageQualityMetrics","description":"Metrics about language quality of the report."},"LearningPath":{"properties":{"path_id":{"type":"string","title":"Path Id","description":"Unique path ID"},"title":{"type":"string","title":"Title","description":"Learning path title"},"title_zh":{"type":"string","title":"Title Zh","description":"Title in Chinese"},"description":{"type":"string","title":"Description","description":"Path description"},"description_zh":{"type":"string","title":"Description Zh","description":"Description in Chinese"},"steps":{"items":{"$ref":"#/components/schemas/ProgressiveSuggestion"},"type":"array","title":"Steps"},"total_estimated_time":{"type":"string","title":"Total Estimated Time","description":"Total estimated time"},"total_estimated_time_zh":{"type":"string","title":"Total Estimated Time Zh","description":"Total time in Chinese"}},"type":"object","required":["path_id","title","title_zh","description","description_zh","total_estimated_time","total_estimated_time_zh"],"title":"LearningPath","description":"A structured learning path with progressive steps."},"LineMetrics":{"properties":{"total_lines":{"type":"integer","title":"Total Lines","description":"Total lines","default":0},"code_lines":{"type":"integer","title":"Code Lines","description":"Lines of code","default":0},"comment_lines":{"type":"integer","title":"Comment Lines","description":"Comment lines","default":0},"blank_lines":{"type":"integer","title":"Blank Lines","description":"Blank lines","default":0},"docstring_lines":{"type":"integer","title":"Docstring Lines","description":"Docstring lines","default":0},"comment_ratio":{"type":"number","title":"Comment Ratio","description":"Comment to code ratio percentage","default":0}},"type":"object","title":"LineMetrics","description":"Line-based code metrics."},"LintIssue":{"properties":{"rule_id":{"type":"string","title":"Rule Id","description":"Rule identifier (e.g., C0301)"},"rule_name":{"type":"string","title":"Rule Name","description":"Human-readable rule name","default":""},"category":{"type":"string","title":"Category","description":"Issue category (convention, refactor, warning, error)"},"severity":{"$ref":"#/components/schemas/IssueSeverity","description":"Issue severity"},"line":{"type":"integer","title":"Line","description":"Line number"},"column":{"type":"integer","title":"Column","description":"Column number","default":0},"message":{"type":"string","title":"Message","description":"Issue message"},"message_zh":{"type":"string","title":"Message Zh","description":"Issue message in Chinese","default":""},"suggestion":{"type":"string","title":"Suggestion","description":"Fix suggestion","default":""},"code_snippet":{"type":"string","title":"Code Snippet","description":"Relevant code snippet","default":""}},"type":"object","required":["rule_id","category","severity","line","message"],"title":"LintIssue","description":"A single linting issue."},"LintRequest":{"properties":{"code":{"type":"string","title":"Code","description":"Source code to lint"},"language":{"type":"string","title":"Language","description":"Programming language","default":"python"},"rules":{"items":{"$ref":"#/components/schemas/LintRuleConfig"},"type":"array","title":"Rules","description":"Rule configurations"},"config_file":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Config File","description":"Path to linter config file"}},"type":"object","required":["code"],"title":"LintRequest","description":"Request for linting analysis."},"LintResult":{"properties":{"analysis_id":{"type":"string","title":"Analysis Id","description":"Unique analysis identifier"},"analyzed_at":{"type":"string","format":"date-time","title":"Analyzed At","description":"Analysis timestamp"},"language":{"type":"string","title":"Language","description":"Programming language","default":"python"},"linter":{"type":"string","title":"Linter","description":"Linter used","default":"pylint"},"score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Score","description":"Linting score"},"total_issues":{"type":"integer","title":"Total Issues","description":"Total issues found","default":0},"errors":{"type":"integer","title":"Errors","description":"Error count","default":0},"warnings":{"type":"integer","title":"Warnings","description":"Warning count","default":0},"conventions":{"type":"integer","title":"Conventions","description":"Convention violation count","default":0},"refactors":{"type":"integer","title":"Refactors","description":"Refactor suggestion count","default":0},"issues":{"items":{"$ref":"#/components/schemas/LintIssue"},"type":"array","title":"Issues","description":"All linting issues"},"summary":{"type":"string","title":"Summary","description":"Analysis summary","default":""}},"type":"object","required":["analysis_id","analyzed_at","score"],"title":"LintResult","description":"Complete linting analysis result."},"LintRuleConfig":{"properties":{"rule_id":{"type":"string","title":"Rule Id","description":"Rule identifier"},"enabled":{"type":"boolean","title":"Enabled","description":"Whether rule is enabled","default":true},"severity":{"$ref":"#/components/schemas/IssueSeverity-Input","description":"Rule severity","default":"warning"},"options":{"additionalProperties":true,"type":"object","title":"Options","description":"Rule-specific options"}},"type":"object","required":["rule_id"],"title":"LintRuleConfig","description":"Configuration for a linting rule."},"LogicAnalysisResult":{"properties":{"section_order_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Section Order Score","description":"Score for section ordering (0-100)","default":0.0},"coherence_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Coherence Score","description":"Score for paragraph coherence (0-100)","default":0.0},"argumentation_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Argumentation Score","description":"Score for argumentation completeness (0-100)","default":0.0},"issues":{"items":{"$ref":"#/components/schemas/LogicIssue"},"type":"array","title":"Issues","description":"Detected logic issues"},"summary":{"type":"string","title":"Summary","description":"Natural language summary of logic analysis","default":""}},"type":"object","title":"LogicAnalysisResult","description":"Analysis result about logic and argumentation structure."},"LogicIssue":{"properties":{"issue_type":{"$ref":"#/components/schemas/LogicIssueType","description":"Type of logic issue"},"section_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Section Id","description":"Related section ID, if applicable"},"paragraph_index":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Paragraph Index","description":"Paragraph index inside the section (0-based)"},"description":{"type":"string","title":"Description","description":"Description of the issue"},"suggested_fix":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Suggested Fix","description":"Suggested fix for this issue"}},"type":"object","required":["issue_type","description"],"title":"LogicIssue","description":"Single logic issue detected in the report."},"LogicIssueType":{"type":"string","enum":["missing_evidence","logical_gap","weak_conclusion","redundant_content"],"title":"LogicIssueType"},"LoginRequest":{"properties":{"student_id":{"type":"string","maxLength":10,"minLength":10,"title":"Student Id","description":"学号（10位数字）"},"password":{"type":"string","minLength":1,"title":"Password"}},"type":"object","required":["student_id","password"],"title":"LoginRequest","description":"登录请求"},"LoginResponse":{"properties":{"user":{"$ref":"#/components/schemas/UserResponse"},"tokens":{"$ref":"#/components/schemas/Token"},"message":{"type":"string","title":"Message","default":"登录成功"}},"type":"object","required":["user","tokens"],"title":"LoginResponse","description":"登录响应"},"LogoutResponse":{"properties":{"message":{"type":"string","title":"Message","default":"登出成功"}},"type":"object","title":"LogoutResponse","description":"登出响应"},"MaintainabilityRating":{"type":"string","enum":["excellent","good","moderate","poor","very_poor"],"title":"MaintainabilityRating","description":"Maintainability rating based on MI score."},"MatchType":{"type":"string","enum":["exact","structural","token_sequence","renamed","partial"],"title":"MatchType","description":"Types of code matching."},"MultiDimensionalEvaluationRequest":{"properties":{"code":{"type":"string","title":"Code","description":"Source code to evaluate"},"language":{"type":"string","title":"Language","description":"Programming language","default":"python"},"student_id":{"type":"string","title":"Student Id","description":"Student ID"},"assignment_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assignment Id","description":"Assignment ID"},"include_class_comparison":{"type":"boolean","title":"Include Class Comparison","description":"Include class comparison","default":false},"class_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Class Id","description":"Class ID for comparison"}},"type":"object","required":["code","student_id"],"title":"MultiDimensionalEvaluationRequest","description":"Request for multi-dimensional evaluation."},"MultiDimensionalEvaluationResponse":{"properties":{"success":{"type":"boolean","title":"Success","default":true},"report":{"$ref":"#/components/schemas/AbilityAnalysisReport"},"message":{"type":"string","title":"Message","default":"多维度评估完成"},"processing_time_ms":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Processing Time Ms"}},"type":"object","required":["report"],"title":"MultiDimensionalEvaluationResponse","description":"Response for multi-dimensional evaluation."},"NamingConventionResult":{"properties":{"total_identifiers":{"type":"integer","title":"Total Identifiers","description":"Total identifiers checked","default":0},"violations":{"type":"integer","title":"Violations","description":"Number of violations","default":0},"details":{"items":{"$ref":"#/components/schemas/RuleViolation"},"type":"array","title":"Details"}},"type":"object","title":"NamingConventionResult","description":"Results of naming convention checks."},"OriginalityReport":{"properties":{"report_id":{"type":"string","title":"Report Id","description":"报告ID"},"submission_id":{"type":"string","title":"Submission Id","description":"提交ID"},"student_id":{"type":"string","title":"Student Id","description":"学生ID"},"student_name":{"type":"string","title":"Student Name","description":"学生姓名","default":""},"assignment_id":{"type":"string","title":"Assignment Id","description":"作业ID"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"创建时间"},"originality_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Originality Score","description":"原创性评分(0-100)"},"similarity_breakdown":{"additionalProperties":{"type":"number"},"type":"object","title":"Similarity Breakdown","description":"各算法相似度分解"},"detailed_matches":{"items":{"$ref":"#/components/schemas/DetailedCodeMatch"},"type":"array","title":"Detailed Matches","description":"详细的代码匹配列表"},"similar_submissions":{"items":{"type":"string"},"type":"array","title":"Similar Submissions","description":"相似的提交ID列表"},"detected_transformations":{"items":{"$ref":"#/components/schemas/CodeTransformationType"},"type":"array","title":"Detected Transformations","description":"检测到的代码变换类型"},"improvement_suggestions":{"items":{"type":"string"},"type":"array","title":"Improvement Suggestions","description":"改进建议列表"},"summary":{"type":"string","title":"Summary","description":"分析总结","default":""},"risk_level":{"$ref":"#/components/schemas/SimilarityLevel","description":"风险等级","default":"none"}},"type":"object","required":["report_id","submission_id","student_id","assignment_id","created_at","originality_score"],"title":"OriginalityReport","description":"原创性分析报告"},"PendingQuestion":{"properties":{"log_id":{"type":"string","title":"Log Id"},"question":{"type":"string","title":"Question"},"user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"},"user_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Name"},"detected_category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Detected Category"},"detected_difficulty":{"type":"integer","title":"Detected Difficulty"},"difficulty_label":{"type":"string","title":"Difficulty Label"},"match_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Match Score"},"priority":{"type":"integer","title":"Priority"},"is_urgent":{"type":"boolean","title":"Is Urgent"},"triage_result":{"type":"string","title":"Triage Result"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"waiting_time_seconds":{"type":"number","title":"Waiting Time Seconds"}},"type":"object","required":["log_id","question","detected_difficulty","difficulty_label","priority","is_urgent","triage_result","created_at","waiting_time_seconds"],"title":"PendingQuestion","description":"待处理问题"},"PendingQueueResponse":{"properties":{"total":{"type":"integer","title":"Total"},"urgent_count":{"type":"integer","title":"Urgent Count"},"questions":{"items":{"$ref":"#/components/schemas/PendingQuestion"},"type":"array","title":"Questions"}},"type":"object","required":["total","urgent_count","questions"],"title":"PendingQueueResponse","description":"待处理队列响应"},"PerformanceIssue":{"properties":{"issue_type":{"$ref":"#/components/schemas/PerformanceIssueType","description":"Type of performance issue"},"severity":{"$ref":"#/components/schemas/IssueSeverity","description":"Issue severity"},"line":{"type":"integer","title":"Line","description":"Line number"},"column":{"type":"integer","title":"Column","description":"Column number","default":0},"code_snippet":{"type":"string","title":"Code Snippet","description":"Problematic code snippet","default":""},"description":{"type":"string","title":"Description","description":"Issue description"},"description_zh":{"type":"string","title":"Description Zh","description":"Issue description in Chinese","default":""},"impact":{"type":"string","title":"Impact","description":"Performance impact","default":""},"suggestion":{"type":"string","title":"Suggestion","description":"How to fix the issue","default":""}},"type":"object","required":["issue_type","severity","line","description"],"title":"PerformanceIssue","description":"A performance issue or anti-pattern."},"PerformanceIssueType":{"type":"string","enum":["infinite_loop","inefficient_algorithm","global_variable","large_file_read","blocking_operation","memory_leak","repeated_computation","nested_loop_lookup"],"title":"PerformanceIssueType","description":"Types of performance issues."},"PerformanceRequest":{"properties":{"code":{"type":"string","title":"Code","description":"Source code to analyze"},"language":{"type":"string","title":"Language","description":"Programming language","default":"python"},"check_best_practices":{"type":"boolean","title":"Check Best Practices","description":"Include best practices check","default":true}},"type":"object","required":["code"],"title":"PerformanceRequest","description":"Request for performance analysis."},"PerformanceResult":{"properties":{"analysis_id":{"type":"string","title":"Analysis Id","description":"Unique analysis identifier"},"analyzed_at":{"type":"string","format":"date-time","title":"Analyzed At","description":"Analysis timestamp"},"language":{"type":"string","title":"Language","description":"Programming language","default":"python"},"score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Score","description":"Performance score"},"total_issues":{"type":"integer","title":"Total Issues","description":"Total performance issues","default":0},"performance_issues":{"items":{"$ref":"#/components/schemas/PerformanceIssue"},"type":"array","title":"Performance Issues","description":"Performance issues"},"best_practice_violations":{"items":{"$ref":"#/components/schemas/BestPracticeViolation"},"type":"array","title":"Best Practice Violations","description":"Best practice violations"},"summary":{"type":"string","title":"Summary","description":"Performance analysis summary","default":""},"recommendations":{"items":{"type":"string"},"type":"array","title":"Recommendations","description":"Performance recommendations"}},"type":"object","required":["analysis_id","analyzed_at","score"],"title":"PerformanceResult","description":"Complete performance analysis result."},"PerformanceTrend":{"type":"string","enum":["improving","declining","stable","fluctuating"],"title":"PerformanceTrend","description":"Student performance trend."},"PersonalizedFeedback":{"properties":{"feedback_id":{"type":"string","title":"Feedback Id","description":"Unique feedback ID"},"student_id":{"type":"string","title":"Student Id","description":"Student ID"},"submission_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Submission Id"},"generated_at":{"type":"string","format":"date-time","title":"Generated At"},"overall_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Overall Score"},"overall_grade":{"type":"string","title":"Overall Grade","description":"Letter grade A-F"},"summary":{"type":"string","title":"Summary","description":"Overall feedback summary"},"summary_zh":{"type":"string","title":"Summary Zh","description":"Summary in Chinese"},"personalized_message":{"type":"string","title":"Personalized Message","description":"Personalized message based on history"},"personalized_message_zh":{"type":"string","title":"Personalized Message Zh","description":"Personalized message in Chinese"},"history_analysis":{"anyOf":[{"$ref":"#/components/schemas/StudentHistoryAnalysis"},{"type":"null"}]},"categories":{"items":{"$ref":"#/components/schemas/CategoryFeedback"},"type":"array","title":"Categories"},"suggestions":{"items":{"$ref":"#/components/schemas/ProgressiveSuggestion"},"type":"array","title":"Suggestions"},"learning_path":{"anyOf":[{"$ref":"#/components/schemas/LearningPath"},{"type":"null"}]},"encouragement":{"type":"string","title":"Encouragement","description":"Encouraging message","default":""},"encouragement_zh":{"type":"string","title":"Encouragement Zh","description":"Encouragement in Chinese","default":""},"tone":{"$ref":"#/components/schemas/FeedbackTone","default":"professional"},"detail_level":{"$ref":"#/components/schemas/FeedbackDetailLevel","default":"standard"},"language":{"type":"string","title":"Language","default":"python"}},"type":"object","required":["feedback_id","student_id","overall_score","overall_grade","summary","summary_zh","personalized_message","personalized_message_zh"],"title":"PersonalizedFeedback","description":"Complete personalized feedback with history context."},"PersonalizedFeedbackRequest":{"properties":{"code":{"type":"string","title":"Code","description":"Source code to analyze"},"language":{"type":"string","title":"Language","description":"Programming language","default":"python"},"student_id":{"type":"string","title":"Student Id","description":"Student ID for historical context"},"submission_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Submission Id","description":"Current submission ID"},"assignment_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assignment Id","description":"Assignment ID"},"detail_level":{"$ref":"#/components/schemas/FeedbackDetailLevel","description":"Detail level","default":"standard"},"tone":{"$ref":"#/components/schemas/FeedbackTone","description":"Feedback tone","default":"professional"},"include_learning_path":{"type":"boolean","title":"Include Learning Path","description":"Include progressive learning path","default":true},"include_history_analysis":{"type":"boolean","title":"Include History Analysis","description":"Include historical analysis","default":true},"max_suggestions":{"type":"integer","maximum":20.0,"minimum":1.0,"title":"Max Suggestions","description":"Maximum suggestions","default":5}},"type":"object","required":["code","student_id"],"title":"PersonalizedFeedbackRequest","description":"Request for personalized feedback generation."},"PersonalizedFeedbackResponse":{"properties":{"success":{"type":"boolean","title":"Success","default":true},"feedback":{"$ref":"#/components/schemas/PersonalizedFeedback"},"message":{"type":"string","title":"Message","default":"个性化评语生成成功"},"processing_time_ms":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Processing Time Ms"}},"type":"object","required":["feedback"],"title":"PersonalizedFeedbackResponse","description":"Response for personalized feedback generation."},"PlagiarismCheckRequest":{"properties":{"submission_id":{"type":"string","title":"Submission Id","description":"Submission ID"},"student_id":{"type":"string","title":"Student Id","description":"Student ID of submission to check"},"course_id":{"type":"string","title":"Course Id","description":"Course ID"},"code":{"type":"string","title":"Code","description":"Code to check for plagiarism"},"compare_with_history":{"type":"boolean","title":"Compare With History","description":"Compare with historical submissions","default":true},"similarity_threshold":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Similarity Threshold","description":"Threshold for flagging (0-1)","default":0.7}},"type":"object","required":["submission_id","student_id","course_id","code"],"title":"PlagiarismCheckRequest","description":"Request for plagiarism check."},"PlagiarismReport":{"properties":{"report_id":{"type":"string","title":"Report Id","description":"Unique report identifier"},"submission_id":{"type":"string","title":"Submission Id","description":"Submission ID checked"},"checked_at":{"type":"string","format":"date-time","title":"Checked At","description":"Timestamp of check"},"overall_similarity":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Overall Similarity","description":"Highest similarity found (0-1)"},"similarity_level":{"$ref":"#/components/schemas/SimilarityLevel","description":"Overall similarity level"},"is_flagged":{"type":"boolean","title":"Is Flagged","description":"Whether submission is flagged"},"comparisons":{"items":{"$ref":"#/components/schemas/SubmissionComparison"},"type":"array","title":"Comparisons"},"summary":{"type":"string","title":"Summary","description":"Human-readable summary","default":""}},"type":"object","required":["report_id","submission_id","checked_at","overall_similarity","similarity_level","is_flagged"],"title":"PlagiarismReport","description":"Comprehensive plagiarism detection report."},"PlagiarismResult":{"properties":{"similarity_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Similarity Score","description":"Overall similarity percentage"},"is_plagiarized":{"type":"boolean","title":"Is Plagiarized","description":"Whether plagiarism is detected"},"similar_sources":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Similar Sources","description":"List of similar sources found"},"analysis_details":{"type":"string","title":"Analysis Details","description":"Detailed analysis explanation","default":""}},"type":"object","required":["similarity_score","is_plagiarized"],"title":"PlagiarismResult","description":"Result of plagiarism detection."},"PlagiarismSettings":{"properties":{"similarity_threshold":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Similarity Threshold","description":"相似度阈值","default":0.7},"algorithms":{"items":{"$ref":"#/components/schemas/SimilarityAlgorithm"},"type":"array","title":"Algorithms","description":"启用的算法"},"ast_weight":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Ast Weight","description":"AST算法权重","default":0.3},"token_weight":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Token Weight","description":"Token算法权重","default":0.25},"text_weight":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Text Weight","description":"文本算法权重","default":0.2},"semantic_weight":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Semantic Weight","description":"语义算法权重","default":0.15},"order_invariant_weight":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Order Invariant Weight","description":"顺序不变算法权重","default":0.1},"detect_renaming":{"type":"boolean","title":"Detect Renaming","description":"检测变量/函数重命名","default":true},"detect_refactoring":{"type":"boolean","title":"Detect Refactoring","description":"检测代码重构","default":true}},"type":"object","title":"PlagiarismSettings","description":"查重设置"},"ProgrammingLanguage-Input":{"type":"string","enum":["python","java","cpp","c","javascript","typescript"],"title":"ProgrammingLanguage","description":"Supported programming languages."},"ProgrammingLanguage-Output":{"type":"string","enum":["python","java","javascript","typescript","c","cpp","jsx","tsx","unknown"],"title":"ProgrammingLanguage","description":"Supported programming languages."},"ProgressiveSuggestion":{"properties":{"suggestion_id":{"type":"string","title":"Suggestion Id","description":"Unique suggestion ID"},"difficulty":{"$ref":"#/components/schemas/SuggestionDifficulty","description":"Difficulty level"},"title":{"type":"string","title":"Title","description":"Suggestion title"},"title_zh":{"type":"string","title":"Title Zh","description":"Suggestion title in Chinese"},"description":{"type":"string","title":"Description","description":"Detailed description"},"description_zh":{"type":"string","title":"Description Zh","description":"Description in Chinese"},"estimated_time":{"type":"string","title":"Estimated Time","description":"Estimated time to implement (e.g., '5 minutes', '1 hour')"},"estimated_time_zh":{"type":"string","title":"Estimated Time Zh","description":"Estimated time in Chinese"},"code_example":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Code Example","description":"Example code if applicable"},"learning_resources":{"items":{"type":"string"},"type":"array","title":"Learning Resources","description":"Related learning resources"},"order":{"type":"integer","title":"Order","description":"Order in the learning path","default":1}},"type":"object","required":["suggestion_id","difficulty","title","title_zh","description","description_zh","estimated_time","estimated_time_zh"],"title":"ProgressiveSuggestion","description":"A progressive improvement suggestion with difficulty and time estimate."},"QAAnalyticsReport":{"properties":{"course_id":{"type":"string","title":"Course Id"},"period_start":{"type":"string","format":"date-time","title":"Period Start"},"period_end":{"type":"string","format":"date-time","title":"Period End"},"total_questions":{"type":"integer","title":"Total Questions"},"ai_resolved_count":{"type":"integer","title":"Ai Resolved Count"},"teacher_resolved_count":{"type":"integer","title":"Teacher Resolved Count"},"average_response_time_seconds":{"type":"number","title":"Average Response Time Seconds"},"knowledge_gaps":{"items":{"$ref":"#/components/schemas/KnowledgeGap"},"type":"array","title":"Knowledge Gaps"},"common_topics":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Common Topics"},"recommendations":{"items":{"type":"string"},"type":"array","title":"Recommendations","description":"Teaching recommendations"}},"type":"object","required":["course_id","period_start","period_end","total_questions","ai_resolved_count","teacher_resolved_count","average_response_time_seconds"],"title":"QAAnalyticsReport","description":"Analytics report from Q&A records."},"QALogCreate":{"properties":{"user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"},"user_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Name"},"session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"},"question":{"type":"string","minLength":1,"title":"Question","description":"用户问题"}},"type":"object","required":["question"],"title":"QALogCreate","description":"创建问答日志请求"},"QALogResponse":{"properties":{"log_id":{"type":"string","title":"Log Id"},"user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"},"user_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Name"},"session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"},"question":{"type":"string","title":"Question"},"question_keywords":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Question Keywords"},"detected_category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Detected Category"},"detected_difficulty":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Detected Difficulty"},"matched_entry_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Matched Entry Id"},"match_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Match Score"},"match_method":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Match Method"},"answer":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Answer"},"answer_source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Answer Source"},"triage_result":{"anyOf":[{"$ref":"#/components/schemas/TriageResultEnum"},{"type":"null"}]},"assigned_to":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned To"},"priority":{"type":"integer","title":"Priority","default":0},"is_urgent":{"type":"boolean","title":"Is Urgent","default":false},"status":{"$ref":"#/components/schemas/QALogStatusEnum"},"is_helpful":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Helpful"},"feedback_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Feedback Text"},"handled_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Handled By"},"handled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Handled At"},"response_time_seconds":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Response Time Seconds"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["log_id","question","status","created_at","updated_at"],"title":"QALogResponse","description":"问答日志响应"},"QALogStats":{"properties":{"total_questions":{"type":"integer","title":"Total Questions"},"auto_replied":{"type":"integer","title":"Auto Replied"},"to_assistant":{"type":"integer","title":"To Assistant"},"to_teacher":{"type":"integer","title":"To Teacher"},"pending":{"type":"integer","title":"Pending"},"avg_response_time":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Response Time"},"helpful_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Helpful Rate"},"questions_by_category":{"additionalProperties":true,"type":"object","title":"Questions By Category"},"questions_by_difficulty":{"additionalProperties":true,"type":"object","title":"Questions By Difficulty"}},"type":"object","required":["total_questions","auto_replied","to_assistant","to_teacher","pending","questions_by_category","questions_by_difficulty"],"title":"QALogStats","description":"问答日志统计"},"QALogStatusEnum":{"type":"string","enum":["answered","pending","escalated","closed"],"title":"QALogStatusEnum","description":"问答日志状态枚举"},"QuestionCategory":{"type":"string","enum":["basic","intermediate","advanced","administrative"],"title":"QuestionCategory","description":"Categories of questions."},"QuestionRequest":{"properties":{"student_id":{"type":"string","title":"Student Id","description":"Unique identifier for the student"},"course_id":{"type":"string","title":"Course Id","description":"Course identifier"},"question":{"type":"string","minLength":1,"title":"Question","description":"The question text"},"context":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Context","description":"Additional context for the question"},"tags":{"items":{"type":"string"},"type":"array","title":"Tags","description":"Tags for categorization"}},"type":"object","required":["student_id","course_id","question"],"title":"QuestionRequest","description":"Schema for submitting a question."},"QuestionResponse":{"properties":{"question_id":{"type":"string","title":"Question Id"},"student_id":{"type":"string","title":"Student Id"},"course_id":{"type":"string","title":"Course Id"},"question":{"type":"string","title":"Question"},"category":{"$ref":"#/components/schemas/QuestionCategory"},"status":{"$ref":"#/components/schemas/QuestionStatus"},"ai_answer":{"anyOf":[{"$ref":"#/components/schemas/AIAnswer"},{"type":"null"}]},"teacher_answer":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Teacher Answer"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"answered_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Answered At"}},"type":"object","required":["question_id","student_id","course_id","question","category","status","created_at"],"title":"QuestionResponse","description":"Response for a submitted question."},"QuestionStatus":{"type":"string","enum":["pending","ai_answered","escalated","teacher_answered","resolved"],"title":"QuestionStatus","description":"Status of a question."},"RadarChartData":{"properties":{"labels":{"items":{"type":"string"},"type":"array","title":"Labels","description":"Dimension labels"},"labels_zh":{"items":{"type":"string"},"type":"array","title":"Labels Zh","description":"Labels in Chinese"},"student_scores":{"items":{"type":"number"},"type":"array","title":"Student Scores","description":"Student's scores"},"class_average":{"anyOf":[{"items":{"type":"number"},"type":"array"},{"type":"null"}],"title":"Class Average","description":"Class average scores"},"max_scores":{"items":{"type":"number"},"type":"array","title":"Max Scores","description":"Maximum scores"}},"type":"object","required":["labels","labels_zh","student_scores"],"title":"RadarChartData","description":"Data for radar chart visualization."},"ReferenceEntry":{"properties":{"raw_text":{"type":"string","title":"Raw Text","description":"Original reference text"},"detected_format":{"$ref":"#/components/schemas/ReferenceFormat","description":"Detected reference style","default":"unknown"},"is_valid":{"type":"boolean","title":"Is Valid","description":"Whether the reference matches the expected format","default":false},"problems":{"items":{"type":"string"},"type":"array","title":"Problems","description":"Detected issues in this reference entry"}},"type":"object","required":["raw_text"],"title":"ReferenceEntry","description":"Single reference item in the references section."},"ReferenceFormat":{"type":"string","enum":["apa","mla","gbt7714","unknown"],"title":"ReferenceFormat"},"ReferenceStats":{"properties":{"total_count":{"type":"integer","minimum":0.0,"title":"Total Count","description":"Total number of reference entries","default":0},"valid_count":{"type":"integer","minimum":0.0,"title":"Valid Count","description":"Number of entries that match expected format","default":0},"expected_min_count":{"type":"integer","minimum":0.0,"title":"Expected Min Count","description":"Expected minimum references for this assignment","default":0},"format_compliance_ratio":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Format Compliance Ratio","description":"Ratio of properly formatted references","default":0.0},"evaluation":{"type":"string","title":"Evaluation","description":"Overall evaluation of reference section","default":""}},"type":"object","title":"ReferenceStats","description":"Statistics for references section."},"RefreshTokenRequest":{"properties":{"refresh_token":{"type":"string","minLength":1,"title":"Refresh Token"}},"type":"object","required":["refresh_token"],"title":"RefreshTokenRequest","description":"刷新 Token 请求"},"RefreshTokenResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"refresh_token":{"type":"string","title":"Refresh Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"},"expires_in":{"type":"integer","title":"Expires In"}},"type":"object","required":["access_token","refresh_token","expires_in"],"title":"RefreshTokenResponse","description":"刷新 Token 响应"},"RegisterRequest":{"properties":{"student_id":{"type":"string","maxLength":10,"minLength":10,"title":"Student Id","description":"学号（10位数字）"},"role":{"type":"string","pattern":"^(student|teacher|admin)$","title":"Role","default":"student"},"password":{"type":"string","maxLength":100,"minLength":6,"title":"Password"},"name":{"type":"string","maxLength":255,"minLength":2,"title":"Name"}},"type":"object","required":["student_id","password","name"],"title":"RegisterRequest","description":"注册请求 (继承 UserCreate，student_id 已在 UserBase 中定义为必填)"},"RegisterResponse":{"properties":{"user":{"$ref":"#/components/schemas/UserResponse"},"tokens":{"$ref":"#/components/schemas/Token"},"message":{"type":"string","title":"Message","default":"注册成功"}},"type":"object","required":["user","tokens"],"title":"RegisterResponse","description":"注册响应"},"ReportAnalysisRequest":{"properties":{"file_name":{"type":"string","title":"File Name","description":"Original report file name"},"file_type":{"$ref":"#/components/schemas/ReportFileType","description":"Report file type"},"content":{"type":"string","title":"Content","description":"Plain text content of the report"},"language":{"anyOf":[{"$ref":"#/components/schemas/ReportLanguage"},{"type":"null"}],"description":"Optional language hint for analysis"},"reference_style_preference":{"anyOf":[{"$ref":"#/components/schemas/ReferenceFormat"},{"type":"null"}],"description":"Preferred reference style for formatting checks"}},"type":"object","required":["file_name","file_type","content"],"title":"ReportAnalysisRequest","description":"Request body for project report analysis.\n\nNote: when used with file upload endpoints, most fields will be inferred\nfrom the uploaded file. This schema is mainly for direct text-based analysis."},"ReportAnalysisResponse":{"properties":{"report_id":{"type":"string","title":"Report Id","description":"Unique report analysis ID"},"file_name":{"type":"string","title":"File Name","description":"Original report file name"},"analyzed_at":{"type":"string","format":"date-time","title":"Analyzed At","description":"Analysis timestamp"},"parsed":{"$ref":"#/components/schemas/ReportParseResult","description":"Parsed report structure and text"},"quality":{"$ref":"#/components/schemas/ReportQualityMetrics","description":"Completeness and quality metrics"},"logic":{"$ref":"#/components/schemas/LogicAnalysisResult","description":"Logic and argumentation analysis"},"innovation":{"$ref":"#/components/schemas/InnovationAnalysisResult","description":"Innovation and novelty analysis"},"language_quality":{"$ref":"#/components/schemas/LanguageQualityMetrics","description":"Language quality metrics"},"formatting":{"$ref":"#/components/schemas/FormattingCheckResult","description":"Formatting and style check result"},"suggestions":{"items":{"$ref":"#/components/schemas/ImprovementSuggestion"},"type":"array","title":"Suggestions","description":"High-level improvement suggestions"},"overall_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Overall Score","description":"Overall quality score (0-100)"},"summary":{"type":"string","title":"Summary","description":"Natural language summary of the analysis","default":""}},"type":"object","required":["report_id","file_name","parsed","quality","logic","innovation","language_quality","formatting","overall_score"],"title":"ReportAnalysisResponse","description":"Full analysis result for a project report."},"ReportFeedback":{"properties":{"completeness_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Completeness Score","description":"Score for completeness"},"innovation_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Innovation Score","description":"Score for innovation"},"clarity_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Clarity Score","description":"Score for clarity"},"comments":{"items":{"type":"string"},"type":"array","title":"Comments","description":"Detailed feedback comments"},"revision_suggestions":{"items":{"type":"string"},"type":"array","title":"Revision Suggestions","description":"Revision suggestions"}},"type":"object","required":["completeness_score","innovation_score","clarity_score"],"title":"ReportFeedback","description":"Feedback for report/project assignments."},"ReportFileType":{"type":"string","enum":["pdf","docx","markdown"],"title":"ReportFileType"},"ReportLanguage":{"type":"string","enum":["zh","en","mixed"],"title":"ReportLanguage"},"ReportParseResult":{"properties":{"file_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"File Id","description":"Optional file identifier"},"file_name":{"type":"string","title":"File Name","description":"Original file name"},"file_type":{"$ref":"#/components/schemas/ReportFileType","description":"Report file type"},"language":{"$ref":"#/components/schemas/ReportLanguage","description":"Detected report language","default":"mixed"},"sections":{"items":{"$ref":"#/components/schemas/ReportSection"},"type":"array","title":"Sections","description":"Parsed section tree (flattened list)"},"references":{"items":{"$ref":"#/components/schemas/ReferenceEntry"},"type":"array","title":"References","description":"Parsed references list"},"raw_text":{"type":"string","title":"Raw Text","description":"Full plain text of the report"}},"type":"object","required":["file_name","file_type","raw_text"],"title":"ReportParseResult","description":"Unified result of parsing a project report file."},"ReportQualityMetrics":{"properties":{"total_word_count":{"type":"integer","minimum":0.0,"title":"Total Word Count","description":"Total word count of the report"},"word_count_evaluation":{"type":"string","title":"Word Count Evaluation","description":"Word count evaluation: too_short/normal/too_long"},"required_sections_present":{"additionalProperties":{"type":"boolean"},"propertyNames":{"$ref":"#/components/schemas/SectionType"},"type":"object","title":"Required Sections Present","description":"Whether each required section is present"},"chapter_length_stats":{"items":{"$ref":"#/components/schemas/ChapterLengthStats"},"type":"array","title":"Chapter Length Stats","description":"Per-chapter length statistics"},"figure_table_stats":{"$ref":"#/components/schemas/FigureTableStats","description":"Figure/table statistics"},"reference_stats":{"$ref":"#/components/schemas/ReferenceStats","description":"Reference statistics"},"overall_completeness_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Overall Completeness Score","description":"Overall completeness score (0-100)"}},"type":"object","required":["total_word_count","word_count_evaluation","overall_completeness_score"],"title":"ReportQualityMetrics","description":"Quality metrics focusing on completeness and structure."},"ReportSection":{"properties":{"id":{"type":"string","title":"Id","description":"Section ID"},"title":{"type":"string","title":"Title","description":"Section title","default":""},"level":{"type":"integer","maximum":6.0,"minimum":1.0,"title":"Level","description":"Heading level (1-6)","default":1},"section_type":{"$ref":"#/components/schemas/SectionType","description":"Detected section type","default":"other"},"order_index":{"type":"integer","minimum":0.0,"title":"Order Index","description":"Order index in document"},"text":{"type":"string","title":"Text","description":"Plain text content of section","default":""},"children":{"items":{"$ref":"#/components/schemas/ReportSection"},"type":"array","title":"Children","description":"Subsections"}},"type":"object","required":["id","order_index"],"title":"ReportSection","description":"A logical section of the project report."},"RevokeAllTokensResponse":{"properties":{"message":{"type":"string","title":"Message","default":"所有设备已登出"},"revoked_count":{"type":"integer","title":"Revoked Count"}},"type":"object","required":["revoked_count"],"title":"RevokeAllTokensResponse","description":"撤销所有 Token 响应"},"RubricCreate":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name","description":"评分标准名称"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"评分标准描述"},"criteria":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Criteria","description":"评分标准详情（JSON 格式，键值对结构）","examples":[{"correctness":{"description":"代码功能正确性","max_points":50,"weight":0.5},"quality":{"description":"代码质量和风格","max_points":50,"weight":0.5}}]},"max_score":{"type":"number","minimum":0.0,"title":"Max Score","description":"最高分数","default":100.0},"rubric_id":{"type":"string","maxLength":50,"minLength":1,"title":"Rubric Id","description":"唯一标识符"}},"type":"object","required":["name","rubric_id"],"title":"RubricCreate","description":"创建 Rubric 的 schema"},"RubricListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/RubricResponse"},"type":"array","title":"Items","description":"Rubric 列表"},"total":{"type":"integer","title":"Total","description":"总数量"},"page":{"type":"integer","title":"Page","description":"当前页码"},"page_size":{"type":"integer","title":"Page Size","description":"每页数量"},"total_pages":{"type":"integer","title":"Total Pages","description":"总页数"}},"type":"object","required":["total","page","page_size","total_pages"],"title":"RubricListResponse","description":"Rubric 分页列表响应 schema"},"RubricResponse":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name","description":"评分标准名称"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"评分标准描述"},"criteria":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Criteria","description":"评分标准详情（JSON 格式，键值对结构）","examples":[{"correctness":{"description":"代码功能正确性","max_points":50,"weight":0.5},"quality":{"description":"代码质量和风格","max_points":50,"weight":0.5}}]},"max_score":{"type":"number","minimum":0.0,"title":"Max Score","description":"最高分数","default":100.0},"id":{"type":"integer","title":"Id","description":"数据库 ID"},"rubric_id":{"type":"string","title":"Rubric Id","description":"唯一标识符"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"创建时间"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At","description":"更新时间"}},"type":"object","required":["name","id","rubric_id","created_at"],"title":"RubricResponse","description":"Rubric 响应 schema"},"RubricUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Name","description":"评分标准名称"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"评分标准描述"},"criteria":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Criteria","description":"评分标准详情（JSON 格式）"},"max_score":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Max Score","description":"最高分数"}},"type":"object","title":"RubricUpdate","description":"更新 Rubric 的 schema（所有字段可选）"},"RuleCategory":{"type":"string","enum":["style","complexity","best_practices","security","naming","structure"],"title":"RuleCategory","description":"Categories for analysis rules."},"RuleConfiguration":{"properties":{"rule_id":{"type":"string","title":"Rule Id","description":"Rule ID to configure"},"enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Enabled","description":"Override enabled state"},"severity":{"anyOf":[{"$ref":"#/components/schemas/RuleSeverity"},{"type":"null"}],"description":"Override severity"},"thresholds":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Thresholds","description":"Override thresholds"}},"type":"object","required":["rule_id"],"title":"RuleConfiguration","description":"User-configurable rule settings."},"RuleSeverity":{"type":"string","enum":["error","warning","info"],"title":"RuleSeverity","description":"Severity levels for analysis rules."},"RuleViolation":{"properties":{"rule_id":{"type":"string","title":"Rule Id","description":"ID of violated rule"},"rule_name":{"type":"string","title":"Rule Name","description":"Name of violated rule"},"category":{"$ref":"#/components/schemas/RuleCategory","description":"Rule category"},"severity":{"$ref":"#/components/schemas/RuleSeverity","description":"Violation severity"},"line":{"type":"integer","title":"Line","description":"Line number"},"column":{"type":"integer","title":"Column","description":"Column number","default":0},"end_line":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"End Line","description":"End line number"},"end_column":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"End Column","description":"End column number"},"message":{"type":"string","title":"Message","description":"Violation message"},"suggestion":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Suggestion","description":"Fix suggestion"},"code_snippet":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Code Snippet","description":"Relevant code snippet"}},"type":"object","required":["rule_id","rule_name","category","severity","line","message"],"title":"RuleViolation","description":"A single rule violation found during analysis."},"SectionType":{"type":"string","enum":["abstract","introduction","related_work","method","results","discussion","conclusion","references","appendix","other"],"title":"SectionType"},"SecurityIssue":{"properties":{"issue_id":{"type":"string","title":"Issue Id","description":"Issue identifier"},"test_id":{"type":"string","title":"Test Id","description":"Bandit test ID (e.g., B101)"},"test_name":{"type":"string","title":"Test Name","description":"Test name"},"severity":{"$ref":"#/components/schemas/SecuritySeverity","description":"Issue severity"},"confidence":{"type":"string","title":"Confidence","description":"Confidence level (HIGH, MEDIUM, LOW)"},"line":{"type":"integer","title":"Line","description":"Line number"},"column":{"type":"integer","title":"Column","description":"Column number","default":0},"code_snippet":{"type":"string","title":"Code Snippet","description":"Vulnerable code snippet","default":""},"issue_text":{"type":"string","title":"Issue Text","description":"Issue description"},"issue_text_zh":{"type":"string","title":"Issue Text Zh","description":"Issue description in Chinese","default":""},"more_info":{"type":"string","title":"More Info","description":"Link to more information","default":""},"recommendation":{"type":"string","title":"Recommendation","description":"How to fix the issue","default":""}},"type":"object","required":["issue_id","test_id","test_name","severity","confidence","line","issue_text"],"title":"SecurityIssue","description":"A security vulnerability or issue."},"SecurityRequest":{"properties":{"code":{"type":"string","title":"Code","description":"Source code to analyze"},"language":{"type":"string","title":"Language","description":"Programming language","default":"python"},"severity_threshold":{"$ref":"#/components/schemas/SecuritySeverity","description":"Minimum severity to report","default":"low"}},"type":"object","required":["code"],"title":"SecurityRequest","description":"Request for security analysis."},"SecurityResult":{"properties":{"analysis_id":{"type":"string","title":"Analysis Id","description":"Unique analysis identifier"},"analyzed_at":{"type":"string","format":"date-time","title":"Analyzed At","description":"Analysis timestamp"},"language":{"type":"string","title":"Language","description":"Programming language","default":"python"},"score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Score","description":"Security score"},"total_issues":{"type":"integer","title":"Total Issues","description":"Total security issues","default":0},"high_severity":{"type":"integer","title":"High Severity","description":"High severity issues","default":0},"medium_severity":{"type":"integer","title":"Medium Severity","description":"Medium severity issues","default":0},"low_severity":{"type":"integer","title":"Low Severity","description":"Low severity issues","default":0},"issues":{"items":{"$ref":"#/components/schemas/SecurityIssue"},"type":"array","title":"Issues","description":"All security issues"},"summary":{"type":"string","title":"Summary","description":"Security analysis summary","default":""},"recommendations":{"items":{"type":"string"},"type":"array","title":"Recommendations","description":"Security recommendations"}},"type":"object","required":["analysis_id","analyzed_at","score"],"title":"SecurityResult","description":"Complete security analysis result."},"SecuritySeverity":{"type":"string","enum":["high","medium","low","info"],"title":"SecuritySeverity","description":"Security issue severity."},"SimilarityAlgorithm":{"type":"string","enum":["ast","levenshtein","cosine","token","combined"],"title":"SimilarityAlgorithm","description":"相似度计算算法类型"},"SimilarityLevel":{"type":"string","enum":["none","low","medium","high","very_high"],"title":"SimilarityLevel","description":"Levels of similarity detection."},"SimilarityMatrix":{"properties":{"report_id":{"type":"string","title":"Report Id","description":"报告ID"},"assignment_id":{"type":"string","title":"Assignment Id","description":"作业ID"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"创建时间"},"student_ids":{"items":{"type":"string"},"type":"array","title":"Student Ids","description":"学生ID列表"},"student_names":{"items":{"type":"string"},"type":"array","title":"Student Names","description":"学生姓名列表"},"matrix":{"items":{"items":{"type":"number"},"type":"array"},"type":"array","title":"Matrix","description":"相似度矩阵数据"},"entries":{"items":{"$ref":"#/components/schemas/SimilarityMatrixEntry"},"type":"array","title":"Entries","description":"详细的矩阵条目"},"threshold":{"type":"number","title":"Threshold","description":"相似度阈值","default":0.7},"flagged_count":{"type":"integer","title":"Flagged Count","description":"标记的可疑对数量","default":0}},"type":"object","required":["report_id","assignment_id","created_at","student_ids","matrix"],"title":"SimilarityMatrix","description":"完整的相似度矩阵"},"SimilarityMatrixEntry":{"properties":{"student_id_1":{"type":"string","title":"Student Id 1","description":"学生1 ID"},"student_id_2":{"type":"string","title":"Student Id 2","description":"学生2 ID"},"student_name_1":{"type":"string","title":"Student Name 1","description":"学生1姓名","default":""},"student_name_2":{"type":"string","title":"Student Name 2","description":"学生2姓名","default":""},"similarity_score":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Similarity Score","description":"综合相似度"},"algorithm_scores":{"additionalProperties":{"type":"number"},"type":"object","title":"Algorithm Scores","description":"各算法的相似度分数"},"is_flagged":{"type":"boolean","title":"Is Flagged","description":"是否标记为可疑","default":false}},"type":"object","required":["student_id_1","student_id_2","similarity_score"],"title":"SimilarityMatrixEntry","description":"相似度矩阵单元格数据"},"StructureResult":{"properties":{"total_classes":{"type":"integer","title":"Total Classes","description":"Total number of classes","default":0},"total_methods":{"type":"integer","title":"Total Methods","description":"Total number of methods","default":0},"total_functions":{"type":"integer","title":"Total Functions","description":"Total number of functions","default":0},"average_function_length":{"type":"number","title":"Average Function Length","description":"Average function length in lines","default":0},"max_class_methods":{"type":"integer","title":"Max Class Methods","description":"Maximum methods in a single class","default":0},"inheritance_depth":{"type":"integer","title":"Inheritance Depth","description":"Maximum inheritance depth","default":0},"unused_imports":{"items":{"type":"string"},"type":"array","title":"Unused Imports","description":"List of unused imports"},"duplicate_patterns":{"type":"integer","title":"Duplicate Patterns","description":"Number of duplicate code patterns detected","default":0},"cyclomatic_complexity":{"type":"number","title":"Cyclomatic Complexity","description":"Average cyclomatic complexity","default":0}},"type":"object","title":"StructureResult","description":"Code structure analysis results."},"StudentCreate":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name","description":"Student's full name"},"email":{"type":"string","title":"Email","description":"Student's email address"},"course_id":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Course Id","description":"Course ID the student is enrolled in"},"student_id":{"type":"string","maxLength":50,"minLength":1,"title":"Student Id","description":"Unique student identifier"},"enrollment_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Enrollment Date","description":"Date of enrollment"}},"type":"object","required":["name","email","student_id"],"title":"StudentCreate","description":"Schema for creating a new student."},"StudentHistoryAnalysis":{"properties":{"student_id":{"type":"string","title":"Student Id","description":"Student ID"},"total_submissions":{"type":"integer","title":"Total Submissions","description":"Total number of submissions","default":0},"average_score":{"type":"number","title":"Average Score","description":"Average score across submissions","default":0.0},"trend":{"$ref":"#/components/schemas/PerformanceTrend","description":"Performance trend","default":"stable"},"trend_zh":{"type":"string","title":"Trend Zh","description":"Trend in Chinese","default":"稳定"},"level":{"$ref":"#/components/schemas/StudentLevel","description":"Estimated skill level","default":"intermediate"},"level_zh":{"type":"string","title":"Level Zh","description":"Level in Chinese","default":"中级"},"strengths":{"items":{"type":"string"},"type":"array","title":"Strengths","description":"Identified strengths"},"strengths_zh":{"items":{"type":"string"},"type":"array","title":"Strengths Zh","description":"Strengths in Chinese"},"weaknesses":{"items":{"type":"string"},"type":"array","title":"Weaknesses","description":"Areas needing improvement"},"weaknesses_zh":{"items":{"type":"string"},"type":"array","title":"Weaknesses Zh","description":"Weaknesses in Chinese"},"recurring_issues":{"items":{"type":"string"},"type":"array","title":"Recurring Issues","description":"Issues that appear repeatedly"},"recurring_issues_zh":{"items":{"type":"string"},"type":"array","title":"Recurring Issues Zh","description":"Recurring issues in Chinese"},"improvement_rate":{"type":"number","title":"Improvement Rate","description":"Rate of improvement (0-100)","default":0.0},"recent_scores":{"items":{"type":"number"},"type":"array","title":"Recent Scores","description":"Recent submission scores"}},"type":"object","required":["student_id"],"title":"StudentHistoryAnalysis","description":"Analysis of student's historical performance."},"StudentLevel":{"type":"string","enum":["beginner","intermediate","advanced"],"title":"StudentLevel","description":"Student skill level."},"StudentListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/StudentResponse"},"type":"array","title":"Items","description":"List of students"},"total":{"type":"integer","title":"Total","description":"Total number of students"},"page":{"type":"integer","title":"Page","description":"Current page number"},"page_size":{"type":"integer","title":"Page Size","description":"Number of items per page"},"total_pages":{"type":"integer","title":"Total Pages","description":"Total number of pages"}},"type":"object","required":["total","page","page_size","total_pages"],"title":"StudentListResponse","description":"Schema for paginated student list response."},"StudentLogin":{"properties":{"student_id":{"type":"string","title":"Student Id","description":"Student ID for login"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email","description":"Email for verification (optional)"}},"type":"object","required":["student_id"],"title":"StudentLogin","description":"Schema for student login."},"StudentLoginResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether login was successful"},"message":{"type":"string","title":"Message","description":"Login result message"},"student":{"anyOf":[{"$ref":"#/components/schemas/StudentResponse"},{"type":"null"}],"description":"Student information if login successful"}},"type":"object","required":["success","message"],"title":"StudentLoginResponse","description":"Schema for student login response."},"StudentResponse":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name","description":"Student's full name"},"email":{"type":"string","title":"Email","description":"Student's email address"},"course_id":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Course Id","description":"Course ID the student is enrolled in"},"id":{"type":"integer","title":"Id","description":"Database ID"},"student_id":{"type":"string","title":"Student Id","description":"Unique student identifier"},"enrollment_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Enrollment Date","description":"Date of enrollment"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Record creation timestamp"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At","description":"Record update timestamp"}},"type":"object","required":["name","email","id","student_id","created_at"],"title":"StudentResponse","description":"Schema for student response."},"StudentUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Name","description":"Student's full name"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email","description":"Student's email address"},"course_id":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Course Id","description":"Course ID"},"enrollment_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Enrollment Date","description":"Date of enrollment"}},"type":"object","title":"StudentUpdate","description":"Schema for updating student information."},"StyleAnalysisResult":{"properties":{"is_compliant":{"type":"boolean","title":"Is Compliant","description":"Whether code is PEP 8 compliant"},"total_issues":{"type":"integer","title":"Total Issues","description":"Total number of style issues"},"issues":{"items":{"$ref":"#/components/schemas/CodeIssue"},"type":"array","title":"Issues","description":"List of style issues"},"score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Score","description":"Style compliance score"}},"type":"object","required":["is_compliant","total_issues","score"],"title":"StyleAnalysisResult","description":"PEP 8 style analysis result."},"SubmissionComparison":{"properties":{"submission_id_1":{"type":"string","title":"Submission Id 1","description":"First submission ID"},"submission_id_2":{"type":"string","title":"Submission Id 2","description":"Second submission ID"},"student_id_1":{"type":"string","title":"Student Id 1","description":"First student ID"},"student_id_2":{"type":"string","title":"Student Id 2","description":"Second student ID"},"similarity_score":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Similarity Score","description":"Overall similarity (0-1)"},"matches":{"items":{"$ref":"#/components/schemas/CodeMatch"},"type":"array","title":"Matches","description":"List of matching segments"},"analysis_notes":{"type":"string","title":"Analysis Notes","description":"Analysis notes","default":""}},"type":"object","required":["submission_id_1","submission_id_2","student_id_1","student_id_2","similarity_score"],"title":"SubmissionComparison","description":"Comparison result between two submissions."},"SubmissionCreate":{"properties":{"content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content","description":"Submitted content (text/code)"},"file_path":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"File Path","description":"Path to uploaded file"},"submission_id":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Submission Id","description":"Unique submission identifier (auto-generated if not provided)"},"student_id":{"type":"string","title":"Student Id","description":"Student ID (unique identifier)"},"assignment_id":{"type":"string","title":"Assignment Id","description":"Assignment ID (unique identifier)"},"submitted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Submitted At","description":"Submission timestamp (defaults to now)"}},"type":"object","required":["student_id","assignment_id"],"title":"SubmissionCreate","description":"Schema for creating a new submission."},"SubmissionData":{"properties":{"student_id":{"type":"string","title":"Student Id","description":"学生ID"},"student_name":{"type":"string","title":"Student Name","description":"学生姓名","default":""},"code":{"type":"string","title":"Code","description":"代码内容"},"submission_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Submission Id","description":"提交ID"}},"type":"object","required":["student_id","code"],"title":"SubmissionData","description":"提交数据（用于批量分析）"},"SubmissionDetailResponse":{"properties":{"content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content","description":"Submitted content (text/code)"},"file_path":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"File Path","description":"Path to uploaded file"},"id":{"type":"integer","title":"Id","description":"Database ID"},"submission_id":{"type":"string","title":"Submission Id","description":"Unique submission identifier"},"student_id":{"type":"integer","title":"Student Id","description":"Student database ID"},"assignment_id":{"type":"integer","title":"Assignment Id","description":"Assignment database ID"},"submitted_at":{"type":"string","format":"date-time","title":"Submitted At","description":"Submission timestamp"},"status":{"$ref":"#/components/schemas/SubmissionStatusEnum","description":"Submission status"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Record creation timestamp"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At","description":"Record update timestamp"},"student_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Student Name","description":"Student name"},"student_external_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Student External Id","description":"Student external ID"},"assignment_title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assignment Title","description":"Assignment title"},"assignment_external_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assignment External Id","description":"Assignment external ID"}},"type":"object","required":["id","submission_id","student_id","assignment_id","submitted_at","status","created_at"],"title":"SubmissionDetailResponse","description":"Schema for detailed submission response with related data."},"SubmissionListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/SubmissionResponse"},"type":"array","title":"Items","description":"List of submissions"},"total":{"type":"integer","title":"Total","description":"Total number of submissions"},"page":{"type":"integer","title":"Page","description":"Current page number"},"page_size":{"type":"integer","title":"Page Size","description":"Number of items per page"},"total_pages":{"type":"integer","title":"Total Pages","description":"Total number of pages"}},"type":"object","required":["total","page","page_size","total_pages"],"title":"SubmissionListResponse","description":"Schema for paginated submission list response."},"SubmissionResponse":{"properties":{"content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content","description":"Submitted content (text/code)"},"file_path":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"File Path","description":"Path to uploaded file"},"id":{"type":"integer","title":"Id","description":"Database ID"},"submission_id":{"type":"string","title":"Submission Id","description":"Unique submission identifier"},"student_id":{"type":"integer","title":"Student Id","description":"Student database ID"},"assignment_id":{"type":"integer","title":"Assignment Id","description":"Assignment database ID"},"submitted_at":{"type":"string","format":"date-time","title":"Submitted At","description":"Submission timestamp"},"status":{"$ref":"#/components/schemas/SubmissionStatusEnum","description":"Submission status"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Record creation timestamp"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At","description":"Record update timestamp"}},"type":"object","required":["id","submission_id","student_id","assignment_id","submitted_at","status","created_at"],"title":"SubmissionResponse","description":"Schema for submission response."},"SubmissionStatusEnum":{"type":"string","enum":["pending","graded","flagged"],"title":"SubmissionStatusEnum","description":"Status of a submission (matching database model)."},"SubmissionStatusUpdate":{"properties":{"status":{"$ref":"#/components/schemas/SubmissionStatusEnum","description":"New submission status"}},"type":"object","required":["status"],"title":"SubmissionStatusUpdate","description":"Schema for updating submission status."},"SuggestImprovementsRequest":{"properties":{"code":{"type":"string","title":"Code","description":"Code to improve"},"language":{"type":"string","title":"Language","description":"Programming language","default":"python"},"focus_areas":{"items":{"type":"string"},"type":"array","title":"Focus Areas","description":"Areas to focus on"},"max_suggestions":{"type":"integer","maximum":20.0,"minimum":1.0,"title":"Max Suggestions","default":5},"include_refactored_code":{"type":"boolean","title":"Include Refactored Code","description":"Include refactored code examples","default":true}},"type":"object","required":["code"],"title":"SuggestImprovementsRequest","description":"Request to suggest code improvements."},"SuggestImprovementsResponse":{"properties":{"success":{"type":"boolean","title":"Success","default":true},"suggestions":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Suggestions"},"refactored_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Refactored Code"},"improvement_summary":{"type":"string","title":"Improvement Summary","default":""}},"type":"object","title":"SuggestImprovementsResponse","description":"Response for improvement suggestions."},"SuggestionDifficulty":{"type":"string","enum":["easy","medium","hard"],"title":"SuggestionDifficulty","description":"Difficulty level for improvement suggestions."},"SupportedLanguage":{"type":"string","enum":["python","javascript","typescript","java","c","cpp","jsx","tsx","all"],"title":"SupportedLanguage","description":"Supported programming languages."},"SyntaxValidation":{"properties":{"is_valid":{"type":"boolean","title":"Is Valid","description":"Whether syntax is valid"},"errors":{"items":{"type":"string"},"type":"array","title":"Errors","description":"Syntax error messages"},"error_line":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Error Line","description":"Line number of first error"}},"type":"object","required":["is_valid"],"title":"SyntaxValidation","description":"Syntax validation result."},"TeacherAnswerRequest":{"properties":{"log_id":{"type":"string","title":"Log Id"},"teacher_id":{"type":"string","title":"Teacher Id"},"answer":{"type":"string","minLength":1,"title":"Answer"},"update_knowledge_base":{"type":"boolean","title":"Update Knowledge Base","description":"是否更新知识库","default":false},"new_keywords":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"New Keywords"}},"type":"object","required":["log_id","teacher_id","answer"],"title":"TeacherAnswerRequest","description":"教师回答请求"},"TeacherAnswerResponse":{"properties":{"log_id":{"type":"string","title":"Log Id"},"answer":{"type":"string","title":"Answer"},"answered_by":{"type":"string","title":"Answered By"},"answered_at":{"type":"string","format":"date-time","title":"Answered At"},"knowledge_base_updated":{"type":"boolean","title":"Knowledge Base Updated"},"new_entry_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"New Entry Id"}},"type":"object","required":["log_id","answer","answered_by","answered_at","knowledge_base_updated"],"title":"TeacherAnswerResponse","description":"教师回答响应"},"TeacherTakeoverRequest":{"properties":{"log_id":{"type":"string","title":"Log Id"},"teacher_id":{"type":"string","title":"Teacher Id"},"teacher_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Teacher Name"}},"type":"object","required":["log_id","teacher_id"],"title":"TeacherTakeoverRequest","description":"教师接管请求"},"TemplateCategory":{"type":"string","enum":["common_issues","language_specific","assignment_specific","encouragement","security","style","complexity","naming","performance","error_handling","testing","algorithm"],"title":"TemplateCategory","description":"Categories for feedback templates."},"TemplateSearchRequest":{"properties":{"query":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Query","description":"Search query for name, title, message, tags"},"categories":{"anyOf":[{"items":{"$ref":"#/components/schemas/TemplateCategory"},"type":"array"},{"type":"null"}],"title":"Categories","description":"Filter by categories"},"languages":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Languages","description":"Filter by languages"},"tones":{"anyOf":[{"items":{"$ref":"#/components/schemas/TemplateTone"},"type":"array"},{"type":"null"}],"title":"Tones","description":"Filter by tones"},"locales":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Locales","description":"Filter by locales"},"severities":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Severities","description":"Filter by severities"},"tags":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tags","description":"Filter by tags (any match)"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active","description":"Filter by active status"},"min_usage_count":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Min Usage Count","description":"Minimum usage count"},"page":{"type":"integer","minimum":1.0,"title":"Page","description":"Page number","default":1},"page_size":{"type":"integer","maximum":100.0,"minimum":1.0,"title":"Page Size","description":"Items per page","default":20},"sort_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sort By","description":"Sort field: name, usage_count, created_at","default":"name"},"sort_order":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sort Order","description":"Sort order: asc, desc","default":"asc"}},"type":"object","title":"TemplateSearchRequest","description":"Request for advanced template search."},"TemplateTone":{"type":"string","enum":["neutral","encouraging","strict","professional"],"title":"TemplateTone","description":"Tone variants for feedback templates."},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"refresh_token":{"type":"string","title":"Refresh Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"},"expires_in":{"type":"integer","title":"Expires In"}},"type":"object","required":["access_token","refresh_token","expires_in"],"title":"Token","description":"JWT Token 响应"},"TriageDecision":{"type":"string","enum":["auto_reply","auto_reply_confirm","to_assistant","to_teacher","to_teacher_urgent"],"title":"TriageDecision","description":"分诊决策枚举"},"TriageRequest":{"properties":{"question":{"type":"string","minLength":1,"title":"Question","description":"用户问题"},"user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"},"user_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Name"},"session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"},"is_urgent":{"type":"boolean","title":"Is Urgent","description":"是否紧急","default":false},"context":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Context","description":"上下文信息"}},"type":"object","required":["question"],"title":"TriageRequest","description":"分诊请求"},"TriageResponse":{"properties":{"log_id":{"type":"string","title":"Log Id"},"question":{"type":"string","title":"Question"},"detected_category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Detected Category"},"detected_difficulty":{"type":"integer","title":"Detected Difficulty"},"difficulty_label":{"type":"string","title":"Difficulty Label"},"match_score":{"type":"number","title":"Match Score"},"matched_entry_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Matched Entry Id"},"decision":{"$ref":"#/components/schemas/TriageDecision"},"answer":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Answer"},"answer_source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Answer Source"},"assigned_to":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned To"},"priority":{"type":"integer","title":"Priority"},"is_urgent":{"type":"boolean","title":"Is Urgent"},"confidence_message":{"type":"string","title":"Confidence Message"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["log_id","question","detected_difficulty","difficulty_label","match_score","decision","priority","is_urgent","confidence_message","created_at"],"title":"TriageResponse","description":"分诊响应"},"TriageResultEnum":{"type":"string","enum":["auto_reply","to_assistant","to_teacher","pending"],"title":"TriageResultEnum","description":"分诊结果枚举"},"TriageStats":{"properties":{"total_questions":{"type":"integer","title":"Total Questions"},"auto_replied":{"type":"integer","title":"Auto Replied"},"to_assistant":{"type":"integer","title":"To Assistant"},"to_teacher":{"type":"integer","title":"To Teacher"},"pending":{"type":"integer","title":"Pending"},"urgent_pending":{"type":"integer","title":"Urgent Pending"},"avg_response_time":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Response Time"},"avg_waiting_time":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Waiting Time"},"resolution_rate":{"type":"number","title":"Resolution Rate"},"questions_by_difficulty":{"additionalProperties":true,"type":"object","title":"Questions By Difficulty"},"questions_by_decision":{"additionalProperties":true,"type":"object","title":"Questions By Decision"}},"type":"object","required":["total_questions","auto_replied","to_assistant","to_teacher","pending","urgent_pending","resolution_rate","questions_by_difficulty","questions_by_decision"],"title":"TriageStats","description":"分诊统计"},"UpdateProfileRequest":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":100,"minLength":2},{"type":"null"}],"title":"Name","description":"用户姓名"}},"type":"object","title":"UpdateProfileRequest","description":"更新用户资料请求"},"UpdateProfileResponse":{"properties":{"user":{"$ref":"#/components/schemas/UserResponse"},"message":{"type":"string","title":"Message","default":"资料更新成功"}},"type":"object","required":["user"],"title":"UpdateProfileResponse","description":"更新用户资料响应"},"UserResponse":{"properties":{"student_id":{"type":"string","maxLength":10,"minLength":10,"title":"Student Id","description":"学号（10位数字）"},"role":{"type":"string","pattern":"^(student|teacher|admin)$","title":"Role","default":"student"},"id":{"type":"integer","title":"Id"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"is_active":{"type":"boolean","title":"Is Active"},"last_login":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Login"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["student_id","id","is_active","created_at","updated_at"],"title":"UserResponse","description":"用户响应 (不含密码)"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"schemas__analysis_rules__BatchAnalysisResponse":{"properties":{"success":{"type":"boolean","title":"Success","default":true},"results":{"items":{"$ref":"#/components/schemas/FullAnalysisResult"},"type":"array","title":"Results"},"summary":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Summary","description":"Aggregate summary"},"message":{"type":"string","title":"Message","default":"Batch analysis completed"}},"type":"object","title":"BatchAnalysisResponse","description":"API response for batch analysis."},"schemas__assignment__CodeQualityMetrics":{"properties":{"cyclomatic_complexity":{"type":"number","title":"Cyclomatic Complexity","description":"Code complexity score","default":0},"maintainability_index":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Maintainability Index","description":"Maintainability score","default":0},"lines_of_code":{"type":"integer","title":"Lines Of Code","description":"Total lines of code","default":0},"comment_ratio":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Comment Ratio","description":"Percentage of comments","default":0},"pep8_issues":{"type":"integer","title":"Pep8 Issues","description":"Number of PEP8 style violations","default":0},"code_smells_count":{"type":"integer","title":"Code Smells Count","description":"Number of code smells detected","default":0}},"type":"object","title":"CodeQualityMetrics","description":"Detailed code quality metrics from static analysis."},"schemas__code_analysis__IssueSeverity":{"type":"string","enum":["error","warning","info","convention","refactor"],"title":"IssueSeverity","description":"Severity levels for code issues."},"schemas__plagiarism__BatchAnalysisRequest":{"properties":{"assignment_id":{"type":"string","title":"Assignment Id","description":"作业ID"},"course_id":{"type":"string","title":"Course Id","description":"课程ID","default":""},"submissions":{"items":{"$ref":"#/components/schemas/SubmissionData"},"type":"array","title":"Submissions","description":"提交列表"},"similarity_threshold":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Similarity Threshold","description":"相似度阈值","default":0.7},"algorithms":{"items":{"$ref":"#/components/schemas/SimilarityAlgorithm"},"type":"array","title":"Algorithms","description":"使用的算法列表"},"generate_reports":{"type":"boolean","title":"Generate Reports","description":"是否生成详细报告","default":true}},"type":"object","required":["assignment_id","submissions"],"title":"BatchAnalysisRequest","description":"批量分析请求"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"/api/v1/auth/login"}}}}}}