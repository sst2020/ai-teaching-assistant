# 前端功能验证指南

## 📋 测试环境状态

### ✅ 服务运行状态
- **后端服务**: 运行中 @ `http://localhost:8000`
- **前端服务**: 运行中 @ `http://localhost:3000`
- **AI Provider**: DeepSeek (已配置 API Key)
- **数据库**: SQLite @ `./teaching_assistant.db`

### 🔧 配置信息
- **前端 API 地址**: `http://localhost:8000` (frontend/.env)
- **CORS 配置**: 已允许 localhost:3000
- **AI 模型**: deepseek-chat
- **调试模式**: 已启用

---

## 🧪 任务 4.2: 前端页面手动验证清单

### 1. 基础功能验证

#### 1.1 应用启动检查
- [ ] 浏览器自动打开 `http://localhost:3000`
- [ ] 页面正常加载，无白屏或崩溃
- [ ] 浏览器控制台无严重错误（允许警告）
- [ ] 网络请求正常（检查 Network 标签）

#### 1.2 用户登录功能
**测试账号**:
- 邮箱: `test@example.com`
- 密码: `password123`

**验证步骤**:
1. 打开登录页面
2. 输入测试账号
3. 点击登录
4. 检查是否成功跳转到仪表板
5. 检查 localStorage 中是否存储了 token

**预期结果**:
- 登录成功后跳转到对应角色的仪表板
- 顶部导航栏显示用户信息
- 无 401/403 错误

---

### 2. 教师端功能验证

#### 2.1 教师仪表板检查
**访问路径**: `/teacher-dashboard`

**验证项目**:
- [ ] **引导提示组件显示**: 页面顶部应显示"管理系统引导提示"横幅
- [ ] **提示内容正确**: 说明作业管理功能已迁移到外部管理系统
- [ ] **管理系统路径显示**: 显示 `E:\Code\repo\管理系统`

#### 2.2 已移除功能确认
**必须确认以下按钮/链接已删除**:
- [ ] ❌ 页面头部的"新建作业"按钮
- [ ] ❌ 快速操作区域的"管理作业"卡片
- [ ] ❌ 最近作业列表的"查看全部"链接
- [ ] ❌ 作业列表中的"编辑"按钮
- [ ] ❌ 空状态下的"创建作业"按钮
- [ ] ❌ `/manage-assignments` 路由（访问应返回 404）

#### 2.3 保留功能验证
**以下功能应正常工作**:
- [ ] ✅ 查看作业列表
- [ ] ✅ 查看作业详情
- [ ] ✅ 评分界面
- [ ] ✅ 问题队列
- [ ] ✅ 学生提交记录查看
- [ ] ✅ 数据分析和统计

---

### 3. 学生端功能验证

#### 3.1 学生仪表板检查
**访问路径**: `/student-dashboard`

**验证项目**:
- [ ] 作业列表正常显示
- [ ] 可以查看作业详情
- [ ] 可以提交作业
- [ ] 可以查看成绩和反馈
- [ ] AI 问答功能正常

**预期结果**:
- 所有学生端功能完全不受影响
- 无任何功能缺失或错误

---

### 4. AI 服务功能验证

#### 4.1 AI 问答测试
**访问路径**: `/qa` 或学生仪表板的问答区域

**测试问题**:
```
什么是递归？请举例说明。
```

**验证步骤**:
1. 输入测试问题
2. 点击提交
3. 等待 AI 响应（可能需要 5-10 秒）
4. 检查响应内容

**预期结果**:
- AI 返回中文回答
- 回答包含概念解释和代码示例
- 无超时或错误

#### 4.2 代码反馈生成测试
**访问路径**: `/submit-assignment`

**测试代码**:
```python
def fibonacci(n):
    if n <= 1:
        return n
    return fibonacci(n-1) + fibonacci(n-2)
```

**验证步骤**:
1. 提交上述代码
2. 等待 AI 分析
3. 查看反馈内容

**预期结果**:
- 代码风格评分显示
- AI 提供改进建议
- 指出递归效率问题

---

### 5. 网络请求验证

#### 5.1 API 端点检查
**打开浏览器开发者工具 → Network 标签**

**验证以下请求**:
- [ ] `GET /api/v1/assignments` → 200 OK
- [ ] `POST /api/v1/assignments` → 405 Method Not Allowed (已删除)
- [ ] `PUT /api/v1/assignments/{id}` → 405 (已删除)
- [ ] `DELETE /api/v1/assignments/{id}` → 405 (已删除)
- [ ] `POST /api/v1/sync/assignments` → 200 OK (新端点)
- [ ] `GET /api/v1/sync/logs` → 200 OK (新端点)

#### 5.2 CORS 检查
**验证项目**:
- [ ] 无 CORS 错误
- [ ] 请求头包含 `Access-Control-Allow-Origin`
- [ ] 预检请求 (OPTIONS) 正常

---

### 6. 错误处理验证

#### 6.1 尝试访问已删除的路由
**测试步骤**:
1. 手动访问 `http://localhost:3000/manage-assignments`
2. 检查是否正确处理

**预期结果**:
- 显示 404 页面或重定向到首页
- 无应用崩溃

#### 6.2 尝试调用已删除的 API
**测试步骤**:
1. 打开浏览器控制台
2. 执行以下代码:
```javascript
fetch('http://localhost:8000/api/v1/assignments', {
  method: 'POST',
  headers: {'Content-Type': 'application/json'},
  body: JSON.stringify({title: 'Test'})
})
.then(r => r.json())
.then(console.log)
```

**预期结果**:
- 返回 405 Method Not Allowed
- 错误信息清晰

---

## 📊 验证结果记录

### 通过的测试项
- [ ] 基础功能验证 (1.1 - 1.2)
- [ ] 教师端功能验证 (2.1 - 2.3)
- [ ] 学生端功能验证 (3.1)
- [ ] AI 服务功能验证 (4.1 - 4.2)
- [ ] 网络请求验证 (5.1 - 5.2)
- [ ] 错误处理验证 (6.1 - 6.2)

### 发现的问题
_请在此记录测试过程中发现的任何问题_

---

## 🔍 故障排查指南

### 问题 1: 前端无法连接后端
**症状**: Network Error, CORS 错误
**解决方案**:
1. 确认后端服务运行在 8000 端口
2. 检查 `frontend/.env` 中的 `REACT_APP_API_URL`
3. 检查 `backend/.env` 中的 CORS 配置

### 问题 2: AI 功能不工作
**症状**: AI 返回错误或超时
**解决方案**:
1. 检查 `backend/.env` 中的 `USE_DEEPSEEK=true`
2. 验证 `DEEPSEEK_API_KEY` 是否有效
3. 检查网络连接到 `https://api.deepseek.com`
4. 查看后端日志中的 AI 请求详情

### 问题 3: 登录失败
**症状**: 401 Unauthorized
**解决方案**:
1. 确认测试账号已在数据库中创建
2. 检查 `SECRET_KEY` 配置
3. 清除浏览器 localStorage 和 cookies

---

## ✅ 验证完成标准

**所有以下条件满足即可认为验证通过**:
1. ✅ 前后端服务正常运行
2. ✅ 教师端所有"管理作业"功能已移除
3. ✅ 学生端功能完全正常
4. ✅ AI 服务正常响应
5. ✅ 无严重错误或崩溃
6. ✅ 已删除的 API 端点返回 405


